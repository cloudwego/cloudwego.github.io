<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.142.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Enhancing Performance in Microservice Architecture with Kitex | CloudWeGo</title>
<meta name=description content="A leading practice for building enterprise cloud native middleware!"><meta property="og:url" content="https://www.cloudwego.io/blog/2024/01/29/enhancing-performance-in-microservice-architecture-with-kitex/"><meta property="og:site_name" content="CloudWeGo"><meta property="og:title" content="Enhancing Performance in Microservice Architecture with Kitex"><meta property="og:description" content="This post explores the creation and optimization of ByteDance's Remote Procedure Call (RPC) framework, Kitex, to address challenges within microservice architecture. Highlighting innovative performance optimization techniques, controlled Garbage Collection and concurrency adjustment, this insightful read offers hands-on strategies and future plans for evolving high-performance microservice systems."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2024-01-29T00:00:00+00:00"><meta property="article:modified_time" content="2025-03-07T17:25:05+08:00"><meta itemprop=name content="Enhancing Performance in Microservice Architecture with Kitex"><meta itemprop=description content="This post explores the creation and optimization of ByteDance's Remote Procedure Call (RPC) framework, Kitex, to address challenges within microservice architecture. Highlighting innovative performance optimization techniques, controlled Garbage Collection and concurrency adjustment, this insightful read offers hands-on strategies and future plans for evolving high-performance microservice systems."><meta itemprop=datePublished content="2024-01-29T00:00:00+00:00"><meta itemprop=dateModified content="2025-03-07T17:25:05+08:00"><meta itemprop=wordCount content="3634"><meta itemprop=keywords content="CloudWeGo,middleware,Go,Golang,Kitex,microservice framework,ByteDance Open Source,ByteDance,open source,cloud native,open source,kubernetes,gRPC,microservices,rpc,thrift"><meta name=twitter:card content="summary"><meta name=twitter:title content="Enhancing Performance in Microservice Architecture with Kitex"><meta name=twitter:description content="This post explores the creation and optimization of ByteDance's Remote Procedure Call (RPC) framework, Kitex, to address challenges within microservice architecture. Highlighting innovative performance optimization techniques, controlled Garbage Collection and concurrency adjustment, this insightful read offers hands-on strategies and future plans for evolving high-performance microservice systems."><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYWRQRLPRM"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QYWRQRLPRM")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?f1808c42af827f368aa7eca3baae6d55",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=preload href=/scss/main.min.b3c21c777309e05201dd625b8a4ece4076249bfa52b71d58c6e352d84c6c0320.css as=style><link href=/scss/main.min.b3c21c777309e05201dd625b8a4ece4076249bfa52b71d58c6e352d84c6c0320.css rel=stylesheet integrity><script src=/js/jquery.min.js></script><link rel=stylesheet href=/css/prism.css><link rel=stylesheet href=/css/docsearch.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYWRQRLPRM"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QYWRQRLPRM")}</script></head><body class="td-page td-blog"><header><nav class="js-navbar-scroll navbar navbar-expand-xl navbar-dark td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><img src=/img/logo.png></span>
</a><button class=navbar-toggler type=button data-toggle=collapse data-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0 ml-auto"><li class="dropdown sub-menu"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Documentation</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/kitex/>Kitex</a>
<a class=dropdown-item href=/docs/hertz/>Hertz</a>
<a class=dropdown-item href=/docs/volo/>Volo</a>
<a class=dropdown-item href=/docs/netpoll/>Netpoll</a>
<a class=dropdown-item href=/docs/cwgo/>Cwgo</a>
<a class=dropdown-item href=/docs/eino/>Eino</a>
<a class=dropdown-item href=/docs/monolake/>Monolake</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/blog/><span class=active>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/cooperation/><span>Cooperation</span></a></li><li class="dropdown sub-menu"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Security</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/security/safety-bulletin/>safety-bulletin</a>
<a class=dropdown-item href=/security/vulnerability-reporting/>vulnerability-reporting</a></div></li><li class="nav-item dropdown mr-4"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/>中文</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><div id=docsearch></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><div id=docsearch></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/>中文</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-blog-li><a href=/blog/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-blog><span>Blog</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-blognews-li><input type=checkbox id=m-blognews-check checked>
<label for=m-blognews-check><a href=/blog/news/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-blognews><span>News</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20240221delving-deeper-enriching-microservices-with-golang-with-cloudwego-li><input type=checkbox id=m-blog20240221delving-deeper-enriching-microservices-with-golang-with-cloudwego-check checked>
<label for=m-blog20240221delving-deeper-enriching-microservices-with-golang-with-cloudwego-check><a href=/blog/2024/02/21/delving-deeper-enriching-microservices-with-golang-with-cloudwego/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20240221delving-deeper-enriching-microservices-with-golang-with-cloudwego><span>Delving Deeper: Enriching Microservices with Golang with CloudWeGo</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-blog20240129enhancing-performance-in-microservice-architecture-with-kitex-li><input type=checkbox id=m-blog20240129enhancing-performance-in-microservice-architecture-with-kitex-check checked>
<label for=m-blog20240129enhancing-performance-in-microservice-architecture-with-kitex-check><a href=/blog/2024/01/29/enhancing-performance-in-microservice-architecture-with-kitex/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-blog20240129enhancing-performance-in-microservice-architecture-with-kitex><span class=td-sidebar-nav-active-item>Enhancing Performance in Microservice Architecture with Kitex</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20240118harnessing-the-power-of-rust-for-cloud-development-with-volo-li><input type=checkbox id=m-blog20240118harnessing-the-power-of-rust-for-cloud-development-with-volo-check checked>
<label for=m-blog20240118harnessing-the-power-of-rust-for-cloud-development-with-volo-check><a href=/blog/2024/01/18/harnessing-the-power-of-rust-for-cloud-development-with-volo/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20240118harnessing-the-power-of-rust-for-cloud-development-with-volo><span>Harnessing the Power of Rust for Cloud Development with Volo</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20240110mastering-golang-microservices-a-practical-guide-embrace-high-performance-with-kitex-and-hertz-li><input type=checkbox id=m-blog20240110mastering-golang-microservices-a-practical-guide-embrace-high-performance-with-kitex-and-hertz-check checked>
<label for=m-blog20240110mastering-golang-microservices-a-practical-guide-embrace-high-performance-with-kitex-and-hertz-check><a href=/blog/2024/01/10/mastering-golang-microservices-a-practical-guide-embrace-high-performance-with-kitex-and-hertz/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20240110mastering-golang-microservices-a-practical-guide-embrace-high-performance-with-kitex-and-hertz><span>Mastering Golang Microservices - A Practical Guide: Embrace High-Performance with Kitex and Hertz</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20231128the-role-of-cloudwego-in-modern-cloud-native-applications-li><input type=checkbox id=m-blog20231128the-role-of-cloudwego-in-modern-cloud-native-applications-check checked>
<label for=m-blog20231128the-role-of-cloudwego-in-modern-cloud-native-applications-check><a href=/blog/2023/11/28/the-role-of-cloudwego-in-modern-cloud-native-applications/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20231128the-role-of-cloudwego-in-modern-cloud-native-applications><span>The Role of CloudWeGo in Modern Cloud-Native Applications</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20230615cloudwego-a-leading-practice-for-building-enterprise-cloud-native-middleware-li><input type=checkbox id=m-blog20230615cloudwego-a-leading-practice-for-building-enterprise-cloud-native-middleware-check checked>
<label for=m-blog20230615cloudwego-a-leading-practice-for-building-enterprise-cloud-native-middleware-check><a href=/blog/2023/06/15/cloudwego-a-leading-practice-for-building-enterprise-cloud-native-middleware/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20230615cloudwego-a-leading-practice-for-building-enterprise-cloud-native-middleware><span>CloudWeGo: A leading practice for building enterprise cloud native middleware!</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20230417introducing-monoio-a-high-performance-rust-runtime-based-on-io-uring-li><input type=checkbox id=m-blog20230417introducing-monoio-a-high-performance-rust-runtime-based-on-io-uring-check checked>
<label for=m-blog20230417introducing-monoio-a-high-performance-rust-runtime-based-on-io-uring-check><a href=/blog/2023/04/17/introducing-monoio-a-high-performance-rust-runtime-based-on-io-uring/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20230417introducing-monoio-a-high-performance-rust-runtime-based-on-io-uring><span>Introducing Monoio: a high-performance Rust Runtime based on io-uring</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20230404introducing-shmipc-a-high-performance-inter-process-communication-library-li><input type=checkbox id=m-blog20230404introducing-shmipc-a-high-performance-inter-process-communication-library-check checked>
<label for=m-blog20230404introducing-shmipc-a-high-performance-inter-process-communication-library-check><a href=/blog/2023/04/04/introducing-shmipc-a-high-performance-inter-process-communication-library/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20230404introducing-shmipc-a-high-performance-inter-process-communication-library><span>Introducing Shmipc: A High Performance Inter-process Communication Library</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20230224getting-started-with-hertz-performance-testing-guide-li><input type=checkbox id=m-blog20230224getting-started-with-hertz-performance-testing-guide-check checked>
<label for=m-blog20230224getting-started-with-hertz-performance-testing-guide-check><a href=/blog/2023/02/24/getting-started-with-hertz-performance-testing-guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20230224getting-started-with-hertz-performance-testing-guide><span>Getting Started with Hertz: Performance Testing Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20221220kitex-proxyless-practicetraffic-lane-implementation-with-istio-and-opentelemetry-li><input type=checkbox id=m-blog20221220kitex-proxyless-practicetraffic-lane-implementation-with-istio-and-opentelemetry-check checked>
<label for=m-blog20221220kitex-proxyless-practicetraffic-lane-implementation-with-istio-and-opentelemetry-check><a href=/blog/2022/12/20/kitex-proxyless-practicetraffic-lane-implementation-with-istio-and-opentelemetry/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20221220kitex-proxyless-practicetraffic-lane-implementation-with-istio-and-opentelemetry><span>Kitex Proxyless Practice：Traffic Lane Implementation with Istio and OpenTelemetry</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220930kitex-unifying-open-source-practice-for-a-high-performance-rpc-framework-li><input type=checkbox id=m-blog20220930kitex-unifying-open-source-practice-for-a-high-performance-rpc-framework-check checked>
<label for=m-blog20220930kitex-unifying-open-source-practice-for-a-high-performance-rpc-framework-check><a href=/blog/2022/09/30/kitex-unifying-open-source-practice-for-a-high-performance-rpc-framework/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220930kitex-unifying-open-source-practice-for-a-high-performance-rpc-framework><span>Kitex: Unifying Open Source Practice for a High-Performance RPC Framework</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220830chinas-first-rust-based-rpc-framework-volo-is-officially-open-source-li><input type=checkbox id=m-blog20220830chinas-first-rust-based-rpc-framework-volo-is-officially-open-source-check checked>
<label for=m-blog20220830chinas-first-rust-based-rpc-framework-volo-is-officially-open-source-check><a href=/blog/2022/08/30/chinas-first-rust-based-rpc-framework-volo-is-officially-open-source/ title="China's First Rust-based RPC Framework - Volo is Officially Open Source!" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220830chinas-first-rust-based-rpc-framework-volo-is-officially-open-source><span>China's first RPC framework based on Rust language - Volo is officially open source!</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220621hertz-an-ultra-large-scale-enterprise-level-microservice-http-framework-is-now-officially-open-source-li><input type=checkbox id=m-blog20220621hertz-an-ultra-large-scale-enterprise-level-microservice-http-framework-is-now-officially-open-source-check checked>
<label for=m-blog20220621hertz-an-ultra-large-scale-enterprise-level-microservice-http-framework-is-now-officially-open-source-check><a href=/blog/2022/06/21/hertz-an-ultra-large-scale-enterprise-level-microservice-http-framework-is-now-officially-open-source/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220621hertz-an-ultra-large-scale-enterprise-level-microservice-http-framework-is-now-officially-open-source><span>Hertz, an Ultra Large Scale Enterprise-Level Microservice HTTP Framework, is Now Officially Open Source!</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220325an-article-to-learn-about-bytedance-microservices-middleware-cloudwego-li><input type=checkbox id=m-blog20220325an-article-to-learn-about-bytedance-microservices-middleware-cloudwego-check checked>
<label for=m-blog20220325an-article-to-learn-about-bytedance-microservices-middleware-cloudwego-check><a href=/blog/2022/03/25/an-article-to-learn-about-bytedance-microservices-middleware-cloudwego/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220325an-article-to-learn-about-bytedance-microservices-middleware-cloudwego><span>An Article to Learn About ByteDance Microservices Middleware CloudWeGo</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20211124getting-started-with-kitexs-practice-performance-testing-guide-li><input type=checkbox id=m-blog20211124getting-started-with-kitexs-practice-performance-testing-guide-check checked>
<label for=m-blog20211124getting-started-with-kitexs-practice-performance-testing-guide-check><a href=/blog/2021/11/24/getting-started-with-kitexs-practice-performance-testing-guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20211124getting-started-with-kitexs-practice-performance-testing-guide><span>Getting Started With Kitex's Practice: Performance Testing Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20210923performance-optimization-on-kitex-li><input type=checkbox id=m-blog20210923performance-optimization-on-kitex-check checked>
<label for=m-blog20210923performance-optimization-on-kitex-check><a href=/blog/2021/09/23/performance-optimization-on-kitex/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20210923performance-optimization-on-kitex><span>Performance Optimization on Kitex</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20210913cloudwego-open-source-announcement-li><input type=checkbox id=m-blog20210913cloudwego-open-source-announcement-check checked>
<label for=m-blog20210913cloudwego-open-source-announcement-check><a href=/blog/2021/09/13/cloudwego-open-source-announcement/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20210913cloudwego-open-source-announcement><span>CloudWeGo Open Source Announcement</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20200524bytedance-practices-on-go-network-library-li><input type=checkbox id=m-blog20200524bytedance-practices-on-go-network-library-check checked>
<label for=m-blog20200524bytedance-practices-on-go-network-library-check><a href=/blog/2020/05/24/bytedance-practices-on-go-network-library/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20200524bytedance-practices-on-go-network-library><span>ByteDance Practices on Go Network Library</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-blogreleases-li><input type=checkbox id=m-blogreleases-check checked>
<label for=m-blogreleases-check><a href=/blog/releases/ title="New Releases" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-blogreleases><span>Releases</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-blogreleaseskitex-li><input type=checkbox id=m-blogreleaseskitex-check checked>
<label for=m-blogreleaseskitex-check><a href=/blog/releases/kitex/ title="Kitex Release" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-blogreleaseskitex><span>Kitex</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20250103kitex-release-v0120-li><input type=checkbox id=m-blog20250103kitex-release-v0120-check>
<label for=m-blog20250103kitex-release-v0120-check><a href=/blog/2025/01/03/kitex-release-v0.12.0/ title="Kitex Release v0.12.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20250103kitex-release-v0120><span>Release v0.12.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20240912kitex-release-v0110-li><input type=checkbox id=m-blog20240912kitex-release-v0110-check>
<label for=m-blog20240912kitex-release-v0110-check><a href=/blog/2024/09/12/kitex-release-v0.11.0/ title="Kitex Release v0.11.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20240912kitex-release-v0110><span>Release v0.11.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20240612kitex-release-v0100-li><input type=checkbox id=m-blog20240612kitex-release-v0100-check>
<label for=m-blog20240612kitex-release-v0100-check><a href=/blog/2024/06/12/kitex-release-v0.10.0/ title="Kitex Release v0.10.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20240612kitex-release-v0100><span>Release v0.10.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20240304kitex-release-v090-li><input type=checkbox id=m-blog20240304kitex-release-v090-check>
<label for=m-blog20240304kitex-release-v090-check><a href=/blog/2024/03/04/kitex-release-v0.9.0/ title="Kitex Release v0.9.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20240304kitex-release-v090><span>Release v0.9.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20231130kitex-release-v080-li><input type=checkbox id=m-blog20231130kitex-release-v080-check>
<label for=m-blog20231130kitex-release-v080-check><a href=/blog/2023/11/30/kitex-release-v0.8.0/ title="Kitex Release v0.8.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20231130kitex-release-v080><span>Release v0.8.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20230927kitex-release-v072-li><input type=checkbox id=m-blog20230927kitex-release-v072-check>
<label for=m-blog20230927kitex-release-v072-check><a href=/blog/2023/09/27/kitex-release-v0.7.2/ title="Kitex Release v0.7.2" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20230927kitex-release-v072><span>Release v0.7.2</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20230814kitex-release-v070-li><input type=checkbox id=m-blog20230814kitex-release-v070-check>
<label for=m-blog20230814kitex-release-v070-check><a href=/blog/2023/08/14/kitex-release-v0.7.0/ title="Kitex Release v0.7.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20230814kitex-release-v070><span>Release v0.7.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20230619kitex-release-v061-li><input type=checkbox id=m-blog20230619kitex-release-v061-check>
<label for=m-blog20230619kitex-release-v061-check><a href=/blog/2023/06/19/kitex-release-v0.6.1/ title="Kitex Release v0.6.1" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20230619kitex-release-v061><span>Release v0.6.1</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20230614kitex-release-v060-li><input type=checkbox id=m-blog20230614kitex-release-v060-check>
<label for=m-blog20230614kitex-release-v060-check><a href=/blog/2023/06/14/kitex-release-v0.6.0/ title="Kitex Release v0.6.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20230614kitex-release-v060><span>Release v0.6.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20230421kitex-release-v053-li><input type=checkbox id=m-blog20230421kitex-release-v053-check>
<label for=m-blog20230421kitex-release-v053-check><a href=/blog/2023/04/21/kitex-release-v0.5.3/ title="Kitex Release v0.5.3" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20230421kitex-release-v053><span>Release v0.5.3</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20230308kitex-release-v050-li><input type=checkbox id=m-blog20230308kitex-release-v050-check>
<label for=m-blog20230308kitex-release-v050-check><a href=/blog/2023/03/08/kitex-release-v0.5.0/ title="Kitex Release v0.5.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20230308kitex-release-v050><span>Release v0.5.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20221102kitex-release-v043-li><input type=checkbox id=m-blog20221102kitex-release-v043-check>
<label for=m-blog20221102kitex-release-v043-check><a href=/blog/2022/11/02/kitex-release-v0.4.3/ title="Kitex Release v0.4.3" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20221102kitex-release-v043><span>Release v0.4.3</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220826kitex-release-v040-li><input type=checkbox id=m-blog20220826kitex-release-v040-check>
<label for=m-blog20220826kitex-release-v040-check><a href=/blog/2022/08/26/kitex-release-v0.4.0/ title="Kitex Release v0.4.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220826kitex-release-v040><span>Release v0.4.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220602kitex-release-v032-li><input type=checkbox id=m-blog20220602kitex-release-v032-check>
<label for=m-blog20220602kitex-release-v032-check><a href=/blog/2022/06/02/kitex-release-v0.3.2/ title="Kitex Release v0.3.2" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220602kitex-release-v032><span>Release v0.3.2</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220429kitex-release-v030-li><input type=checkbox id=m-blog20220429kitex-release-v030-check>
<label for=m-blog20220429kitex-release-v030-check><a href=/blog/2022/04/29/kitex-release-v0.3.0/ title="Kitex Release v0.3.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220429kitex-release-v030><span>Release v0.3.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220324kitex-release-v021-li><input type=checkbox id=m-blog20220324kitex-release-v021-check>
<label for=m-blog20220324kitex-release-v021-check><a href=/blog/2022/03/24/kitex-release-v0.2.1/ title="Kitex Release v0.2.1" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220324kitex-release-v021><span>Release v0.2.1</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220224kitex-release-v020-li><input type=checkbox id=m-blog20220224kitex-release-v020-check>
<label for=m-blog20220224kitex-release-v020-check><a href=/blog/2022/02/24/kitex-release-v0.2.0/ title="Kitex Release v0.2.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220224kitex-release-v020><span>Release v0.2.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220118kitex-release-v014-li><input type=checkbox id=m-blog20220118kitex-release-v014-check>
<label for=m-blog20220118kitex-release-v014-check><a href=/blog/2022/01/18/kitex-release-v0.1.4/ title="Kitex Release v0.1.4" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220118kitex-release-v014><span>Release v0.1.4</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20211230kitex-release-v013-li><input type=checkbox id=m-blog20211230kitex-release-v013-check>
<label for=m-blog20211230kitex-release-v013-check><a href=/blog/2021/12/30/kitex-release-v0.1.3/ title="Kitex Release v0.1.3" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20211230kitex-release-v013><span>Release v0.1.3</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20211222kitex-release-v012-li><input type=checkbox id=m-blog20211222kitex-release-v012-check>
<label for=m-blog20211222kitex-release-v012-check><a href=/blog/2021/12/22/kitex-release-v0.1.2/ title="Kitex Release v0.1.2" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20211222kitex-release-v012><span>Release v0.1.2</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20211213kitex-release-v010-li><input type=checkbox id=m-blog20211213kitex-release-v010-check>
<label for=m-blog20211213kitex-release-v010-check><a href=/blog/2021/12/13/kitex-release-v0.1.0/ title="Kitex Release v0.1.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20211213kitex-release-v010><span>Release v0.1.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20211105kitex-release-v008-li><input type=checkbox id=m-blog20211105kitex-release-v008-check>
<label for=m-blog20211105kitex-release-v008-check><a href=/blog/2021/11/05/kitex-release-v0.0.8/ title="Kitex Release v0.0.8" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20211105kitex-release-v008><span>Release v0.0.8</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20210926kitex-release-v005-li><input type=checkbox id=m-blog20210926kitex-release-v005-check>
<label for=m-blog20210926kitex-release-v005-check><a href=/blog/2021/09/26/kitex-release-v0.0.5/ title="Kitex Release v0.0.5" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20210926kitex-release-v005><span>Release v0.0.5</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20210826kitex-release-v004-li><input type=checkbox id=m-blog20210826kitex-release-v004-check>
<label for=m-blog20210826kitex-release-v004-check><a href=/blog/2021/08/26/kitex-release-v0.0.4/ title="Kitex Release v0.0.4" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20210826kitex-release-v004><span>Release v0.0.4</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20210801kitex-release-v003-li><input type=checkbox id=m-blog20210801kitex-release-v003-check>
<label for=m-blog20210801kitex-release-v003-check><a href=/blog/2021/08/01/kitex-release-v0.0.3/ title="Kitex Release v0.0.3" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20210801kitex-release-v003><span>Release v0.0.3</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20210730kitex-release-v002-li><input type=checkbox id=m-blog20210730kitex-release-v002-check>
<label for=m-blog20210730kitex-release-v002-check><a href=/blog/2021/07/30/kitex-release-v0.0.2/ title="Kitex Release v0.0.2" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20210730kitex-release-v002><span>Release v0.0.2</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20210712kitex-release-v001-li><input type=checkbox id=m-blog20210712kitex-release-v001-check>
<label for=m-blog20210712kitex-release-v001-check><a href=/blog/2021/07/12/kitex-release-v0.0.1/ title="Kitex Release v0.0.1" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20210712kitex-release-v001><span>Release v0.0.1</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-blogreleaseshertz-li><input type=checkbox id=m-blogreleaseshertz-check checked>
<label for=m-blogreleaseshertz-check><a href=/blog/releases/hertz/ title="Hertz Release" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-blogreleaseshertz><span>Hertz</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20240530hertz-release-v090-li><input type=checkbox id=m-blog20240530hertz-release-v090-check>
<label for=m-blog20240530hertz-release-v090-check><a href=/blog/2024/05/30/hertz-release-v0.9.0/ title="Hertz Release v0.9.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20240530hertz-release-v090><span>Release v0.9.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20240112hertz-release-v080-li><input type=checkbox id=m-blog20240112hertz-release-v080-check>
<label for=m-blog20240112hertz-release-v080-check><a href=/blog/2024/01/12/hertz-release-v0.8.0/ title="Hertz Release v0.8.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20240112hertz-release-v080><span>Release v0.8.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20230926hertz-release-v070-li><input type=checkbox id=m-blog20230926hertz-release-v070-check>
<label for=m-blog20230926hertz-release-v070-check><a href=/blog/2023/09/26/hertz-release-v0.7.0/ title="Hertz Release v0.7.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20230926hertz-release-v070><span>Release v0.7.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20230302hertz-release-v060-li><input type=checkbox id=m-blog20230302hertz-release-v060-check>
<label for=m-blog20230302hertz-release-v060-check><a href=/blog/2023/03/02/hertz-release-v0.6.0/ title="Hertz Release v0.6.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20230302hertz-release-v060><span>Release v0.6.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20230112hertz-release-v050-li><input type=checkbox id=m-blog20230112hertz-release-v050-check>
<label for=m-blog20230112hertz-release-v050-check><a href=/blog/2023/01/12/hertz-release-v0.5.0/ title="Hertz Release v0.5.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20230112hertz-release-v050><span>Release v0.5.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20221028hertz-release-v040-li><input type=checkbox id=m-blog20221028hertz-release-v040-check>
<label for=m-blog20221028hertz-release-v040-check><a href=/blog/2022/10/28/hertz-release-v0.4.0/ title="Hertz Release v0.4.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20221028hertz-release-v040><span>Release v0.4.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220920hertz-release-v032-li><input type=checkbox id=m-blog20220920hertz-release-v032-check>
<label for=m-blog20220920hertz-release-v032-check><a href=/blog/2022/09/20/hertz-release-v0.3.2/ title="Hertz Release v0.3.2" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220920hertz-release-v032><span>Release v0.3.2</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220829hertz-release-v030-li><input type=checkbox id=m-blog20220829hertz-release-v030-check>
<label for=m-blog20220829hertz-release-v030-check><a href=/blog/2022/08/29/hertz-release-v0.3.0/ title="Hertz Release v0.3.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220829hertz-release-v030><span>Release v0.3.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220722hertz-release-v020-li><input type=checkbox id=m-blog20220722hertz-release-v020-check>
<label for=m-blog20220722hertz-release-v020-check><a href=/blog/2022/07/22/hertz-release-v0.2.0/ title="Hertz Release v0.2.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220722hertz-release-v020><span>Release v0.2.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220620hertz-release-v010-li><input type=checkbox id=m-blog20220620hertz-release-v010-check>
<label for=m-blog20220620hertz-release-v010-check><a href=/blog/2022/06/20/hertz-release-v0.1.0/ title="Hertz Release v0.1.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220620hertz-release-v010><span>Release v0.1.0</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-blogreleasesnetpoll-li><input type=checkbox id=m-blogreleasesnetpoll-check checked>
<label for=m-blogreleasesnetpoll-check><a href=/blog/releases/netpoll/ title="Netpoll Release" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-blogreleasesnetpoll><span>Netpoll</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20240304netpoll-release-v060-li><input type=checkbox id=m-blog20240304netpoll-release-v060-check>
<label for=m-blog20240304netpoll-release-v060-check><a href=/blog/2024/03/04/netpoll-release-v0.6.0/ title="Netpoll Release v0.6.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20240304netpoll-release-v060><span>Release v0.6.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20231018netpoll-release-v051-li><input type=checkbox id=m-blog20231018netpoll-release-v051-check>
<label for=m-blog20231018netpoll-release-v051-check><a href=/blog/2023/10/18/netpoll-release-v0.5.1/ title="Netpoll Release v0.5.1" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20231018netpoll-release-v051><span>Release v0.5.1</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20230926netpoll-release-v050-li><input type=checkbox id=m-blog20230926netpoll-release-v050-check>
<label for=m-blog20230926netpoll-release-v050-check><a href=/blog/2023/09/26/netpoll-release-v0.5.0/ title="Netpoll Release v0.5.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20230926netpoll-release-v050><span>Release v0.5.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20230614netpoll-release-v040-li><input type=checkbox id=m-blog20230614netpoll-release-v040-check>
<label for=m-blog20230614netpoll-release-v040-check><a href=/blog/2023/06/14/netpoll-release-v0.4.0/ title="Netpoll Release v0.4.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20230614netpoll-release-v040><span>Release v0.4.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20221109netpoll-release-v030-li><input type=checkbox id=m-blog20221109netpoll-release-v030-check>
<label for=m-blog20221109netpoll-release-v030-check><a href=/blog/2022/11/09/netpoll-release-v0.3.0/ title="Netpoll Release v0.3.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20221109netpoll-release-v030><span>Release v0.3.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220428netpoll-release-v022-li><input type=checkbox id=m-blog20220428netpoll-release-v022-check>
<label for=m-blog20220428netpoll-release-v022-check><a href=/blog/2022/04/28/netpoll-release-v0.2.2/ title="Netpoll Release v0.2.2" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220428netpoll-release-v022><span>Release v0.2.2</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20220222netpoll-release-v020-li><input type=checkbox id=m-blog20220222netpoll-release-v020-check>
<label for=m-blog20220222netpoll-release-v020-check><a href=/blog/2022/02/22/netpoll-release-v0.2.0/ title="Netpoll Release v0.2.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20220222netpoll-release-v020><span>Release v0.2.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20211213netpoll-release-v012-li><input type=checkbox id=m-blog20211213netpoll-release-v012-check>
<label for=m-blog20211213netpoll-release-v012-check><a href=/blog/2021/12/13/netpoll-release-v0.1.2/ title="Netpoll Release v0.1.2" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20211213netpoll-release-v012><span>Release v0.1.2</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20211209netpoll-release-v011-li><input type=checkbox id=m-blog20211209netpoll-release-v011-check>
<label for=m-blog20211209netpoll-release-v011-check><a href=/blog/2021/12/09/netpoll-release-v0.1.1/ title="Netpoll Release v0.1.1" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20211209netpoll-release-v011><span>Release v0.1.1</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20211201netpoll-release-v010-li><input type=checkbox id=m-blog20211201netpoll-release-v010-check>
<label for=m-blog20211201netpoll-release-v010-check><a href=/blog/2021/12/01/netpoll-release-v0.1.0/ title="Netpoll Release v0.1.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20211201netpoll-release-v010><span>Release v0.1.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20210916netpoll-release-v004-li><input type=checkbox id=m-blog20210916netpoll-release-v004-check>
<label for=m-blog20210916netpoll-release-v004-check><a href=/blog/2021/09/16/netpoll-release-v0.0.4/ title="Netpoll Release v0.0.4" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20210916netpoll-release-v004><span>Release v0.0.4</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-blogreleasesvolo-li><input type=checkbox id=m-blogreleasesvolo-check checked>
<label for=m-blogreleasesvolo-check><a href=/blog/releases/volo/ title="Volo Release" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-blogreleasesvolo><span>Volo</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20240408volo-release-0100-li><input type=checkbox id=m-blog20240408volo-release-0100-check>
<label for=m-blog20240408volo-release-0100-check><a href=/blog/2024/04/08/volo-release-0.10.0/ title="Volo Release 0.10.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20240408volo-release-0100><span>Release v0.10.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20240104volo-release-090-li><input type=checkbox id=m-blog20240104volo-release-090-check>
<label for=m-blog20240104volo-release-090-check><a href=/blog/2024/01/04/volo-release-0.9.0/ title="Volo Release 0.9.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20240104volo-release-090><span>Release v0.9.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20231023volo-release-080-li><input type=checkbox id=m-blog20231023volo-release-080-check>
<label for=m-blog20231023volo-release-080-check><a href=/blog/2023/10/23/volo-release-0.8.0/ title="Volo Release 0.8.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20231023volo-release-080><span>Release v0.8.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20230320volo-release-041-li><input type=checkbox id=m-blog20230320volo-release-041-check>
<label for=m-blog20230320volo-release-041-check><a href=/blog/2023/03/20/volo-release-0.4.1/ title="Volo Release 0.4.1" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20230320volo-release-041><span>Release v0.4.1</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20230207volo-release-032-li><input type=checkbox id=m-blog20230207volo-release-032-check>
<label for=m-blog20230207volo-release-032-check><a href=/blog/2023/02/07/volo-release-0.3.2/ title="Volo Release 0.3.2" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20230207volo-release-032><span>Release 0.3.2</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20221222volo-release-030-li><input type=checkbox id=m-blog20221222volo-release-030-check>
<label for=m-blog20221222volo-release-030-check><a href=/blog/2022/12/22/volo-release-0.3.0/ title="Volo Release 0.3.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20221222volo-release-030><span>Release 0.3.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20221026volo-release-v021-li><input type=checkbox id=m-blog20221026volo-release-v021-check>
<label for=m-blog20221026volo-release-v021-check><a href=/blog/2022/10/26/volo-release-v0.2.1/ title="Volo Release v0.2.1" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20221026volo-release-v021><span>Release v0.2.1</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-blog20221018volo-release-v020-li><input type=checkbox id=m-blog20221018volo-release-v020-check>
<label for=m-blog20221018volo-release-v020-check><a href=/blog/2022/10/18/volo-release-v0.2.0/ title="Volo Release v0.2.0" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-blog20221018volo-release-v020><span>Release v0.2.0</span></a></label></li></ul></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/cloudwego/cloudwego.github.io/edit/main/content/en//blog/news/enhancing_performance_in_microservice_architecture_with_kitex/enhancing_performance_in_microservice_architecture_with_kitex target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/new/main/content/en//blog/news/enhancing_performance_in_microservice_architecture_with_kitex/enhancing_performance_in_microservice_architecture_with_kitex?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/issues/new?labels=bug&amp;template=DOCS_UPDATE.md&amp;title=Enhancing%20Performance%20in%20Microservice%20Architecture%20with%20Kitex" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/cloudwego/kitex/issues/new/choose target=_blank><i class="fas fa-tasks fa-fw"></i> Create project issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#the-evolution-and-status-quo-of-kitex>The Evolution and Status Quo of Kitex</a><ul><li><a href=#understanding-the-need-for-an-rpc-framework>Understanding the Need for an RPC Framework</a></li></ul></li><li><a href=#the-cost-and-path-of-optimizing-rpc-performance>The Cost and Path of Optimizing RPC Performance</a></li><li><a href=#why-develop-our-custom-rpc-framework>Why Develop Our Custom RPC Framework?</a></li></ul><ul><li><a href=#optimizing-encoding-and-decoding>Optimizing Encoding and Decoding</a><ul><li><a href=#common-challenges-with-encoding-and-decoding>Common Challenges with Encoding and Decoding</a></li><li><a href=#code-generation-optimization-introducing-fastthrift--fastpb>Code Generation Optimization: Introducing FastThrift & FastPB</a></li><li><a href=#optimization-results>Optimization Results</a></li></ul></li><li><a href=#jit-substitution-for-code-generation-introducing-frugal-thrift>JIT Substitution for Code Generation: Introducing Frugal (Thrift)</a><ul><li><a href=#advantages-of-jit>Advantages of JIT</a></li><li><a href=#optimization-results-of-jit>Optimization Results of JIT</a></li><li><a href=#comparing-frugal-and-apache-thrift>Comparing Frugal and Apache Thrift</a></li></ul></li><li><a href=#optimizing-network-library>Optimizing Network Library</a><ul><li><a href=#native-go-net-challenges-in-rpc-scenarios>Native Go Net Challenges in RPC Scenarios</a></li><li><a href=#netpoll-optimization-practices>Netpoll Optimization Practices</a></li></ul></li><li><a href=#communication-layer-optimization>Communication Layer Optimization</a><ul><li><a href=#intra-machine-communication-optimization-issues-with-communication-efficiency-under-service-mesh>Intra-Machine Communication Optimization: Issues with Communication Efficiency under Service Mesh</a></li></ul></li></ul><ul><li><a href=#performance-comparison-between-uds-and-tcp>Performance Comparison between UDS and TCP:</a></li></ul><ul><li><a href=#performance-test>Performance Test:</a></li></ul><ul><li><a href=#challenges-with-gos-native-gc-strategy>Challenges with Go&rsquo;s Native GC Strategy</a><ul><li><a href=#gogc-principle>GOGC Principle:</a></li></ul></li><li><a href=#gctuner-automated-gc-optimization-strategy>gctuner: Automated GC Optimization Strategy</a></li></ul><ul><li><a href=#what-is-the-real-cpu-utilization---the-container-deception>What Is the Real CPU Utilization? - The Container Deception</a></li><li><a href=#is-faster-downstream-parallel-processing-always-better---concurrency-vs-timeout>Is Faster Downstream Parallel Processing Always Better? - Concurrency vs. Timeout</a></li><li><a href=#balancing-resource-utilization--reserving-computational-capacity-for-other-processes>Balancing Resource Utilization – Reserving Computational Capacity for Other Processes</a></li><li><a href=#optimizing-service-concurrency-degree>Optimizing Service Concurrency Degree</a></li></ul><ul><li><a href=#the-final-frontier-kernel>The Final Frontier: Kernel</a></li><li><a href=#reassessing-the-tcp-protocol>Reassessing the TCP Protocol</a></li><li><a href=#continuing-to-refine-existing-components>Continuing to Refine Existing Components</a></li></ul></nav></div><div class="taxonomy taxonomy-terms-cloud taxo-projects"><h5 class=taxonomy-title>Out projects</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=/projects/cloudwego/ data-taxonomy-term=cloudwego><span class=taxonomy-label>CloudWeGo</span><span class=taxonomy-count>8</span></a></li><li><a class=taxonomy-term href=/projects/hertz/ data-taxonomy-term=hertz><span class=taxonomy-label>Hertz</span><span class=taxonomy-count>13</span></a></li><li><a class=taxonomy-term href=/projects/kitex/ data-taxonomy-term=kitex><span class=taxonomy-label>Kitex</span><span class=taxonomy-count>32</span></a></li><li><a class=taxonomy-term href=/projects/monoio/ data-taxonomy-term=monoio><span class=taxonomy-label>Monoio</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/projects/netpoll/ data-taxonomy-term=netpoll><span class=taxonomy-label>Netpoll</span><span class=taxonomy-count>13</span></a></li><li><a class=taxonomy-term href=/projects/shmipc/ data-taxonomy-term=shmipc><span class=taxonomy-label>Shmipc</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=/projects/volo/ data-taxonomy-term=volo><span class=taxonomy-label>Volo</span><span class=taxonomy-count>10</span></a></li></ul></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5 pr-md-4" role=main><div class=td-content><h1>Enhancing Performance in Microservice Architecture with Kitex</h1><div class=lead>This post explores the creation and optimization of ByteDance&rsquo;s Remote Procedure Call (RPC) framework, Kitex, to address challenges within microservice architecture. Highlighting innovative performance optimization techniques, controlled Garbage Collection and concurrency adjustment, this insightful read offers hands-on strategies and future plans for evolving high-performance microservice systems.</div><div class="td-byline mb-4">By <b><a href=https://github.com/joway target=_blank>Zhuowei Wang</a>, <a href=https://github.com/felix021 target=_blank>Felix Feng</a>, <a href=https://github.com/yy2so target=_blank>Yacine Si Tayeb</a></b> |
<time datetime=2024-01-29 class=text-muted>Monday, January 29, 2024</time><div class=addthis_inline_share_toolbox style=display:inline-block></div></div><header class=article-meta><div class="taxonomy taxonomy-terms-article taxo-projects"><h5 class=taxonomy-title>Projects:</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://www.cloudwego.io/projects/cloudwego/ data-taxonomy-term=cloudwego><span class=taxonomy-label>CloudWeGo</span></a></li></ul></div></header><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/1.jpeg alt=Image></p><h1 id=kitex-enhancing-performance-in-microservice-architecture>Kitex: Enhancing Performance in Microservice Architecture</h1><h2 id=introduction>Introduction</h2><p>The team at ByteDance initiated the creation of the Remote Procedure Call (RPC) framework, Kitex, alongside several related fundamental libraries in 2019. This endeavor originated from confronting functionality and performance challenges within our extensive microservice architecture. We also wanted to combine the knowledge and insights gathered from previous frameworks. This development project was officially released for open-source contribution on GitHub in 2021.</p><p>From 2019 to 2023, our internal microservices have seen substantial growth. During this period, <a href=/docs/kitex/overview/>the Kitex framework</a> has undergone numerous cycles of optimization and testing to enhance its performance and efficiency. In this article, we share performance optimization techniques that we&rsquo;ve systematically implemented over the past few years.</p><h2 id=the-evolution-and-status-quo-of-kitex>The Evolution and Status Quo of Kitex</h2><h3 id=understanding-the-need-for-an-rpc-framework>Understanding the Need for an RPC Framework</h3><p>Although the Remote Procedure Call (RPC) framework has a long history, its wide-scale use as a crucial component aligns with the advent of microservice architecture. Therefore, it&rsquo;s vital to revisit its historical developments and comprehend why an RPC framework is necessary.</p><h4 id=background-monolithic-architecture-era>Background: Monolithic Architecture Era</h4><p>In this era, system services exhibited the following features:</p><ul><li><p>Distinct business logic was categorized via functions.</p></li><li><p>The performance pressure was on the database, prompting the evolution from manually distributed databases to an automated distributed structure.</p></li></ul><p>A typical business coding model during this period looked something like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Go data-lang=Go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>BuySomething</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>userId</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>itemId</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>user</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>GetUser</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>userId</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>sth</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>GetItem</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>itemId</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>GetUser</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>userId</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>db</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>users</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetUser</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>userId</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>GetItem</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>itemId</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>db</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>items</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetItem</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>itemId</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/2.jpeg alt=Image></p><p>This style of coding is straightforward, especially once built on top of a well-structured design pattern, can make it straightforward to refactor and write unit tests. Many IT systems still operate using this architecture.</p><p>However, as online businesses rapidly developed, we encountered the following limitations in some of the larger internet projects:</p><ol><li><p>There&rsquo;s a limit to computational power: the maximum computing power of a single request is less than or equal to the total computational power of a single server divided by the number of requests processed simultaneously.</p></li><li><p>There&rsquo;s a constraint around developmental efficiency: the growth of the code repository, team size, and code complexity do not have a linear relationship. This makes maintenance incrementally more challenging as the business grows, resulting in a more complicated online implementations.</p></li></ol><h4 id=the-shift-microservice-architecture-era>The Shift: Microservice Architecture Era</h4><p>To overcome the issues inherent in the monolithic architecture, the IT community embarked on a journey into the era of microservice architecture. Here&rsquo;s an example of typical code used in a microservice architecture:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Go data-lang=Go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>BuySomething</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>userId</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>itemId</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>user</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetUser</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>userId</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic>// RPC call</span>
</span></span><span style=display:flex><span>    <span style=color:#000>sth</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetItem</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>itemId</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic>// RPC call</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/3.jpeg alt=Image></p><p>RPCs (Remote Procedure Call) allows business systems to call remote services as though invoking local methods. This reduces the complexity of understanding business operations to its most fundamental form and minimizes changes in business coding habits during the transition from a monolithic architecture to a microservice architecture.</p><h2 id=the-cost-and-path-of-optimizing-rpc-performance>The Cost and Path of Optimizing RPC Performance</h2><p>Before the introduction of RPC, the sole overhead in the following code is merely a function call, an operation at the nanosecond level, not accounting for inline optimization.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Go data-lang=Go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>response</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>response</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>request</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic>// function call</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>request</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>response</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>response</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Message</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>request</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Message</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Upon transitioning to an RPC call, the overhead directly elevates to the millisecond level, a latency difference of 10^6, which highlights the high cost of RPC and indicates considerable room for optimization.</p><pre tabindex=0><code>func client() (response) {
    response = client.RPCCall(request) // rpc call - network
}

func server(request) (response) {
    response.Message = request.Message
}
</code></pre><p>The complete process of an RPC call is outlined below, and we will elaborate on our performance optimization practices for each step in the sections to follow.</p><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/4.jpeg alt=Image></p><h2 id=why-develop-our-custom-rpc-framework>Why Develop Our Custom RPC Framework?</h2><p>Before delving into performance practices, let&rsquo;s talk about why we opted to develop a new RPC framework. There are numerous existing frameworks available, so why did we need a new one? Some of the primary reasons include:</p><ul><li><p>Internally at our company, we primarily use the Thrift protocol for communication. Most mainstream Go frameworks do not support the Thrift protocol, and extending to support multiple protocols isn&rsquo;t a straightforward task.</p></li><li><p>Recognizing our company&rsquo;s extremely high performance requirements, we realized that deep optimization across the entire operation chain was essential. The vast scale and complexity of our microservices demanded a bespoke, highly customizable, and scalable framework that could provide such flexibility and meet our rigorous performance standards.</p></li></ul><h1 id=how-does-kitex-compare-to-other-frameworks>How Does Kitex Compare to Other Frameworks?</h1><p>Kitex supports both the Thrift and gRPC protocols. Considering the lack of Thrift-compatible frameworks in the Go ecosystem, we used the gRPC protocol for our comparative study with the grpc-go framework. Check out the results:</p><p><strong>gRPC Unary Comparison:</strong></p><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/5.jpeg alt=Image></p><p><strong>gRPC Streaming Comparison:</strong></p><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/6.jpeg alt=Image></p><h1 id=performance-optimization-practices-within-the-kitex-framework>Performance Optimization Practices within the Kitex Framework</h1><p>Many performance optimization strategies used in Kitex aren&rsquo;t exclusive to Go; however, for the sake of convenience, we&rsquo;re using Go in our examples. In the following sections, we&rsquo;ll introduce different performance optimization practices applied in Kitex, following the process of a RPC call.</p><h2 id=optimizing-encoding-and-decoding>Optimizing Encoding and Decoding</h2><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/7.jpeg alt=Image></p><h3 id=common-challenges-with-encoding-and-decoding>Common Challenges with Encoding and Decoding</h3><p>Using Protobuf as an example, we encounter the following problems associated with encoding decoding operations:</p><p><strong>Computational Overhead:</strong></p><p>a. Additional information needs to be retrieved through runtime reflection.</p><p>b. There&rsquo;s a need to invoke multiple functions and create several small objects, which adds to the processing overhead.</p><p><strong>Garbage Collection (GC) Overhead:</strong></p><p>Memory reuse is a significant challenge, which often leads to the overhead of garbage collection operations during the encoding and decoding operations.</p><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/8.jpeg alt=Image></p><h3 id=code-generation-optimization-introducing-fastthrift--fastpb>Code Generation Optimization: Introducing FastThrift & FastPB</h3><p>We&rsquo;ve introduced encoding and decoding capabilities to Kitex by generating a large volume of code for both Thrift and Protobuf protocols. Since generated code can optimize preset runtime information, we can avoid additional operations during runtime and achieve several benefits.</p><p><strong>Memory Reuse and Size Pre-calculation</strong></p><p>During serialization, we can invoke <code>Size()</code> at a minimal cost and use it to pre-allocate a fixed-size memory block.</p><p>Go code example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Go data-lang=Go><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>User</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>   <span style=color:#000>Id</span>   <span style=color:#204a87;font-weight:700>int32</span>
</span></span><span style=display:flex><span>   <span style=color:#000>Name</span> <span style=color:#204a87;font-weight:700>string</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>User</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Size</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>n</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>   <span style=color:#000>n</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#000>x</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>sizeField1</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>   <span style=color:#000>n</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#000>x</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>sizeField2</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>n</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Framework Process</span>
</span></span><span style=display:flex><span><span style=color:#000>size</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>msg</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Size</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000>data</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Malloc</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>size</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic>// allocate memory</span>
</span></span><span style=display:flex><span><span style=color:#000>Encode</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>user</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>data</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic>// encoding user object directly into the allocated memory to save one time of copy</span>
</span></span><span style=display:flex><span><span style=color:#000>Send</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>data</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic>// send data</span>
</span></span><span style=display:flex><span><span style=color:#000>Free</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>data</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic>// reuse the allocated memory at next Malloc</span>
</span></span></code></pre></div><p><strong>Minimize Function Calls and Object Creation</strong></p><p>Reducing the costs of invoking functions and creating small objects can yield significant benefits. This approach is especially beneficial in a language like Go, which heavily utilizes garbage collection (GC).</p><p>As depicted below, the underlying fastWriteField function gets inlined during compile-time. As a result, the serialization FastWrite function essentially conducts sequential writing into a fixed piece of memory. A similar approach applies to FastRead.</p><p>Go code example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Go data-lang=Go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>User</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>FastWrite</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>buf</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>offset</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>   <span style=color:#000>offset</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#000>x</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>fastWriteField1</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>buf</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>offset</span><span style=color:#000;font-weight:700>:])</span>
</span></span><span style=display:flex><span>   <span style=color:#000>offset</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#000>x</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>fastWriteField2</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>buf</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>offset</span><span style=color:#000;font-weight:700>:])</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>offset</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// inline</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>User</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>fastWriteField1</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>buf</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>offset</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>   <span style=color:#000>offset</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#000>fastpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WriteInt32</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>buf</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>offset</span><span style=color:#000;font-weight:700>:],</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>x</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Id</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>offset</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// inline</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>User</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>fastWriteField2</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>buf</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>offset</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>   <span style=color:#000>offset</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#000>fastpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WriteString</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>buf</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>offset</span><span style=color:#000;font-weight:700>:],</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>x</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Name</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>offset</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=optimization-results>Optimization Results</h3><p>As a result of these optimizations, we managed to improve the optimization output from the previous contribution of 3.58% to a notable 0.98%.</p><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/9.jpeg alt=Image></p><h2 id=jit-substitution-for-code-generation-introducing-frugal-thrift>JIT Substitution for Code Generation: Introducing Frugal (Thrift)</h2><p>After reaping gains from the hardcoded approach, we encountered the following feedback:</p><ol><li><p>The volume of the generated code increases linearly with the growth of fields.</p></li><li><p>The generated code depends on the user&rsquo;s version of their respective Kitex command-line tool, which can lead to conflicts during collaborations with multiple contributors.</p></li></ol><p>The feedback encouraged us to consider if the previously generated code could be created automatically at runtime. The answer is &lsquo;yes&rsquo; - but it would require the adoption of Just-In-Time Compilation (JIT) as a method of code optimization.</p><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/10.jpeg alt=Image></p><h3 id=advantages-of-jit>Advantages of JIT</h3><ol><li><p>Registers utilization and deeper inlining: this improves the efficiency of function calls.</p></li><li><p>Core computational functions use fully optimized assembly code, which leads to improved performance.</p></li></ol><h3 id=optimization-results-of-jit>Optimization Results of JIT</h3><p>As a result of JIT optimization, we improved the optimization result from 3.58% to an impressive 0.78%.</p><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/11.jpeg alt=Image></p><h3 id=comparing-frugal-and-apache-thrift>Comparing Frugal and Apache Thrift</h3><p>This section presents a performance comparison of Frugal and Apache Thrift in the context of encoding and decoding.</p><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/12.jpeg alt=Image></p><h2 id=optimizing-network-library>Optimizing Network Library</h2><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/13.jpeg alt=Image></p><h3 id=native-go-net-challenges-in-rpc-scenarios>Native Go Net Challenges in RPC Scenarios</h3><p>Native Go Net in RPC situations presents the following challenges:</p><ol><li><p>Each connection corresponds to one coroutine - when there are numerous upstream and downstream instances, the sheer number of Goroutines can significantly influence performance. This is particularly detrimental for businesses with intensive instances.</p></li><li><p>It is unable to automatically detect the connection&rsquo;s shutdown state.</p></li><li><p>When a struct undergoes NoCopy serialization, the output typically takes the form of a two-dimensional byte array. However, Go&rsquo;s <code>Write([]byte)</code> interface falls short as it does not support handling non-continuous memory data.</p></li><li><p>Despite being highly compatible, it&rsquo;s provided by Go Runtime and not conducive or suitable for adding new features.</p></li></ol><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/14.jpeg alt=Image></p><h4 id=go-coding-example>Go Coding Example</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Go data-lang=Go><span style=display:flex><span><span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#4e9a06>&#34;Steve Jobs&#34;</span> <span style=color:#8f5902;font-style:italic>// 0xc000000020</span>
</span></span><span style=display:flex><span><span style=color:#000>req</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>Request</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>Id</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>int32</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Name</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>name</span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Encode to [][]byte</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>4</span> <span style=color:#000>bytes</span><span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>10</span> <span style=color:#000>bytes</span><span style=color:#000;font-weight:700>],</span> <span style=color:#8f5902;font-style:italic>// no-copy encoding, 0xc000000020</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Copy to []byte</span>
</span></span><span style=display:flex><span><span style=color:#000>buf</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>4</span> <span style=color:#000>bytes</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#0000cf;font-weight:700>10</span> <span style=color:#000>bytes</span><span style=color:#000;font-weight:700>]</span> <span style=color:#8f5902;font-style:italic>// new address</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Write([]byte)</span>
</span></span><span style=display:flex><span><span style=color:#000>net</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Conn</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Write</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>buf</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h3 id=netpoll-optimization-practices>Netpoll Optimization Practices</h3><p>Here are the main areas we focused on for optimization:</p><ol><li><p><strong>Coroutine Optimization</strong>: As much as possible, coroutines are reused and the number of connections aren&rsquo;t tied to the number of coroutines.</p></li><li><p><strong>Buffer Layer</strong>: Netpoll supports zero-copy read and write, and it reuses memory to minimize GC overhead during encoding and decoding.</p></li><li><p><strong>Customization for RPC Small Packets High Concurrency Scenarios</strong>: Includes coroutine scheduling optimization, TCP parameter tuning, and more.</p></li><li><p><strong>Deep Customization for Internal Environments</strong>: Includes modifying the Go Runtime to improve scheduling priority and kernel support for batch system calls, among other things.</p></li></ol><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/15.jpeg alt=Image></p><h2 id=communication-layer-optimization>Communication Layer Optimization</h2><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/16.jpeg alt=Image></p><h3 id=intra-machine-communication-optimization-issues-with-communication-efficiency-under-service-mesh>Intra-Machine Communication Optimization: Issues with Communication Efficiency under Service Mesh</h3><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/17.jpeg alt=Image></p><p>After introducing Service Mesh, the business process primarily communicates with another sidecar process on the same machine, which brings in an additional layer of delay.</p><p>Traditional Service Mesh solutions commonly hijack iptables to facilitate traffic forwarding to the sidecar process. This could lead to substantial performance loss at all levels. Kitex has carried out several performance optimization attempts at the communication layer and has finally developed a systematic solution.</p><h1 id=optimization-of-intra-machine-communication-uds-replaces-tcp>Optimization of Intra-machine Communication: UDS Replaces TCP</h1><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/18.jpeg alt=Image></p><h2 id=performance-comparison-between-uds-and-tcp>Performance Comparison between UDS and TCP:</h2><pre tabindex=0><code>======== IPC Benchmark - TCP ========
      Type    Conns     Size        Avg        P50        P99
    Client       10     4096      127μs       76μs      232μs
  Client-R       10     4096        2μs        1μs        1μs
  Client-W       10     4096        9μs        4μs        7μs
    Server       10     4096       24μs       13μs       18μs
  Server-R       10     4096        1μs        1μs        1μs
  Server-W       10     4096        7μs        4μs        7μs
======== IPC Benchmark - UDS ========
      Type    Conns     Size        Avg        P50        P99
    Client       10     4096      118μs       75μs      205μs
  Client-R       10     4096        3μs        2μs        3μs
  Client-W       10     4096        4μs        1μs        2μs
    Server       10     4096       24μs       11μs       16μs
  Server-R       10     4096        4μs        2μs        3μs
  Server-W       10     4096        3μs        1μs        2μs
</code></pre><p>Our performance test indicates the following:</p><ol><li><p>UDS outperforms TCP in all measurements.</p></li><li><p>Nonetheless, the extent of improvement is not significant.</p></li></ol><h1 id=optimization-of-intra-machine-communication-shmipc-replaces-uds>Optimization of Intra-Machine Communication: ShmIPC Replaces UDS</h1><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/19.jpeg alt=Image></p><p>In pursuit of enhancing the efficiency of inter-process communication, we developed a communication mode based on shared memory. Shared memory communication throws in the complexity of managing the synchronization of various communication states across different processes.</p><p>To tackle this, we utilized our communication protocol and retained <strong>UDS</strong> as the event notification channel (IO Queue) and shared memory as the data transmission channel (Buffer).</p><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/20.jpeg alt=Image></p><p>For a detailed technical understanding of shmipc, you can refer to our previously published article: <a href=/blog/2023/04/04/introducing-shmipc-a-high-performance-inter-process-communication-library/>Introducing Shmipc: A High Performance Inter-process Communication Library</a>.</p><h2 id=performance-test>Performance Test:</h2><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/21.jpeg alt=Image></p><h1 id=from-cross-machine-to-intra-machine-communication-a-pod-affinity-solution>From Cross-Machine to Intra-Machine Communication: A Pod Affinity Solution</h1><p>Having previously optimized intra-machine communication, we found that it&rsquo;s limited to the data plane communication between the service process and the Service Mesh.</p><p>The peer service is possibly not hosted on the same machine. So, the question arises, how can we optimize cross-machine communication? One innovative approach we&rsquo;re considering is converting cross-machine issues into intra-machine issues.</p><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/22.jpeg alt=Image></p><p>Achieving this in large-scale microservice communication calls for the cooperation of multiple architectural components. As such, we introduced the pod affinity solution to resolve this challenge:</p><ol><li><p>Container Scheduling Layer Alteration: The container scheduling system will consider the relationship and instance situations of upstream and downstream services. It uses affinity scheduling to, as much as possible, assign the instances of upstream and downstream services to the same physical machine.</p></li><li><p>Traffic Scheduling Layer Alteration: The service control plane needs to identify which downstreams are connected to a certain upstream container. Bearing in mind the context of global load balancing, it calculates the dynamic weight of accessing downstream instances for each downstream instance, aiming to enable more traffic to facilitate intra-machine communication.</p></li><li><p>Framework Transformation: Extend custom support for the unique communication method of pod affinity. Based on the calculation results of the traffic scheduling layer, the request is dispatched to either the same machine instance or Mesh Proxy.</p></li></ol><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/23.jpeg alt=Image></p><h1 id=microservice-online-tuning-practices>Microservice Online Tuning Practices</h1><p>Apart from performance optimization at the framework level, the business logic itself is a significant contributor to the performance bottleneck. To combat this, we have accumulated several practical experiences and strategies.</p><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/24.jpeg alt=Image></p><h1 id=solving-latency-through-automated-gc-optimization>Solving Latency Through Automated GC Optimization</h1><h2 id=challenges-with-gos-native-gc-strategy>Challenges with Go&rsquo;s Native GC Strategy</h2><p>Go&rsquo;s Garbage Collection (GC) strategy was not specifically designed for microservice scenarios, and thus does not prioritize optimizing latency-sensitive businesses. However, RPC services often require low P99 latency.</p><p>The essential principles of Go&rsquo;s GC strategy are as follows:</p><h3 id=gogc-principle>GOGC Principle:</h3><p>The GOGC parameter sets a percentile value, defaulting to 100, to calculate the heap size required for the next GC trigger: <code>NextGC = HeapSize + HeapSize * (GOGC / 100)</code>. This implies that under default settings, the heap size doubles after the last GC.</p><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/25.jpeg alt=Image></p><p>As an example, if a service&rsquo;s active memory usage is 100MB, the GC is triggered every time the heap grows to 200MB, which may be unnecessary if this service has 4GB of memory.</p><p><strong>Drawbacks:</strong></p><ol><li><p>In microservice environments, the service&rsquo;s memory utilization rate is generally quite low, yet aggressive GC persists.</p></li><li><p>For RPC scenarios, a sizable number of objects are inherently highly reusable. Performing frequent GC on these reusable objects degrades the reusability rate.</p></li></ol><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/26.jpeg alt=Image></p><p><strong>Primary Requirement:</strong></p><p>Decrease the frequency of GC and enhance the reuse rate of resources in microservices, while maintaining safe levels of memory consumption.</p><h2 id=gctuner-automated-gc-optimization-strategy>gctuner: Automated GC Optimization Strategy</h2><p>Users can manipulate the desired aggressiveness of GC by setting a threshold, which could for example be set to <code>memory_limit * 0.7</code>. If the memory used is below this value, GCPercent is maximized as much as possible.</p><ul><li>If memory utilization doesn&rsquo;t reach the set threshold, the GOGC parameter is set to a larger value, whereas if it exceeds the limit, it is set to a smaller value.</li><li>Regardless of the situation, GOGC is capped at a minimum of 50 and a maximum of 500.</li></ul><p><strong>Advantages:</strong></p><ul><li>GC is delayed when memory utilization is low.</li><li>It reverts to the native GC strategy when memory utilization is high.</li></ul><p><strong>Cautions:</strong></p><ul><li>If other processes share the memory resources, ensuring a reserve of memory resources for these different processes is crucial.</li><li>Services in which memory is likely to have excessively extreme peak values might not find this strategy beneficial.</li></ul><p>gctuner is currently open-sourced <a href=https://github.com/bytedance/gopkg/tree/develop/util/gctuner>on GitHub</a>.</p><h1 id=concurrent-optimization>Concurrent Optimization</h1><h2 id=what-is-the-real-cpu-utilization---the-container-deception>What Is the Real CPU Utilization? - The Container Deception</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>apiVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>v1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Pod</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>spec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>containers</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>resources</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>limits</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>cpu</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;4&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>The rapid advancement of container technology has largely affected the development of microservices. Currently, the majority of microservices, including numerous databases across the industry, operate within container environments. For the purpose of this discussion, we&rsquo;ll only touch upon mainstream containers based on cgroup technology.</p><p>A standard business development model involves developers acquiring a 4-core CPU container on the container platform. Developers usually assume that their program can utilize up to 4 CPUs simultaneously, and adjust their program configuration based on this understanding.</p><p>Upon deployment, if you check upon the container and verify with the &rsquo;top&rsquo; command, all indicators seemingly adhere to the 4-core standard:</p><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/27.jpeg alt=Image></p><p>Even when using <code>cat /proc/cpuinfo</code> for inspection, you&rsquo;ll witness exactly 4 CPUs.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>processor</span>        <span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// ...</span>
</span></span><span style=display:flex><span><span style=color:#000>processor</span>        <span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// ...</span>
</span></span><span style=display:flex><span><span style=color:#000>processor</span>        <span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>2</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// ...</span>
</span></span><span style=display:flex><span><span style=color:#000>processor</span>        <span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>3</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// ...</span>
</span></span></code></pre></div><p>However, these are merely illusions concocted by the container to ease your mental load off programming. The underlying reason for creating such an illusion is to ensure traditional Linux Debug tools function seamlessly within the container environment.</p><p>Contrarily, container technology based on cgroups imposes limits only on <strong>CPU time</strong>, not on the number of CPUs. Suppose you log into the machine to verify the CPU number each thread of the process is using. In that case, you might be taken aback to discover that the sum exceeds the CPU limit set for the container:</p><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/28.jpeg alt=Image></p><p>When a container requests 4 CPU units, it means it can run for an equivalent of 4 CPU time within a computation cycle (typically 100ms). It doesn&rsquo;t imply that it can only use 4 physical CPUs, nor that at least 4 CPUs can be simultaneously utilized by the program. If the usage time surpasses the CPU limit set for the container, all processes within the container are paused until the end of the computation period. This could lead to the program experiencing lagging issues (throttled).</p><h2 id=is-faster-downstream-parallel-processing-always-better---concurrency-vs-timeout>Is Faster Downstream Parallel Processing Always Better? - Concurrency vs. Timeout</h2><p>Knowing the upper bound for physical parallel computing in a program is considerably high, we can leverage this insight to increase or decrease the number of working threads (GOMAXPROCS) or adjust the degree of concurrency within the program.</p><p>Let&rsquo;s consider a calling scenario where the business sends requests to the same upstream with four concurrent processes. Each request upstream requires 50ms of processing time. Based on this, the downstream sets the timeout time to <strong>100ms</strong>.</p><p>Though this seems reasonable, if, at that time, the upstream had only two CPUs available to handle requests (which also have to manage other work or perform Garbage Collection activities), the third RPC request would likely time out.</p><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/29.jpeg alt=Image></p><p>However, simply reducing concurrency isn&rsquo;t always the solution and it doesn&rsquo;t benefit all cases.</p><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/30.jpeg alt=Image></p><p>If upstream&rsquo;s computational resources are abundantly available, increasing concurrency could efficiently utilize the processing power upstream.</p><h2 id=balancing-resource-utilization--reserving-computational-capacity-for-other-processes>Balancing Resource Utilization – Reserving Computational Capacity for Other Processes</h2><p>If there are multiple processes within the container, it&rsquo;s essential to reserve resources for these operations. This consideration is particularly crucial in scenarios like the deployment of a Service Mesh data plane, where the same container operates as a sidecar.</p><p>If a downstream process utilizes the entirety of the time slice allocated within a computation cycle, it&rsquo;s highly probable that it&rsquo;ll face resource throttling when it&rsquo;s the upstream process&rsquo;s turn, which could subsequently affect the service’s latency.</p><h2 id=optimizing-service-concurrency-degree>Optimizing Service Concurrency Degree</h2><ul><li><p><strong>Adjust the Number of Work Threads</strong>: For instance, the <code>GOMAXPROCS</code> directive in Go allows us to modify the number of working threads.</p></li><li><p><strong>Alter the Concurrency of Requests in the Code</strong>: It&rsquo;s essential for businesses to iteratively test and evaluate the trade-off between the latency gains from increasing concurrency and the stability loss at peak levels to determine an optimal concurrency value.</p></li><li><p><strong>Use Batch Interfaces</strong>: If the business scenario allows, replacing the current interface with a batch interface could be a more effective strategy.</p></li></ul><h1 id=looking-into-the-future-of-optimization>Looking into the Future of Optimization</h1><h2 id=the-final-frontier-kernel>The Final Frontier: Kernel</h2><p>Currently the only area we haven&rsquo;t explored for optimization is the Kernel.</p><p><img src=/img/blog/Enhancing_Performance_in_Microservice_Architecture_with_Kitex/31.jpeg alt=Image></p><p>In online business environments, we often observe that the communication overhead of RPC accounts for more than 20% of the total overhead for services heavy on I/O operations, even after optimizing RPC to the level of intra-machine communication.</p><p>At this point, we&rsquo;ve optimized inter-process communication to its extremes. If we are to seek further improvements, we need to break through the existing constraints in Linux inter-process communication fundamentally.</p><p>We&rsquo;ve already made some preliminary strides in this area. We will continue to share updates on this topic in future articles, so stay tuned.</p><h2 id=reassessing-the-tcp-protocol>Reassessing the TCP Protocol</h2><p>In the context of internal data center communication, the TCP protocol displays some limitations:</p><ul><li><p>Given the superior internal network quality and an incredibly low packet loss rate, many designs within TCP appear redundant.</p></li><li><p>In situations of large-scale point-to-point communication, TCP long connections may inadvertently degrade into short connections.</p></li><li><p>While the application layer uses &ldquo;messages&rdquo; as a unit, TCP data streams don&rsquo;t offer clear message boundaries, which could complicate synchronization and message handling.</p></li></ul><p>This has led us to question whether we need to develop a proprietary data center protocol, better suited to handle RPC communication.</p><h2 id=continuing-to-refine-existing-components>Continuing to Refine Existing Components</h2><p>When it comes to existing components, we plan to continue our efforts to enhance their performance and applicability:</p><p><strong>Frugal, the Thrift JIT Encoder/Decoder:</strong></p><ul><li><p>Introducing support for the ARM architecture.</p></li><li><p>Optimizing the backend with Static Single Assignment (SSA).</p></li><li><p>Accelerating performance with Single Instruction, Multiple Data (SIMD) operations.</p></li></ul><p><strong>Netpoll Network Library:</strong></p><ul><li><p>Refactoring interfaces to ensure seamless integration with existing libraries in the Go ecosystem.</p></li><li><p>Implementing support for Shared Memory Communications over RDMA (SMC-R).</p></li></ul><p><strong>Pod Affinity:</strong></p><ul><li>Expanding from same-machine to same-rack granularity, effectively reducing network latency and improving performance.</li></ul><p>In this post, we explored optimizing microservices performance using Kitex, the RPC framework developed by ByteDance. We discussed various techniques, from encoding and decoding enhancements, JIT compilation, network library optimization, and communication layer upgrades, to automated GC optimization, concurrent processing strategies, and microservices online tuning practices.</p><p>Kitex has demonstrated its ability to outperform other frameworks in testing comparisons, showcasing its strength in handling complex microservice architectures.</p><p>We also briefly looked towards future optimizations, including kernel-level improvements, restructuring the TCP protocols, and further refinement of existing components. With continuous learning and improvements, we are driven to unlock the vast potential in microservice performance optimization, taking us one step closer to the realm of real-time computing.</p><p>For any questions or discussions, you&rsquo;re welcome to join our community on <a href=https://github.com/cloudwego>GitHub</a> or <a href=https://discord.gg/jceZSE7DsW>Discord</a>.</p><ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5"><li><a href=/blog/2024/01/18/harnessing-the-power-of-rust-for-cloud-development-with-volo/ aria-label="Previous - Harnessing the Power of Rust for Cloud Development with Volo" class="btn btn-primary"><span class=mr-1>←</span> Previous</a></li><a href=/blog/2024/02/21/delving-deeper-enriching-microservices-with-golang-with-cloudwego/ aria-label="Next - Delving Deeper: Enriching Microservices with Golang with CloudWeGo" class="btn btn-primary">Next <span class=ml-1>→</span></a></li></ul><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-636ce3c5c9ef4828"></script></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Lark aria-label=Lark><a class=text-white target=_blank rel=noopener href="https://applink.feishu.cn/client/chat/chatter/add_by_link?link_token=693v2544-2664-4421-b50f-7f1912p745r6" aria-label=Lark><img src=/webfonts/lark.svg alt style=width:26px;line-height:32.5px;margin-bottom:6px;fill:#fff></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/CloudWeGo aria-label=Twitter><img src=/webfonts/x-twitter.svg alt style=width:26px;line-height:32.5px;margin-bottom:6px;fill:#fff></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/cloudwego aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Discord aria-label=Discord><a class=text-white target=_blank rel=noopener href=https://discord.gg/jceZSE7DsW aria-label=Discord><i class="fab fa-discord"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2025 The CloudWeGo Authors</small><p class="mt-2 text-white"><a class=cloudwego-link href=/about/ target=_blank rel=noopener>About</a>
|
<a class=cloudwego-link href=https://github.com/cloudwego/cloudwego.github.io/blob/main/LICENSE target=_blank rel=noopener>License</a></p></div></div></div></footer></div><script src=/js/popper.min.js></script><script src=/js/bootstrap.min.js></script><script src=/js/main.min.9a8648b987db06195f5768f0d7516e8df7c27669e91e383e25c5d07cd6325605.js integrity="sha256-moZIuYfbBhlfV2jw11FujffCdmnpHjg+JcXQfNYyVgU=" crossorigin=anonymous></script><script src=/js/prism.js></script><script src=/js/prism-custom.js></script><script src=/js/tabpane-persist.js></script><script src=/js/docsearch.js></script><script type=text/javascript>let siteLang=window.location.pathname.startsWith("/zh/")?"zh":"en";docsearch({appId:"V7I042F992",apiKey:"8380a7ac88106841cb43fb000fa2edb4",indexName:"cloudwego",container:"#docsearch",searchParameters:{hitsPerPage:5,facetFilters:[`lang:${siteLang}`]},transformItems(e){return e.map(e=>({...e,url:e.url.replace("www.cloudwego.io",location.host).replace("https:",location.protocol)}))}})</script><script src=/js/outbound-link.js></script><script src=/js/navScroll.js></script></body></html>