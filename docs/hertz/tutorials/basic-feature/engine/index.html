<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.142.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Engine | CloudWeGo</title>
<meta name=description content="A leading practice for building enterprise cloud native middleware!"><meta property="og:url" content="https://www.cloudwego.io/docs/hertz/tutorials/basic-feature/engine/"><meta property="og:site_name" content="CloudWeGo"><meta property="og:title" content="Engine"><meta property="og:description" content="Server.Hertz is the core type of Hertz, consisting of route.Engine and signalWaiter. The important methods for starting, registering routes, registering middleware, and exiting the Hertz server are all included in server.Hertz. The following is the definition of server.Hertz:
type Hertz struct { *route.Engine // used to receive signal for elegant exit signalWaiter func (err chan error) error } Route.Engine is an important component of server.Hertz, and the definition of Engine is located in Engine.
Config Option Default Description WithTransport network.NewTransporter Replace the transport WithHostPorts :8888 Specify the listening address and port WithKeepAliveTimeout 1min Set the keep-alive time of tcp persistent connection, generally no need to modify it, you should more pay attention to idleTimeout rather than modifying it WithReadTimeout 3min The timeout of data reading WithIdleTimeout 3min The free timeout of the request link for persistent connection WithMaxRequestBodySize 4 _ 1024 _ 1024 Max body size of a request WithRedirectTrailingSlash true Whether to redirect with the / which is at the end of the router automatically. For example： If there is only /foo/ in the router, /foo will be redirected to /foo/. And if there is only /foo in the router, /foo/ will be redirected to /foo WithRemoveExtraSlash false RemoveExtraSlash makes the parameter still valid when it contains an extra /. For example, if WithRemoveExtraSlash is true user//xiaoming can match the user/:name router WithUnescapePathValues true If true, the request path will be escaped automatically (eg. ‘%2F’ -> ‘/’). If UseRawPath is false (the default), UnescapePathValues is true, because URI().Path() will be used and it is already escaped. To set WithUnescapePathValues to false, you need to set WithUseRawPath to true WithUseRawPath false If true, the original path will be used to match the route WithHandleMethodNotAllowed false If true when the current path cannot match any method, the server will check whether other methods are registered with the route of the current path, and if exist other methods, it will respond “Method Not Allowed” and return the status code 405; if not, it will use the handler of NotFound to handle it WithDisablePreParseMultipartForm false If true, the multipart form will not be preprocessed. The body can be obtained via c.Request.Body() and then can be processed by user WithStreamBody false If true, the body will be handled by stream processing WithNetwork “tcp” Set the network protocol, optional: tcp，udp，unix(unix domain socket) WithExitWaitTime 5s Set the graceful exit time. the Server will stop connection establishment for new requests and set the Connection: Close header for each request after closing. When the set time is reached, Server will to be closed. the Server can be closed early when all connections have been closed WithTLS nil Configuring server tls capabilities, For detailed information, please refer to TLS WithListenConfig nil Set the listener configuration. Can be used to set whether to allow reuse ports, etc. WithALPN false Whether to enable ALPN WithTracer []interface{}{} Inject tracer implementation, if not inject Tracer, default: close. WithTraceLevel LevelDetailed Set trace level WithWriteTimeout infinite The timeout of data writing WithRedirectFixedPath false If enabled, if the current request path does not match, the server will try to repair the request path and re-match, if the match is successful and the request is a GET request, it will return status code 301 for redirect, other requests will return 308 for redirect WithBasePath / Set the base path, which must be prefixed and suffixed with / WithMaxKeepBodySize 4 _ 1024 _ 1024 Sets the maximum size of the request body and response body to be retained during reclaim. Unit: Byte WithGetOnly false If enabled, only GET requests are accepted WithKeepAlive true If enabled, use HTTP keepalive WithAltTransport network.NewTransporter Set up the alternate transport WithH2C false Sets whether H2C is enabled WithReadBufferSize 4 * 1024 Set the read buffer size while limiting the HTTP header size WithRegistry registry.NoopRegistry, nil Setup registry configuration, service registration information WithAutoReloadRender false, 0 Set up the automatic reload rendering configuration WithDisablePrintRoute false Sets whether debugPrintRoute is disabled WithOnAccept nil Set the callback function when a new connection is accepted but cannot receive data in netpoll. In go net, it will be called before converting tls connection WithOnConnect nil Set the onConnect function. It can received data from connection in netpoll. In go net, it will be called after converting tls connection WithDisableHeaderNamesNormalizing false Sets whether or not to disable Request and Response Header name normalization (capitalization of the first letter and the first letter after a dash) Server Connection limitation:"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2023-08-18T00:00:00+00:00"><meta property="article:modified_time" content="2025-03-07T17:25:05+08:00"><meta itemprop=name content="Engine"><meta itemprop=description content="Server.Hertz is the core type of Hertz, consisting of route.Engine and signalWaiter. The important methods for starting, registering routes, registering middleware, and exiting the Hertz server are all included in server.Hertz. The following is the definition of server.Hertz:
type Hertz struct { *route.Engine // used to receive signal for elegant exit signalWaiter func (err chan error) error } Route.Engine is an important component of server.Hertz, and the definition of Engine is located in Engine.
Config Option Default Description WithTransport network.NewTransporter Replace the transport WithHostPorts :8888 Specify the listening address and port WithKeepAliveTimeout 1min Set the keep-alive time of tcp persistent connection, generally no need to modify it, you should more pay attention to idleTimeout rather than modifying it WithReadTimeout 3min The timeout of data reading WithIdleTimeout 3min The free timeout of the request link for persistent connection WithMaxRequestBodySize 4 _ 1024 _ 1024 Max body size of a request WithRedirectTrailingSlash true Whether to redirect with the / which is at the end of the router automatically. For example： If there is only /foo/ in the router, /foo will be redirected to /foo/. And if there is only /foo in the router, /foo/ will be redirected to /foo WithRemoveExtraSlash false RemoveExtraSlash makes the parameter still valid when it contains an extra /. For example, if WithRemoveExtraSlash is true user//xiaoming can match the user/:name router WithUnescapePathValues true If true, the request path will be escaped automatically (eg. ‘%2F’ -> ‘/’). If UseRawPath is false (the default), UnescapePathValues is true, because URI().Path() will be used and it is already escaped. To set WithUnescapePathValues to false, you need to set WithUseRawPath to true WithUseRawPath false If true, the original path will be used to match the route WithHandleMethodNotAllowed false If true when the current path cannot match any method, the server will check whether other methods are registered with the route of the current path, and if exist other methods, it will respond “Method Not Allowed” and return the status code 405; if not, it will use the handler of NotFound to handle it WithDisablePreParseMultipartForm false If true, the multipart form will not be preprocessed. The body can be obtained via c.Request.Body() and then can be processed by user WithStreamBody false If true, the body will be handled by stream processing WithNetwork “tcp” Set the network protocol, optional: tcp，udp，unix(unix domain socket) WithExitWaitTime 5s Set the graceful exit time. the Server will stop connection establishment for new requests and set the Connection: Close header for each request after closing. When the set time is reached, Server will to be closed. the Server can be closed early when all connections have been closed WithTLS nil Configuring server tls capabilities, For detailed information, please refer to TLS WithListenConfig nil Set the listener configuration. Can be used to set whether to allow reuse ports, etc. WithALPN false Whether to enable ALPN WithTracer []interface{}{} Inject tracer implementation, if not inject Tracer, default: close. WithTraceLevel LevelDetailed Set trace level WithWriteTimeout infinite The timeout of data writing WithRedirectFixedPath false If enabled, if the current request path does not match, the server will try to repair the request path and re-match, if the match is successful and the request is a GET request, it will return status code 301 for redirect, other requests will return 308 for redirect WithBasePath / Set the base path, which must be prefixed and suffixed with / WithMaxKeepBodySize 4 _ 1024 _ 1024 Sets the maximum size of the request body and response body to be retained during reclaim. Unit: Byte WithGetOnly false If enabled, only GET requests are accepted WithKeepAlive true If enabled, use HTTP keepalive WithAltTransport network.NewTransporter Set up the alternate transport WithH2C false Sets whether H2C is enabled WithReadBufferSize 4 * 1024 Set the read buffer size while limiting the HTTP header size WithRegistry registry.NoopRegistry, nil Setup registry configuration, service registration information WithAutoReloadRender false, 0 Set up the automatic reload rendering configuration WithDisablePrintRoute false Sets whether debugPrintRoute is disabled WithOnAccept nil Set the callback function when a new connection is accepted but cannot receive data in netpoll. In go net, it will be called before converting tls connection WithOnConnect nil Set the onConnect function. It can received data from connection in netpoll. In go net, it will be called after converting tls connection WithDisableHeaderNamesNormalizing false Sets whether or not to disable Request and Response Header name normalization (capitalization of the first letter and the first letter after a dash) Server Connection limitation:"><meta itemprop=datePublished content="2023-08-18T00:00:00+00:00"><meta itemprop=dateModified content="2025-03-07T17:25:05+08:00"><meta itemprop=wordCount content="2618"><meta name=twitter:card content="summary"><meta name=twitter:title content="Engine"><meta name=twitter:description content="Server.Hertz is the core type of Hertz, consisting of route.Engine and signalWaiter. The important methods for starting, registering routes, registering middleware, and exiting the Hertz server are all included in server.Hertz. The following is the definition of server.Hertz:
type Hertz struct { *route.Engine // used to receive signal for elegant exit signalWaiter func (err chan error) error } Route.Engine is an important component of server.Hertz, and the definition of Engine is located in Engine.
Config Option Default Description WithTransport network.NewTransporter Replace the transport WithHostPorts :8888 Specify the listening address and port WithKeepAliveTimeout 1min Set the keep-alive time of tcp persistent connection, generally no need to modify it, you should more pay attention to idleTimeout rather than modifying it WithReadTimeout 3min The timeout of data reading WithIdleTimeout 3min The free timeout of the request link for persistent connection WithMaxRequestBodySize 4 _ 1024 _ 1024 Max body size of a request WithRedirectTrailingSlash true Whether to redirect with the / which is at the end of the router automatically. For example： If there is only /foo/ in the router, /foo will be redirected to /foo/. And if there is only /foo in the router, /foo/ will be redirected to /foo WithRemoveExtraSlash false RemoveExtraSlash makes the parameter still valid when it contains an extra /. For example, if WithRemoveExtraSlash is true user//xiaoming can match the user/:name router WithUnescapePathValues true If true, the request path will be escaped automatically (eg. ‘%2F’ -> ‘/’). If UseRawPath is false (the default), UnescapePathValues is true, because URI().Path() will be used and it is already escaped. To set WithUnescapePathValues to false, you need to set WithUseRawPath to true WithUseRawPath false If true, the original path will be used to match the route WithHandleMethodNotAllowed false If true when the current path cannot match any method, the server will check whether other methods are registered with the route of the current path, and if exist other methods, it will respond “Method Not Allowed” and return the status code 405; if not, it will use the handler of NotFound to handle it WithDisablePreParseMultipartForm false If true, the multipart form will not be preprocessed. The body can be obtained via c.Request.Body() and then can be processed by user WithStreamBody false If true, the body will be handled by stream processing WithNetwork “tcp” Set the network protocol, optional: tcp，udp，unix(unix domain socket) WithExitWaitTime 5s Set the graceful exit time. the Server will stop connection establishment for new requests and set the Connection: Close header for each request after closing. When the set time is reached, Server will to be closed. the Server can be closed early when all connections have been closed WithTLS nil Configuring server tls capabilities, For detailed information, please refer to TLS WithListenConfig nil Set the listener configuration. Can be used to set whether to allow reuse ports, etc. WithALPN false Whether to enable ALPN WithTracer []interface{}{} Inject tracer implementation, if not inject Tracer, default: close. WithTraceLevel LevelDetailed Set trace level WithWriteTimeout infinite The timeout of data writing WithRedirectFixedPath false If enabled, if the current request path does not match, the server will try to repair the request path and re-match, if the match is successful and the request is a GET request, it will return status code 301 for redirect, other requests will return 308 for redirect WithBasePath / Set the base path, which must be prefixed and suffixed with / WithMaxKeepBodySize 4 _ 1024 _ 1024 Sets the maximum size of the request body and response body to be retained during reclaim. Unit: Byte WithGetOnly false If enabled, only GET requests are accepted WithKeepAlive true If enabled, use HTTP keepalive WithAltTransport network.NewTransporter Set up the alternate transport WithH2C false Sets whether H2C is enabled WithReadBufferSize 4 * 1024 Set the read buffer size while limiting the HTTP header size WithRegistry registry.NoopRegistry, nil Setup registry configuration, service registration information WithAutoReloadRender false, 0 Set up the automatic reload rendering configuration WithDisablePrintRoute false Sets whether debugPrintRoute is disabled WithOnAccept nil Set the callback function when a new connection is accepted but cannot receive data in netpoll. In go net, it will be called before converting tls connection WithOnConnect nil Set the onConnect function. It can received data from connection in netpoll. In go net, it will be called after converting tls connection WithDisableHeaderNamesNormalizing false Sets whether or not to disable Request and Response Header name normalization (capitalization of the first letter and the first letter after a dash) Server Connection limitation:"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYWRQRLPRM"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QYWRQRLPRM")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?f1808c42af827f368aa7eca3baae6d55",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=preload href=/scss/main.min.b3c21c777309e05201dd625b8a4ece4076249bfa52b71d58c6e352d84c6c0320.css as=style><link href=/scss/main.min.b3c21c777309e05201dd625b8a4ece4076249bfa52b71d58c6e352d84c6c0320.css rel=stylesheet integrity><script src=/js/jquery.min.js></script><link rel=stylesheet href=/css/prism.css><link rel=stylesheet href=/css/docsearch.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYWRQRLPRM"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QYWRQRLPRM")}</script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand-xl navbar-dark td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><img src=/img/logo.png></span>
</a><button class=navbar-toggler type=button data-toggle=collapse data-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0 ml-auto"><li class="dropdown sub-menu active"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Documentation</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/kitex/>Kitex</a>
<a class=dropdown-item href=/docs/hertz/>Hertz</a>
<a class=dropdown-item href=/docs/volo/>Volo</a>
<a class=dropdown-item href=/docs/netpoll/>Netpoll</a>
<a class=dropdown-item href=/docs/cwgo/>Cwgo</a>
<a class=dropdown-item href=/docs/eino/>Eino</a>
<a class=dropdown-item href=/docs/monolake/>Monolake</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/cooperation/><span>Cooperation</span></a></li><li class="dropdown sub-menu"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Security</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/security/safety-bulletin/>safety-bulletin</a>
<a class=dropdown-item href=/security/vulnerability-reporting/>vulnerability-reporting</a></div></li><li class="nav-item dropdown mr-4"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/hertz/tutorials/basic-feature/engine/>中文</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><div id=docsearch></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><div id=docsearch></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/hertz/tutorials/basic-feature/engine/>中文</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docshertz-li><input type=checkbox id=m-docshertz-check checked>
<label for=m-docshertz-check><a href=/docs/hertz/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertz><span>Hertz</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertzoverview-li><input type=checkbox id=m-docshertzoverview-check checked>
<label for=m-docshertzoverview-check><a href=/docs/hertz/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertzoverview><span>Overview</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertzgetting-started-li><input type=checkbox id=m-docshertzgetting-started-check checked>
<label for=m-docshertzgetting-started-check><a href=/docs/hertz/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertzgetting-started><span>Getting Started</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docshertztutorials-li><input type=checkbox id=m-docshertztutorials-check checked>
<label for=m-docshertztutorials-check><a href=/docs/hertz/tutorials/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertztutorials><span>Tutorials</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsexample-li><input type=checkbox id=m-docshertztutorialsexample-check>
<label for=m-docshertztutorialsexample-check><a href=/docs/hertz/tutorials/example/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertztutorialsexample><span>Example code</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docshertztutorialsbasic-feature-li><input type=checkbox id=m-docshertztutorialsbasic-feature-check checked>
<label for=m-docshertztutorialsbasic-feature-check><a href=/docs/hertz/tutorials/basic-feature/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertztutorialsbasic-feature><span>Basic Feature</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docshertztutorialsbasic-featureengine-li><input type=checkbox id=m-docshertztutorialsbasic-featureengine-check checked>
<label for=m-docshertztutorialsbasic-featureengine-check><a href=/docs/hertz/tutorials/basic-feature/engine/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featureengine><span class=td-sidebar-nav-active-item>Engine</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featureroute-li><input type=checkbox id=m-docshertztutorialsbasic-featureroute-check>
<label for=m-docshertztutorialsbasic-featureroute-check><a href=/docs/hertz/tutorials/basic-feature/route/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featureroute><span>Route</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featureclient-li><input type=checkbox id=m-docshertztutorialsbasic-featureclient-check>
<label for=m-docshertztutorialsbasic-featureclient-check><a href=/docs/hertz/tutorials/basic-feature/client/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featureclient><span>Client</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featurenetwork-lib-li><input type=checkbox id=m-docshertztutorialsbasic-featurenetwork-lib-check>
<label for=m-docshertztutorialsbasic-featurenetwork-lib-check><a href=/docs/hertz/tutorials/basic-feature/network-lib/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featurenetwork-lib><span>Network Lib</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docshertztutorialsbasic-featurecontext-li><input type=checkbox id=m-docshertztutorialsbasic-featurecontext-check>
<label for=m-docshertztutorialsbasic-featurecontext-check><a href=/docs/hertz/tutorials/basic-feature/context/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertztutorialsbasic-featurecontext><span>RequestContext</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featurecontextrequest-li><input type=checkbox id=m-docshertztutorialsbasic-featurecontextrequest-check>
<label for=m-docshertztutorialsbasic-featurecontextrequest-check><a href=/docs/hertz/tutorials/basic-feature/context/request/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featurecontextrequest><span>Request</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featurecontextresponse-li><input type=checkbox id=m-docshertztutorialsbasic-featurecontextresponse-check>
<label for=m-docshertztutorialsbasic-featurecontextresponse-check><a href=/docs/hertz/tutorials/basic-feature/context/response/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featurecontextresponse><span>Response</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docshertztutorialsbasic-featuremiddleware-li><input type=checkbox id=m-docshertztutorialsbasic-featuremiddleware-check>
<label for=m-docshertztutorialsbasic-featuremiddleware-check><a href=/docs/hertz/tutorials/basic-feature/middleware/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertztutorialsbasic-featuremiddleware><span>Middleware Overview</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featuremiddlewarebasic-auth-li><input type=checkbox id=m-docshertztutorialsbasic-featuremiddlewarebasic-auth-check>
<label for=m-docshertztutorialsbasic-featuremiddlewarebasic-auth-check><a href=/docs/hertz/tutorials/basic-feature/middleware/basic-auth/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featuremiddlewarebasic-auth><span>Basic Auth</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featuremiddlewarerecovery-li><input type=checkbox id=m-docshertztutorialsbasic-featuremiddlewarerecovery-check>
<label for=m-docshertztutorialsbasic-featuremiddlewarerecovery-check><a href=/docs/hertz/tutorials/basic-feature/middleware/recovery/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featuremiddlewarerecovery><span>Recovery</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featuretls-li><input type=checkbox id=m-docshertztutorialsbasic-featuretls-check>
<label for=m-docshertztutorialsbasic-featuretls-check><a href=/docs/hertz/tutorials/basic-feature/tls/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featuretls><span>TLS</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featurebinding-and-validate-li><input type=checkbox id=m-docshertztutorialsbasic-featurebinding-and-validate-check>
<label for=m-docshertztutorialsbasic-featurebinding-and-validate-check><a href=/docs/hertz/tutorials/basic-feature/binding-and-validate/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featurebinding-and-validate><span>Binding and validate</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featureerror-handle-li><input type=checkbox id=m-docshertztutorialsbasic-featureerror-handle-check>
<label for=m-docshertztutorialsbasic-featureerror-handle-check><a href=/docs/hertz/tutorials/basic-feature/error-handle/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featureerror-handle><span>Error Handle</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featuregraceful-shutdown-li><input type=checkbox id=m-docshertztutorialsbasic-featuregraceful-shutdown-check>
<label for=m-docshertztutorialsbasic-featuregraceful-shutdown-check><a href=/docs/hertz/tutorials/basic-feature/graceful-shutdown/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featuregraceful-shutdown><span>Graceful Shutdown</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featureproxy-li><input type=checkbox id=m-docshertztutorialsbasic-featureproxy-check>
<label for=m-docshertztutorialsbasic-featureproxy-check><a href=/docs/hertz/tutorials/basic-feature/proxy/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featureproxy><span>Forward Proxy and Reverse Proxy</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featureretry-li><input type=checkbox id=m-docshertztutorialsbasic-featureretry-check>
<label for=m-docshertztutorialsbasic-featureretry-check><a href=/docs/hertz/tutorials/basic-feature/retry/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featureretry><span>Retry</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featurehooks-li><input type=checkbox id=m-docshertztutorialsbasic-featurehooks-check>
<label for=m-docshertztutorialsbasic-featurehooks-check><a href=/docs/hertz/tutorials/basic-feature/hooks/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featurehooks><span>Hooks</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featureunit-test-li><input type=checkbox id=m-docshertztutorialsbasic-featureunit-test-check>
<label for=m-docshertztutorialsbasic-featureunit-test-check><a href=/docs/hertz/tutorials/basic-feature/unit-test/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featureunit-test><span>Unit Test</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featureadaptor-li><input type=checkbox id=m-docshertztutorialsbasic-featureadaptor-check>
<label for=m-docshertztutorialsbasic-featureadaptor-check><a href=/docs/hertz/tutorials/basic-feature/adaptor/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featureadaptor><span>Adaptor</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featureconstants-li><input type=checkbox id=m-docshertztutorialsbasic-featureconstants-check>
<label for=m-docshertztutorialsbasic-featureconstants-check><a href=/docs/hertz/tutorials/basic-feature/constants/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featureconstants><span>Constants</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featurerender-li><input type=checkbox id=m-docshertztutorialsbasic-featurerender-check>
<label for=m-docshertztutorialsbasic-featurerender-check><a href=/docs/hertz/tutorials/basic-feature/render/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featurerender><span>Render</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsbasic-featurejson-li><input type=checkbox id=m-docshertztutorialsbasic-featurejson-check>
<label for=m-docshertztutorialsbasic-featurejson-check><a href=/docs/hertz/tutorials/basic-feature/json/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsbasic-featurejson><span>JSON Marshal Library</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docshertztutorialsobservability-li><input type=checkbox id=m-docshertztutorialsobservability-check>
<label for=m-docshertztutorialsobservability-check><a href=/docs/hertz/tutorials/observability/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertztutorialsobservability><span>Observability</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsobservabilitylog-li><input type=checkbox id=m-docshertztutorialsobservabilitylog-check>
<label for=m-docshertztutorialsobservabilitylog-check><a href=/docs/hertz/tutorials/observability/log/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsobservabilitylog><span>Log</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsobservabilitytracing-li><input type=checkbox id=m-docshertztutorialsobservabilitytracing-check>
<label for=m-docshertztutorialsobservabilitytracing-check><a href=/docs/hertz/tutorials/observability/tracing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsobservabilitytracing><span>Tracing</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsobservabilityinstrumentation-li><input type=checkbox id=m-docshertztutorialsobservabilityinstrumentation-check>
<label for=m-docshertztutorialsobservabilityinstrumentation-check><a href=/docs/hertz/tutorials/observability/instrumentation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsobservabilityinstrumentation><span>Instrumentation</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docshertztutorialsframework-exten-li><input type=checkbox id=m-docshertztutorialsframework-exten-check>
<label for=m-docshertztutorialsframework-exten-check><a href=/docs/hertz/tutorials/framework-exten/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertztutorialsframework-exten><span>Framework Extension</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsframework-extenmonitor-li><input type=checkbox id=m-docshertztutorialsframework-extenmonitor-check>
<label for=m-docshertztutorialsframework-extenmonitor-check><a href=/docs/hertz/tutorials/framework-exten/monitor/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsframework-extenmonitor><span>Monitoring Extension</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsframework-extenlog-li><input type=checkbox id=m-docshertztutorialsframework-extenlog-check>
<label for=m-docshertztutorialsframework-extenlog-check><a href=/docs/hertz/tutorials/framework-exten/log/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsframework-extenlog><span>Logger Extension</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsframework-extenservice_discovery-li><input type=checkbox id=m-docshertztutorialsframework-extenservice_discovery-check>
<label for=m-docshertztutorialsframework-extenservice_discovery-check><a href=/docs/hertz/tutorials/framework-exten/service_discovery/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsframework-extenservice_discovery><span>Service Registration and Service Discovery Extensions</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsframework-extennetwork-lib-li><input type=checkbox id=m-docshertztutorialsframework-extennetwork-lib-check>
<label for=m-docshertztutorialsframework-extennetwork-lib-check><a href=/docs/hertz/tutorials/framework-exten/network-lib/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsframework-extennetwork-lib><span>Network Library Extensions</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsframework-extenprotocol-li><input type=checkbox id=m-docshertztutorialsframework-extenprotocol-check>
<label for=m-docshertztutorialsframework-extenprotocol-check><a href=/docs/hertz/tutorials/framework-exten/protocol/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsframework-extenprotocol><span>Protocol extension</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsframework-extenresponse_writer-li><input type=checkbox id=m-docshertztutorialsframework-extenresponse_writer-check>
<label for=m-docshertztutorialsframework-extenresponse_writer-check><a href=/docs/hertz/tutorials/framework-exten/response_writer/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsframework-extenresponse_writer><span>Response Writer Extension</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docshertztutorialstoolkit-li><input type=checkbox id=m-docshertztutorialstoolkit-check>
<label for=m-docshertztutorialstoolkit-check><a href=/docs/hertz/tutorials/toolkit/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertztutorialstoolkit><span>hz Code Generation</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialstoolkitinstall-li><input type=checkbox id=m-docshertztutorialstoolkitinstall-check>
<label for=m-docshertztutorialstoolkitinstall-check><a href=/docs/hertz/tutorials/toolkit/install/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialstoolkitinstall><span>hz install</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialstoolkitusage-li><input type=checkbox id=m-docshertztutorialstoolkitusage-check>
<label for=m-docshertztutorialstoolkitusage-check><a href=/docs/hertz/tutorials/toolkit/usage/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialstoolkitusage><span>hz basic usage</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialstoolkitusage-thrift-li><input type=checkbox id=m-docshertztutorialstoolkitusage-thrift-check>
<label for=m-docshertztutorialstoolkitusage-thrift-check><a href=/docs/hertz/tutorials/toolkit/usage-thrift/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialstoolkitusage-thrift><span>hz usage(thrift)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialstoolkitusage-protobuf-li><input type=checkbox id=m-docshertztutorialstoolkitusage-protobuf-check>
<label for=m-docshertztutorialstoolkitusage-protobuf-check><a href=/docs/hertz/tutorials/toolkit/usage-protobuf/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialstoolkitusage-protobuf><span>hz usage(protobuf)</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialstoolkitlayout-li><input type=checkbox id=m-docshertztutorialstoolkitlayout-check>
<label for=m-docshertztutorialstoolkitlayout-check><a href=/docs/hertz/tutorials/toolkit/layout/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialstoolkitlayout><span>hz layout</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialstoolkitannotation-li><input type=checkbox id=m-docshertztutorialstoolkitannotation-check>
<label for=m-docshertztutorialstoolkitannotation-check><a href=/docs/hertz/tutorials/toolkit/annotation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialstoolkitannotation><span>hz annotation</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialstoolkitcommand-li><input type=checkbox id=m-docshertztutorialstoolkitcommand-check>
<label for=m-docshertztutorialstoolkitcommand-check><a href=/docs/hertz/tutorials/toolkit/command/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialstoolkitcommand><span>hz commands</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialstoolkitcautions-li><input type=checkbox id=m-docshertztutorialstoolkitcautions-check>
<label for=m-docshertztutorialstoolkitcautions-check><a href=/docs/hertz/tutorials/toolkit/cautions/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialstoolkitcautions><span>note</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docshertztutorialstoolkitmore-feature-li><input type=checkbox id=m-docshertztutorialstoolkitmore-feature-check>
<label for=m-docshertztutorialstoolkitmore-feature-check><a href=/docs/hertz/tutorials/toolkit/more-feature/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertztutorialstoolkitmore-feature><span>more features</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialstoolkitmore-featuretemplate-li><input type=checkbox id=m-docshertztutorialstoolkitmore-featuretemplate-check>
<label for=m-docshertztutorialstoolkitmore-featuretemplate-check><a href=/docs/hertz/tutorials/toolkit/more-feature/template/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialstoolkitmore-featuretemplate><span>hz custom template use</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialstoolkitmore-featureplugin-li><input type=checkbox id=m-docshertztutorialstoolkitmore-featureplugin-check>
<label for=m-docshertztutorialstoolkitmore-featureplugin-check><a href=/docs/hertz/tutorials/toolkit/more-feature/plugin/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialstoolkitmore-featureplugin><span>hz access plugin</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialstoolkitmore-featureclient-li><input type=checkbox id=m-docshertztutorialstoolkitmore-featureclient-check>
<label for=m-docshertztutorialstoolkitmore-featureclient-check><a href=/docs/hertz/tutorials/toolkit/more-feature/client/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialstoolkitmore-featureclient><span>hz client code generation</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialstoolkitmore-featureapi_none-li><input type=checkbox id=m-docshertztutorialstoolkitmore-featureapi_none-check>
<label for=m-docshertztutorialstoolkitmore-featureapi_none-check><a href=/docs/hertz/tutorials/toolkit/more-feature/api_none/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialstoolkitmore-featureapi_none><span>api.none annotation usage</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docshertztutorialsthird-party-li><input type=checkbox id=m-docshertztutorialsthird-party-check>
<label for=m-docshertztutorialsthird-party-check><a href=/docs/hertz/tutorials/third-party/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertztutorialsthird-party><span>Third-Party</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docshertztutorialsthird-partyprotocol-li><input type=checkbox id=m-docshertztutorialsthird-partyprotocol-check>
<label for=m-docshertztutorialsthird-partyprotocol-check><a href=/docs/hertz/tutorials/third-party/protocol/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertztutorialsthird-partyprotocol><span>Protocol</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partyprotocolhttp2-li><input type=checkbox id=m-docshertztutorialsthird-partyprotocolhttp2-check>
<label for=m-docshertztutorialsthird-partyprotocolhttp2-check><a href=/docs/hertz/tutorials/third-party/protocol/http2/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partyprotocolhttp2><span>HTTP2</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partyprotocolhttp3-li><input type=checkbox id=m-docshertztutorialsthird-partyprotocolhttp3-check>
<label for=m-docshertztutorialsthird-partyprotocolhttp3-check><a href=/docs/hertz/tutorials/third-party/protocol/http3/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partyprotocolhttp3><span>HTTP3</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partyprotocolwebsocket-li><input type=checkbox id=m-docshertztutorialsthird-partyprotocolwebsocket-check>
<label for=m-docshertztutorialsthird-partyprotocolwebsocket-check><a href=/docs/hertz/tutorials/third-party/protocol/websocket/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partyprotocolwebsocket><span>Websocket</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partyprotocolsse-li><input type=checkbox id=m-docshertztutorialsthird-partyprotocolsse-check>
<label for=m-docshertztutorialsthird-partyprotocolsse-check><a href=/docs/hertz/tutorials/third-party/protocol/sse/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partyprotocolsse><span>SSE</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docshertztutorialsthird-partymiddleware-li><input type=checkbox id=m-docshertztutorialsthird-partymiddleware-check>
<label for=m-docshertztutorialsthird-partymiddleware-check><a href=/docs/hertz/tutorials/third-party/middleware/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertztutorialsthird-partymiddleware><span>Middleware</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partymiddlewarecors-li><input type=checkbox id=m-docshertztutorialsthird-partymiddlewarecors-check>
<label for=m-docshertztutorialsthird-partymiddlewarecors-check><a href=/docs/hertz/tutorials/third-party/middleware/cors/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partymiddlewarecors><span>CORS</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partymiddlewarejwt-li><input type=checkbox id=m-docshertztutorialsthird-partymiddlewarejwt-check>
<label for=m-docshertztutorialsthird-partymiddlewarejwt-check><a href=/docs/hertz/tutorials/third-party/middleware/jwt/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partymiddlewarejwt><span>JWT</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partymiddlewaregzip-li><input type=checkbox id=m-docshertztutorialsthird-partymiddlewaregzip-check>
<label for=m-docshertztutorialsthird-partymiddlewaregzip-check><a href=/docs/hertz/tutorials/third-party/middleware/gzip/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partymiddlewaregzip><span>Gzip Compress</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partymiddlewarei18n-li><input type=checkbox id=m-docshertztutorialsthird-partymiddlewarei18n-check>
<label for=m-docshertztutorialsthird-partymiddlewarei18n-check><a href=/docs/hertz/tutorials/third-party/middleware/i18n/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partymiddlewarei18n><span>Internationalization</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partymiddlewaresession-li><input type=checkbox id=m-docshertztutorialsthird-partymiddlewaresession-check>
<label for=m-docshertztutorialsthird-partymiddlewaresession-check><a href=/docs/hertz/tutorials/third-party/middleware/session/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partymiddlewaresession><span>Session Extension</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partymiddlewarepprof-li><input type=checkbox id=m-docshertztutorialsthird-partymiddlewarepprof-check>
<label for=m-docshertztutorialsthird-partymiddlewarepprof-check><a href=/docs/hertz/tutorials/third-party/middleware/pprof/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partymiddlewarepprof><span>Pprof</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partymiddlewarekeyauth-li><input type=checkbox id=m-docshertztutorialsthird-partymiddlewarekeyauth-check>
<label for=m-docshertztutorialsthird-partymiddlewarekeyauth-check><a href=/docs/hertz/tutorials/third-party/middleware/keyauth/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partymiddlewarekeyauth><span>KeyAuth</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partymiddlewareswagger-li><input type=checkbox id=m-docshertztutorialsthird-partymiddlewareswagger-check>
<label for=m-docshertztutorialsthird-partymiddlewareswagger-check><a href=/docs/hertz/tutorials/third-party/middleware/swagger/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partymiddlewareswagger><span>Swagger</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partymiddlewarerequestid-li><input type=checkbox id=m-docshertztutorialsthird-partymiddlewarerequestid-check>
<label for=m-docshertztutorialsthird-partymiddlewarerequestid-check><a href=/docs/hertz/tutorials/third-party/middleware/requestid/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partymiddlewarerequestid><span>Request ID</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partymiddlewareaccess-log-li><input type=checkbox id=m-docshertztutorialsthird-partymiddlewareaccess-log-check>
<label for=m-docshertztutorialsthird-partymiddlewareaccess-log-check><a href=/docs/hertz/tutorials/third-party/middleware/access-log/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partymiddlewareaccess-log><span>access log</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partymiddlewaresecure-li><input type=checkbox id=m-docshertztutorialsthird-partymiddlewaresecure-check>
<label for=m-docshertztutorialsthird-partymiddlewaresecure-check><a href=/docs/hertz/tutorials/third-party/middleware/secure/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partymiddlewaresecure><span>Secure</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partymiddlewaresentry-li><input type=checkbox id=m-docshertztutorialsthird-partymiddlewaresentry-check>
<label for=m-docshertztutorialsthird-partymiddlewaresentry-check><a href=/docs/hertz/tutorials/third-party/middleware/sentry/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partymiddlewaresentry><span>Sentry</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partymiddlewarecsrf-li><input type=checkbox id=m-docshertztutorialsthird-partymiddlewarecsrf-check>
<label for=m-docshertztutorialsthird-partymiddlewarecsrf-check><a href=/docs/hertz/tutorials/third-party/middleware/csrf/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partymiddlewarecsrf><span>CSRF</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partymiddlewarecasbin-li><input type=checkbox id=m-docshertztutorialsthird-partymiddlewarecasbin-check>
<label for=m-docshertztutorialsthird-partymiddlewarecasbin-check><a href=/docs/hertz/tutorials/third-party/middleware/casbin/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partymiddlewarecasbin><span>Casbin</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partymiddlewareetag-li><input type=checkbox id=m-docshertztutorialsthird-partymiddlewareetag-check>
<label for=m-docshertztutorialsthird-partymiddlewareetag-check><a href=/docs/hertz/tutorials/third-party/middleware/etag/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partymiddlewareetag><span>ETag</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partymiddlewarecache-li><input type=checkbox id=m-docshertztutorialsthird-partymiddlewarecache-check>
<label for=m-docshertztutorialsthird-partymiddlewarecache-check><a href=/docs/hertz/tutorials/third-party/middleware/cache/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partymiddlewarecache><span>Cache</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partymiddlewarepaseto-li><input type=checkbox id=m-docshertztutorialsthird-partymiddlewarepaseto-check>
<label for=m-docshertztutorialsthird-partymiddlewarepaseto-check><a href=/docs/hertz/tutorials/third-party/middleware/paseto/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partymiddlewarepaseto><span>Paseto</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docshertztutorialsthird-partyservice_discovery-li><input type=checkbox id=m-docshertztutorialsthird-partyservice_discovery-check>
<label for=m-docshertztutorialsthird-partyservice_discovery-check><a href=/docs/hertz/tutorials/third-party/service_discovery/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertztutorialsthird-partyservice_discovery><span>Service Registration and Discovery</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partyservice_discoverynacos-li><input type=checkbox id=m-docshertztutorialsthird-partyservice_discoverynacos-check>
<label for=m-docshertztutorialsthird-partyservice_discoverynacos-check><a href=/docs/hertz/tutorials/third-party/service_discovery/nacos/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partyservice_discoverynacos><span>nacos</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partyservice_discoveryconsul-li><input type=checkbox id=m-docshertztutorialsthird-partyservice_discoveryconsul-check>
<label for=m-docshertztutorialsthird-partyservice_discoveryconsul-check><a href=/docs/hertz/tutorials/third-party/service_discovery/consul/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partyservice_discoveryconsul><span>consul</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partyservice_discoveryetcd-li><input type=checkbox id=m-docshertztutorialsthird-partyservice_discoveryetcd-check>
<label for=m-docshertztutorialsthird-partyservice_discoveryetcd-check><a href=/docs/hertz/tutorials/third-party/service_discovery/etcd/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partyservice_discoveryetcd><span>etcd</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partyservice_discoveryeureka-li><input type=checkbox id=m-docshertztutorialsthird-partyservice_discoveryeureka-check>
<label for=m-docshertztutorialsthird-partyservice_discoveryeureka-check><a href=/docs/hertz/tutorials/third-party/service_discovery/eureka/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partyservice_discoveryeureka><span>eureka</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partyservice_discoverypolaris-li><input type=checkbox id=m-docshertztutorialsthird-partyservice_discoverypolaris-check>
<label for=m-docshertztutorialsthird-partyservice_discoverypolaris-check><a href=/docs/hertz/tutorials/third-party/service_discovery/polaris/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partyservice_discoverypolaris><span>polaris</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partyservice_discoveryservicecomb-li><input type=checkbox id=m-docshertztutorialsthird-partyservice_discoveryservicecomb-check>
<label for=m-docshertztutorialsthird-partyservice_discoveryservicecomb-check><a href=/docs/hertz/tutorials/third-party/service_discovery/servicecomb/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partyservice_discoveryservicecomb><span>servicecomb</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partyservice_discoveryzookeeper-li><input type=checkbox id=m-docshertztutorialsthird-partyservice_discoveryzookeeper-check>
<label for=m-docshertztutorialsthird-partyservice_discoveryzookeeper-check><a href=/docs/hertz/tutorials/third-party/service_discovery/zookeeper/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partyservice_discoveryzookeeper><span>zookeeper</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partyservice_discoveryredis-li><input type=checkbox id=m-docshertztutorialsthird-partyservice_discoveryredis-check>
<label for=m-docshertztutorialsthird-partyservice_discoveryredis-check><a href=/docs/hertz/tutorials/third-party/service_discovery/redis/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partyservice_discoveryredis><span>redis</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docshertztutorialsthird-partylog-li><input type=checkbox id=m-docshertztutorialsthird-partylog-check>
<label for=m-docshertztutorialsthird-partylog-check><a href=/docs/hertz/tutorials/third-party/log/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertztutorialsthird-partylog><span>Log</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partyloglogrus-li><input type=checkbox id=m-docshertztutorialsthird-partyloglogrus-check>
<label for=m-docshertztutorialsthird-partyloglogrus-check><a href=/docs/hertz/tutorials/third-party/log/logrus/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partyloglogrus><span>logrus</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partylogzap-li><input type=checkbox id=m-docshertztutorialsthird-partylogzap-check>
<label for=m-docshertztutorialsthird-partylogzap-check><a href=/docs/hertz/tutorials/third-party/log/zap/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partylogzap><span>zap</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partylogzerolog-li><input type=checkbox id=m-docshertztutorialsthird-partylogzerolog-check>
<label for=m-docshertztutorialsthird-partylogzerolog-check><a href=/docs/hertz/tutorials/third-party/log/zerolog/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partylogzerolog><span>zerolog</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partylogslog-li><input type=checkbox id=m-docshertztutorialsthird-partylogslog-check>
<label for=m-docshertztutorialsthird-partylogslog-check><a href=/docs/hertz/tutorials/third-party/log/slog/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partylogslog><span>slog</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partyprometheus-li><input type=checkbox id=m-docshertztutorialsthird-partyprometheus-check>
<label for=m-docshertztutorialsthird-partyprometheus-check><a href=/docs/hertz/tutorials/third-party/prometheus/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partyprometheus><span>Prometheus</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partyopen-telemetry-li><input type=checkbox id=m-docshertztutorialsthird-partyopen-telemetry-check>
<label for=m-docshertztutorialsthird-partyopen-telemetry-check><a href=/docs/hertz/tutorials/third-party/open-telemetry/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partyopen-telemetry><span>OpenTelemetry</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsthird-partysentinel-li><input type=checkbox id=m-docshertztutorialsthird-partysentinel-check>
<label for=m-docshertztutorialsthird-partysentinel-check><a href=/docs/hertz/tutorials/third-party/sentinel/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertztutorialsthird-partysentinel><span>Sentinel</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertztutorialsservice-migration-li><input type=checkbox id=m-docshertztutorialsservice-migration-check>
<label for=m-docshertztutorialsservice-migration-check><a href=/docs/hertz/tutorials/service-migration/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertztutorialsservice-migration><span>Migration to Hertz</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertzfaq-li><input type=checkbox id=m-docshertzfaq-check checked>
<label for=m-docshertzfaq-check><a href=/docs/hertz/faq/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertzfaq><span>FAQ</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docshertzreference-li><input type=checkbox id=m-docshertzreference-check checked>
<label for=m-docshertzreference-check><a href=/docs/hertz/reference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docshertzreference><span>Reference</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertzreferenceconfig-li><input type=checkbox id=m-docshertzreferenceconfig-check>
<label for=m-docshertzreferenceconfig-check><a href=/docs/hertz/reference/config/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertzreferenceconfig><span>Configuration instruction</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshertzreferenceversion-li><input type=checkbox id=m-docshertzreferenceversion-check>
<label for=m-docshertzreferenceversion-check><a href=/docs/hertz/reference/version/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docshertzreferenceversion><span>Version Descriptions</span></a></label></li></ul></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/cloudwego/cloudwego.github.io/edit/main/content/en//docs/hertz/tutorials/basic-feature/engine target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/new/main/content/en//docs/hertz/tutorials/basic-feature/engine?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/issues/new?labels=bug&amp;template=DOCS_UPDATE.md&amp;title=Engine" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/cloudwego/hertz/issues/new/choose target=_blank><i class="fas fa-tasks fa-fw"></i> Create project issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#config>Config</a></li><li><a href=#initial-service>Initial Service</a><ul><li><a href=#default>Default</a></li><li><a href=#new>New</a></li></ul></li><li><a href=#service-run-and-exit>Service Run and Exit</a><ul><li><a href=#spin>Spin</a></li><li><a href=#run>Run</a></li><li><a href=#setcustomsignalwaiter>SetCustomSignalWaiter</a></li></ul></li><li><a href=#middleware>Middleware</a><ul><li><a href=#use>Use</a></li></ul></li><li><a href=#streaming>Streaming</a><ul><li><a href=#streaming-read>Streaming Read</a></li><li><a href=#streaming-write>Streaming Write</a></li></ul></li><li><a href=#register-custom-protocol>Register Custom Protocol</a></li><li><a href=#setclientipfunc>SetClientIPFunc</a></li><li><a href=#setformvaluefunc>SetFormValueFunc</a></li><li><a href=#hooks>Hooks</a></li><li><a href=#panichandler>PanicHandler</a></li><li><a href=#continuehandler>ContinueHandler</a></li><li><a href=#rendering-template>Rendering Template</a></li><li><a href=#using-noroute-and-nomethod>Using NoRoute and NoMethod</a></li><li><a href=#get-route-information>Get Route Information</a><ul><li><a href=#routes>Routes</a></li></ul></li><li><a href=#transporter>Transporter</a><ul><li><a href=#gettransportername>GetTransporterName</a></li><li><a href=#settransporter>SetTransporter</a></li></ul></li><li><a href=#tracing>Tracing</a></li><li><a href=#hijack>Hijack</a><ul><li><a href=#nohijackconnpool>NoHijackConnPool</a></li><li><a href=#hijackconnhandle>HijackConnHandle</a></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/>Documentation</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/hertz/>Hertz</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/hertz/tutorials/>Tutorials</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/hertz/tutorials/basic-feature/>Basic Feature</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://www.cloudwego.io/docs/hertz/tutorials/basic-feature/engine/>Engine</a></li></ol></nav><div class=td-content><h1>Engine</h1><header class=article-meta></header><p><code>Server.Hertz</code> is the core type of <code>Hertz</code>, consisting of <code>route.Engine</code> and <code>signalWaiter</code>. The important methods for starting, registering routes, registering middleware, and exiting the <code>Hertz</code> server are all included in <code>server.Hertz</code>. The following is the definition of <code>server.Hertz</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Hertz</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>route</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Engine</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// used to receive signal for elegant exit</span>
</span></span><span style=display:flex><span>    <span style=color:#000>signalWaiter</span> <span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>chan</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>error</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><code>Route.Engine</code> is an important component of <code>server.Hertz</code>, and the definition of <code>Engine</code> is located in <a href=https://github.com/cloudwego/hertz/blob/main/pkg/route/engine.go>Engine</a>.</p><h2 id=config>Config</h2><table><thead><tr><th style=text-align:left><strong>Option</strong></th><th style=text-align:left><strong>Default</strong></th><th style=text-align:left><strong>Description</strong></th></tr></thead><tbody><tr><td style=text-align:left>WithTransport</td><td style=text-align:left>network.NewTransporter</td><td style=text-align:left>Replace the transport</td></tr><tr><td style=text-align:left>WithHostPorts</td><td style=text-align:left><code>:8888</code></td><td style=text-align:left>Specify the listening address and port</td></tr><tr><td style=text-align:left>WithKeepAliveTimeout</td><td style=text-align:left>1min</td><td style=text-align:left>Set the keep-alive time of tcp persistent connection, generally no need to modify it, you should more pay attention to idleTimeout rather than modifying it</td></tr><tr><td style=text-align:left>WithReadTimeout</td><td style=text-align:left>3min</td><td style=text-align:left>The timeout of data reading</td></tr><tr><td style=text-align:left>WithIdleTimeout</td><td style=text-align:left>3min</td><td style=text-align:left>The free timeout of the request link for persistent connection</td></tr><tr><td style=text-align:left>WithMaxRequestBodySize</td><td style=text-align:left>4 _ 1024 _ 1024</td><td style=text-align:left>Max body size of a request</td></tr><tr><td style=text-align:left>WithRedirectTrailingSlash</td><td style=text-align:left>true</td><td style=text-align:left>Whether to redirect with the / which is at the end of the router automatically. For example： If there is only /foo/ in the router, /foo will be redirected to /foo/. And if there is only /foo in the router, /foo/ will be redirected to /foo</td></tr><tr><td style=text-align:left>WithRemoveExtraSlash</td><td style=text-align:left>false</td><td style=text-align:left>RemoveExtraSlash makes the parameter still valid when it contains an extra /. For example, if WithRemoveExtraSlash is true user//xiaoming can match the user/:name router</td></tr><tr><td style=text-align:left>WithUnescapePathValues</td><td style=text-align:left>true</td><td style=text-align:left>If true, the request path will be escaped automatically (eg. &lsquo;%2F&rsquo; -> &lsquo;/&rsquo;). If UseRawPath is false (the default), UnescapePathValues is true, because URI().Path() will be used and it is already escaped. To set WithUnescapePathValues to false, you need to set WithUseRawPath to true</td></tr><tr><td style=text-align:left>WithUseRawPath</td><td style=text-align:left>false</td><td style=text-align:left>If true, the original path will be used to match the route</td></tr><tr><td style=text-align:left>WithHandleMethodNotAllowed</td><td style=text-align:left>false</td><td style=text-align:left>If true when the current path cannot match any method, the server will check whether other methods are registered with the route of the current path, and if exist other methods, it will respond &ldquo;Method Not Allowed&rdquo; and return the status code 405; if not, it will use the handler of NotFound to handle it</td></tr><tr><td style=text-align:left>WithDisablePreParseMultipartForm</td><td style=text-align:left>false</td><td style=text-align:left>If true, the multipart form will not be preprocessed. The body can be obtained via c.Request.Body() and then can be processed by user</td></tr><tr><td style=text-align:left>WithStreamBody</td><td style=text-align:left>false</td><td style=text-align:left>If true, the body will be handled by stream processing</td></tr><tr><td style=text-align:left>WithNetwork</td><td style=text-align:left>&ldquo;tcp&rdquo;</td><td style=text-align:left>Set the network protocol, optional: tcp，udp，unix(unix domain socket)</td></tr><tr><td style=text-align:left>WithExitWaitTime</td><td style=text-align:left>5s</td><td style=text-align:left>Set the graceful exit time. the Server will stop connection establishment for new requests and set the Connection: Close header for each request after closing. When the set time is reached, Server will to be closed. the Server can be closed early when all connections have been closed</td></tr><tr><td style=text-align:left>WithTLS</td><td style=text-align:left>nil</td><td style=text-align:left>Configuring server tls capabilities, For detailed information, please refer to <a href=/zh/docs/hertz/tutorials/basic-feature/tls/>TLS</a></td></tr><tr><td style=text-align:left>WithListenConfig</td><td style=text-align:left>nil</td><td style=text-align:left>Set the listener configuration. Can be used to set whether to allow reuse ports, etc.</td></tr><tr><td style=text-align:left>WithALPN</td><td style=text-align:left>false</td><td style=text-align:left>Whether to enable ALPN</td></tr><tr><td style=text-align:left>WithTracer</td><td style=text-align:left>[]interface{}{}</td><td style=text-align:left>Inject tracer implementation, if not inject Tracer, default: close.</td></tr><tr><td style=text-align:left>WithTraceLevel</td><td style=text-align:left>LevelDetailed</td><td style=text-align:left>Set trace level</td></tr><tr><td style=text-align:left>WithWriteTimeout</td><td style=text-align:left>infinite</td><td style=text-align:left>The timeout of data writing</td></tr><tr><td style=text-align:left>WithRedirectFixedPath</td><td style=text-align:left>false</td><td style=text-align:left>If enabled, if the current request path does not match, the server will try to repair the request path and re-match, if the match is successful and the request is a GET request, it will return status code 301 for redirect, other requests will return 308 for redirect</td></tr><tr><td style=text-align:left>WithBasePath</td><td style=text-align:left><code>/</code></td><td style=text-align:left>Set the base path, which must be prefixed and suffixed with <code>/</code></td></tr><tr><td style=text-align:left>WithMaxKeepBodySize</td><td style=text-align:left>4 _ 1024 _ 1024</td><td style=text-align:left>Sets the maximum size of the request body and response body to be retained during reclaim. Unit: Byte</td></tr><tr><td style=text-align:left>WithGetOnly</td><td style=text-align:left>false</td><td style=text-align:left>If enabled, only GET requests are accepted</td></tr><tr><td style=text-align:left>WithKeepAlive</td><td style=text-align:left>true</td><td style=text-align:left>If enabled, use HTTP keepalive</td></tr><tr><td style=text-align:left>WithAltTransport</td><td style=text-align:left>network.NewTransporter</td><td style=text-align:left>Set up the alternate transport</td></tr><tr><td style=text-align:left>WithH2C</td><td style=text-align:left>false</td><td style=text-align:left>Sets whether H2C is enabled</td></tr><tr><td style=text-align:left>WithReadBufferSize</td><td style=text-align:left>4 * 1024</td><td style=text-align:left>Set the read buffer size while limiting the HTTP header size</td></tr><tr><td style=text-align:left>WithRegistry</td><td style=text-align:left>registry.NoopRegistry, nil</td><td style=text-align:left>Setup registry configuration, service registration information</td></tr><tr><td style=text-align:left>WithAutoReloadRender</td><td style=text-align:left>false, 0</td><td style=text-align:left>Set up the automatic reload rendering configuration</td></tr><tr><td style=text-align:left>WithDisablePrintRoute</td><td style=text-align:left>false</td><td style=text-align:left>Sets whether debugPrintRoute is disabled</td></tr><tr><td style=text-align:left>WithOnAccept</td><td style=text-align:left>nil</td><td style=text-align:left>Set the callback function when a new connection is accepted but cannot receive data in netpoll. In go net, it will be called before converting tls connection</td></tr><tr><td style=text-align:left>WithOnConnect</td><td style=text-align:left>nil</td><td style=text-align:left>Set the onConnect function. It can received data from connection in netpoll. In go net, it will be called after converting tls connection</td></tr><tr><td style=text-align:left>WithDisableHeaderNamesNormalizing</td><td style=text-align:left>false</td><td style=text-align:left>Sets whether or not to disable Request and Response Header name normalization (capitalization of the first letter and the first letter after a dash)</td></tr></tbody></table><p>Server Connection limitation:</p><ul><li>If you are using the standard network library, there is no such restriction.</li><li>If netpoll is used, the maximum number of connections is 10000 (this is
the <a href=https://github.com/bytedance/gopkg/blob/b9c1c36b51a6837cef4c2223e11522e3a647460c/util/gopool/gopool.go#L46>gopool</a>)
used at the bottom of netpoll. Yes, the modification method is also very simple, just call the function provided by
gopool: <code>gopool.SetCap(xxx)</code> (you can call it once in main.go).</li></ul><p>The configuration items on the server side are initialized using the <code>server.WithXXX</code> method, such as:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#000>h</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>New</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithXXXX</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>	<span style=color:#ce5c00;font-weight:700>...</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=initial-service>Initial Service</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Default</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span> <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000>config</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Option</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Hertz</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>New</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span> <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000>config</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Option</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Hertz</span>
</span></span></code></pre></div><h3 id=default>Default</h3><p><code>Default</code> is used to initialize the service, and the <code>Recovery</code> middleware is used by default to ensure that the service will not crash during runtime due to <code>panic</code>.</p><p>Function Signature:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Default</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span> <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000>config</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Option</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Hertz</span>
</span></span></code></pre></div><p>Example Code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Default</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Spin</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=new>New</h3><p><code>New</code> is used to initialize service and does not use the default <code>Recovery</code> middleware.</p><p>Function Signature:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>New</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span> <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000>config</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Option</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Hertz</span>
</span></span></code></pre></div><p>Example Code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>New</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Spin</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=service-run-and-exit>Service Run and Exit</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>h</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Hertz</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Spin</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>engine</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Engine</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Run</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>h</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Hertz</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>SetCustomSignalWaiter</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>f</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>chan</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h3 id=spin>Spin</h3><p>The <code>Spin</code> function is used to run the Hertz server and can exit the service upon receiving an exit signal.</p><p>This function supports graceful shutdown of services. For detailed information on graceful shutdown, please refer to <a href=/docs/hertz/tutorials/basic-feature/graceful-shutdown/>graceful-shutdown</a>.</p><p>When using the function of <a href=/docs/hertz/tutorials/third-party/service_discovery/>service_discovery</a>, <code>Spin</code> will register the service into the registry when it is started, and use <code>signalWaiter</code> to monitor service exceptions.</p><p>Function Signature:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>h</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Hertz</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Spin</span><span style=color:#000;font-weight:700>()</span>
</span></span></code></pre></div><p>Example Code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Default</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Spin</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=run>Run</h3><p>The <code>Run</code> function is used to run the Hertz server and can exit the service upon receiving an exit signal.</p><p>This function does not support graceful shutdown of service. Unless there are <strong>special</strong> requirements, the <a href=/docs/hertz/tutorials/basic-feature/engine/#spin>Spin</a> function is generally used to run service.</p><p>Function Signature:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>engine</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Engine</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Run</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>Example Code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Default</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Run</span><span style=color:#000;font-weight:700>();</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// ...</span>
</span></span><span style=display:flex><span>    	<span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=setcustomsignalwaiter>SetCustomSignalWaiter</h3><p>The <code>SetCustomimSignalWaiter</code> function is used to customize the processing function of the server after receiving signals. If no custom function is set, Hertz uses the <code>waitSignal</code> function as the default implementation method for signal processing. For more details, please refer to <a href=/docs/hertz/tutorials/basic-feature/graceful-shutdown/>graceful-shutdown</a>.</p><p>Function Signature:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>h</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Hertz</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>SetCustomSignalWaiter</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>f</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>chan</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>Example Code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#000>h</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>New</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>	<span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SetCustomSignalWaiter</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>chan</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>error</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>	<span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Spin</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=middleware>Middleware</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>engine</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Engine</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Use</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>middleware</span> <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HandlerFunc</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>IRoutes</span>
</span></span></code></pre></div><h3 id=use>Use</h3><p>The <code>Use</code> function is used to register the middleware into the router.</p><p>Hertz supports user-defined middleware, and has implemented some commonly used middleware. Please refer to <a href=https://github.com/hertz-contrib>hertz contrib</a> for details.</p><p>The usage methods of middleware supported by Hertz include <strong>global registration</strong>, <strong>routing group</strong> level, and <strong>single routing</strong> level registration. For details, please refer to <a href=/docs/hertz/tutorials/basic-feature/middleware/#server-side-middleware>server-side-middleware</a>.</p><p>The formal parameter of <code>middleware</code> in the <code>Use</code> function must be the http processing function of <code>app.HandlerFunc</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>HandlerFunc</span> <span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>c</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RequestContext</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>Function Signature:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>engine</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Engine</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Use</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>middleware</span> <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HandlerFunc</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>IRoutes</span>
</span></span></code></pre></div><p>Example Code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>New</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Register built-in Recovery middleware into routes.</span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Use</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>recovery</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Recovery</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Use custom middleware.</span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Use</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>exampleMiddleware</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>exampleMiddleware</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HandlerFunc</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>c</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RequestContext</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// Print logs before executing functions in Next.</span>
</span></span><span style=display:flex><span>        <span style=color:#000>hlog</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Info</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;print before...&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// Use Next to execute the matching function in route.</span>
</span></span><span style=display:flex><span>        <span style=color:#000>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Next</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// Print logs after executing functions in Next.</span>
</span></span><span style=display:flex><span>        <span style=color:#000>hlog</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Info</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;print after...&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=streaming>Streaming</h2><p>Hertz supports server streaming processing, including streaming read and streaming write.</p><blockquote><p>Note: Due to the different triggering modes between netpoll and go net, netpoll streaming is &ldquo;pseudo&rdquo; (due to LT triggering, data will be read into the buffer of the network library by the network library). In scenarios with large packets (such as uploading files), there may be memory issues, and it is recommended to use go net.</p></blockquote><h3 id=streaming-read>Streaming Read</h3><p>Hertz Server supports streaming read request content.</p><p>Example Code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#000>h</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Default</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithHostPorts</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;127.0.0.1:8080&#34;</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithStreamBody</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithTransport</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>standard</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewTransporter</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>POST</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;/bodyStream&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>handler</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Spin</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>handler</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>c</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RequestContext</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Acquire body streaming</span>
</span></span><span style=display:flex><span>	<span style=color:#000>bodyStream</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RequestBodyStream</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Read half of body bytes</span>
</span></span><span style=display:flex><span>	<span style=color:#000>p</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87>make</span><span style=color:#000;font-weight:700>([]</span><span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Request</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Header</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ContentLength</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000>r</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>bodyStream</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Read</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>p</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>	<span style=color:#000>left</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>_</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>ioutil</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ReadAll</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bodyStream</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>String</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>consts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StatusOK</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;bytes streaming_read: %d\nbytes left: %d\n&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>r</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>len</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>left</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=streaming-write>Streaming Write</h3><p>Hertz Server supports streaming write responses.</p><p>Two methods are provided:</p><ol><li><p>The user passes in a <code>io.Reader</code> through the <code>ctx.SetBodyStream</code> function in the handler, and then reads and writes data in blocks in a similar manner to the example code (using channel to control data partitioning and read/write order) <strong>Note that data needs to be written asynchronously</strong>.</p><p>If the user knows the total length of the transmitted data in advance, they can pass in the length in the <code>ctx.SetBodyStream</code> function for streaming writing, as shown in the example code <code>/streamWrite1</code>.</p><p>If the user does not know the total length of the transmitted data in advance, they can pass in -1 in the <code>ctx.SetBodyStream</code> function to write the stream in the form of <code>Transfer-Encoding: chunked</code>, as shown in the example code <code>/streamWrite2</code>.</p><p>Example Code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Default</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithHostPorts</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;127.0.0.1:8080&#34;</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithStreamBody</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithTransport</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>standard</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewTransporter</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GET</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;/streamWrite1&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>c</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RequestContext</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>rw</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>newChunkReader</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>        <span style=color:#000>line</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87>byte</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;line\r\n&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SetBodyStream</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>rw</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>500</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#204a87>len</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>line</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>go</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>&lt;=</span> <span style=color:#0000cf;font-weight:700>500</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span><span style=color:#ce5c00;font-weight:700>++</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#8f5902;font-style:italic>// For each streaming_write, the upload_file prints</span>
</span></span><span style=display:flex><span>                <span style=color:#000>rw</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Write</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>line</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>                <span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Println</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>                <span style=color:#000>time</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Sleep</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>10</span> <span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>time</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Millisecond</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#000>rw</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Close</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>go</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#ce5c00;font-weight:700>&lt;-</span><span style=color:#000>c</span><span style=color:#000;font-weight:700>..</span><span style=color:#000>Finished</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>            <span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Println</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;request process end&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}()</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GET</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;/streamWrite2&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>c</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RequestContext</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>rw</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>newChunkReader</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// Content-Length may be negative:</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// -1 means Transfer-Encoding: chunked.</span>
</span></span><span style=display:flex><span>        <span style=color:#000>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SetBodyStream</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>rw</span><span style=color:#000;font-weight:700>,</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>go</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span> <span style=color:#000;font-weight:700>&lt;</span> <span style=color:#0000cf;font-weight:700>1000</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span><span style=color:#ce5c00;font-weight:700>++</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#8f5902;font-style:italic>// For each streaming_write, the upload_file prints</span>
</span></span><span style=display:flex><span>                <span style=color:#000>rw</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Write</span><span style=color:#000;font-weight:700>([]</span><span style=color:#204a87>byte</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Sprintf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;===%d===\n&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span><span style=color:#000;font-weight:700>)))</span>
</span></span><span style=display:flex><span>                <span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Println</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>                <span style=color:#000>time</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Sleep</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>100</span> <span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>time</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Millisecond</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#000>rw</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Close</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>go</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#ce5c00;font-weight:700>&lt;-</span><span style=color:#000>c</span><span style=color:#000;font-weight:700>..</span><span style=color:#000>Finished</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>            <span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Println</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;request process end&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}()</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Spin</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>ChunkReader</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>rw</span>  <span style=color:#000>bytes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Buffer</span>
</span></span><span style=display:flex><span>    <span style=color:#000>w2r</span> <span style=color:#204a87;font-weight:700>chan</span> <span style=color:#204a87;font-weight:700>struct</span><span style=color:#000;font-weight:700>{}</span>
</span></span><span style=display:flex><span>    <span style=color:#000>r2w</span> <span style=color:#204a87;font-weight:700>chan</span> <span style=color:#204a87;font-weight:700>struct</span><span style=color:#000;font-weight:700>{}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>newChunkReader</span><span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>ChunkReader</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>rw</span> <span style=color:#000>bytes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Buffer</span>
</span></span><span style=display:flex><span>    <span style=color:#000>w2r</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87>make</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>chan</span> <span style=color:#204a87;font-weight:700>struct</span><span style=color:#000;font-weight:700>{})</span>
</span></span><span style=display:flex><span>    <span style=color:#000>r2w</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87>make</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>chan</span> <span style=color:#204a87;font-weight:700>struct</span><span style=color:#000;font-weight:700>{})</span>
</span></span><span style=display:flex><span>    <span style=color:#000>cr</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>ChunkReader</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>rw</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>w2r</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>r2w</span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>cr</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>closeOnce</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87>new</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>sync</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Once</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>cr</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>ChunkReader</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Read</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>p</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>n</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>_</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ok</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#ce5c00;font-weight:700>&lt;-</span><span style=color:#000>cr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>w2r</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>!</span><span style=color:#000>ok</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#000>closeOnce</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Do</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87>close</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>r2w</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>            <span style=color:#000>n</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>cr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>rw</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Read</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>p</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>return</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#000>n</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>cr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>rw</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Read</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>p</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#000>cr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>r2w</span> <span style=color:#ce5c00;font-weight:700>&lt;-</span> <span style=color:#204a87;font-weight:700>struct</span><span style=color:#000;font-weight:700>{}{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>n</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>0</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>continue</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>cr</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>ChunkReader</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Write</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>p</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>n</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>n</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>cr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>rw</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Write</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>p</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>cr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>w2r</span> <span style=color:#ce5c00;font-weight:700>&lt;-</span> <span style=color:#204a87;font-weight:700>struct</span><span style=color:#000;font-weight:700>{}{}</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>&lt;-</span><span style=color:#000>cr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>r2w</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>cr</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>ChunkReader</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Close</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87>close</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>w2r</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div></li><li><p>Users can use the <code>NewChunkedBodyWriter</code> method provided under <code>pkg/protocol/http1/resp/writer</code> in the handler to hijack the response writer, and then use the <code>ctx.Write</code> function to write the partitioned data to the body and immediately send it to the client using the <code>ctx.Flush</code> function.</p><p>Example Code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GET</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;/flush/chunk&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>c</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RequestContext</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Hijack the writer of response</span>
</span></span><span style=display:flex><span>	<span style=color:#000>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Response</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HijackWriter</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>resp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewChunkedBodyWriter</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Response</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetWriter</span><span style=color:#000;font-weight:700>()))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span> <span style=color:#000;font-weight:700>&lt;</span> <span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span><span style=color:#ce5c00;font-weight:700>++</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Write</span><span style=color:#000;font-weight:700>([]</span><span style=color:#204a87>byte</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Sprintf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;chunk %d: %s&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>strings</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Repeat</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;hi~&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span><span style=color:#000;font-weight:700>))))</span> <span style=color:#8f5902;font-style:italic>// nolint: errcheck</span>
</span></span><span style=display:flex><span>		<span style=color:#000>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Flush</span><span style=color:#000;font-weight:700>()</span>                                                                 <span style=color:#8f5902;font-style:italic>// nolint: errcheck</span>
</span></span><span style=display:flex><span>		<span style=color:#000>time</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Sleep</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>200</span> <span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>time</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Millisecond</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>})</span>
</span></span></code></pre></div></li></ol><p><strong>The difference between these two methods: the first method sends the data to the client in blocks after executing the handler logic, and the second method can send the partitioned data out in the handler logic.</strong></p><p>For more example code, please refer to <a href=/docs/hertz/tutorials/example/#streaming-readwrite>example</a>.</p><h2 id=register-custom-protocol>Register Custom Protocol</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>engine</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Engine</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>AddProtocol</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>protocol</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>factory</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{})</span>
</span></span></code></pre></div><p>Detailed information can be found in <a href=/docs/hertz/tutorials/framework-exten/protocol/#registration-of-custom-protocol-server-into-hertz>registration-of-custom-protocol-server-into-hertz</a>.</p><h2 id=setclientipfunc>SetClientIPFunc</h2><p>The parameter f of this function will be passed to the <code>RequestContext.SetClientIPFunc</code> function. The function and example code are shown in <a href=/docs/hertz/tutorials/basic-feature/context/request/#setclientipfunc>SetClientIPFunc</a>.</p><p>Function Signature:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>engine</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Engine</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>SetClientIPFunc</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>f</span> <span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ClientIP</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h2 id=setformvaluefunc>SetFormValueFunc</h2><p>The parameter f of this function will be passed to the <code>RequestContext.SetFormValueFunc</code> function. The function and example code are shown in <a href=/docs/hertz/tutorials/basic-feature/context/request/#setformvaluefunc>SetFormValueFunc</a>.</p><p>Function Signature:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>engine</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Engine</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>SetFormValueFunc</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>f</span> <span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FormValueFunc</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h2 id=hooks>Hooks</h2><p>Hook function is a general concept that represents the operations that accompany an event when it is triggered.</p><p>Hertz provides global Hook injection capabilities for injecting its own processing logic after service triggering and before exiting. For detailed information, please refer to <a href=/docs/hertz/tutorials/basic-feature/hooks/>Hooks</a>.</p><h2 id=panichandler>PanicHandler</h2><p>Used to set the handler function when panic occurs in the program, default to <code>nil</code>.</p><blockquote><p>Note: If both <code>PanicHandler</code> and <code>Recovery</code> middleware are set, the <code>Recovery</code> middleware will override the handler logic of <code>PanicHandler</code>.</p></blockquote><p>Example Code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>New</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// When in Panic, the function in PanicHandler will be triggered, returning a 500 status code and carrying error information</span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>PanicHandler</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>c</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RequestContext</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>JSON</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>500</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>utils</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>H</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#4e9a06>&#34;message&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;panic&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GET</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;/hello&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>c</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RequestContext</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;panic&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Spin</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=continuehandler>ContinueHandler</h2><p>Call ContinueHandler after receiving the Expect 100 Continue header sent by the client. Using ContinueHandler, the server can decide whether to read potentially large request bodies, which will be read by default.</p><p>Example Code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>h</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Default</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ContinueHandler</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>header</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>protocol</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RequestHeader</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>false</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=rendering-template>Rendering Template</h2><p>Hertz provides methods such as <code>Delims</code>, <code>SetFuncMap</code>, <code>LoadHTMLGlob</code>, and <code>LoadHTMLFiles</code> for rendering HTML or template files. For detailed information, please refer to <a href=/docs/hertz/tutorials/basic-feature/render/#html>HTML</a>.</p><h2 id=using-noroute-and-nomethod>Using NoRoute and NoMethod</h2><p>Hertz provides <code>NoRoute</code> and <code>NoMethod</code> methods for global processing of HTTP 404 and 405 requests. For detailed information, please refer to <a href=/docs/hertz/tutorials/basic-feature/route/#noroute-and-nomethod>NoRoute And NoMethod</a>.</p><h2 id=get-route-information>Get Route Information</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>engine</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Engine</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Routes</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>routes</span> <span style=color:#000>RoutesInfo</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h3 id=routes>Routes</h3><p>The <code>Routes</code> function returns a slice divided by HTTP methods that contains routing information (HTTP method name, routing path, request handler function name).</p><p>Function Signature:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>engine</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Engine</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Routes</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>routes</span> <span style=color:#000>RoutesInfo</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>Example Code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>getHandler</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HandlerFunc</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>c</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RequestContext</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>String</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>consts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StatusOK</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;get handler&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>postHandler</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HandlerFunc</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>c</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RequestContext</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>String</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>consts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StatusOK</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;post handler&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#000>h</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Default</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>	<span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GET</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;/get&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>getHandler</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>	<span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>POST</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;/post&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>postHandler</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>	<span style=color:#000>routesInfo</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Routes</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>	<span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Printf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;%v\n&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>routesInfo</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// [{GET /get main.getHandler.func1 0xb2afa0} {POST /post main.postHandler.func1 0xb2b060}]</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=transporter>Transporter</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>engine</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Engine</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>GetTransporterName</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>tName</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>SetTransporter</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>transporter</span> <span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>options</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>config</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Options</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>network</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Transporter</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h3 id=gettransportername>GetTransporterName</h3><p>Obtain the name of the currently used network library, which now has two native options: <code>go net</code> and <code>netpoll</code>.</p><p>Linux uses <code>netpoll</code> by default, while Windows can only use <code>go net</code>.</p><p>If you have any doubts about how to use the corresponding network library, please refer to <a href=/docs/hertz/tutorials/basic-feature/network-lib/>here</a>.</p><p>Function Signature:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>engine</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Engine</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>GetTransporterName</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>tName</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>Example Code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>h</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>New</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000>tName</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetTransporterName</span><span style=color:#000;font-weight:700>()</span>
</span></span></code></pre></div><h3 id=settransporter>SetTransporter</h3><p><code>SetTransporter</code> is used to set network library.</p><blockquote><p>Note: <code>SetTransporter</code> only sets the global default values of the Engine, so using <code>WithTransporter</code> to set the network library when initializing the Engine will overwrite the settings of <code>SetTransporter</code>.</p></blockquote><p>Function Signature:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>SetTransporter</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>transporter</span> <span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>options</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>config</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Options</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>network</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Transporter</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>Example Code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>route</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SetTransporter</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>standard</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewTransporter</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h2 id=tracing>Tracing</h2><p>Hertz provides the capability of link tracking and also supports user-defined link tracking. For details, please refer to <a href=/docs/hertz/tutorials/observability/tracing/>tracking</a>.</p><h2 id=hijack>Hijack</h2><h3 id=nohijackconnpool>NoHijackConnPool</h3><blockquote><p>The hijacked connection used during Hertz connection hijacking is managed by pool management. Therefore, when the hijacked connection is used for websockets it does not support asynchronous operations.</p></blockquote><p>The hijacked connection can only be closed once; closing it a second time will result in a null pointer exception.</p><p>NoHijackConnPool controls whether to use cache pools to obtain/release hijacked connections. Using pools improves performance of memory resource allocation but cannot prevent exceptions caused by closing connections twice.</p><p>If it is difficult to ensure that hijackConn won&rsquo;t be closed repeatedly, it can be set as true.</p><p>Example Code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// https://github.com/cloudwego/hertz/issues/121</span>
</span></span><span style=display:flex><span>    <span style=color:#000>h</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NoHijackConnPool</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=hijackconnhandle>HijackConnHandle</h3><p>Set the Hijack connection processing function.</p><p>Function Signature:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>engine</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Engine</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>HijackConnHandle</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>c</span> <span style=color:#000>network</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Conn</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>h</span> <span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HijackHandler</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p></div><script>const yesButton=document.querySelector(".feedback--answer-yes"),noButton=document.querySelector(".feedback--answer-no"),yesResponse=document.querySelector(".feedback--response-yes"),noResponse=document.querySelector(".feedback--response-no"),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=e=>{if(typeof ga!="function")return;const t={command:"send",hitType:"event",category:"Helpful",action:"click",label:window.location.pathname,value:e};ga(t.command,t.hitType,t.category,t.action,t.label,t.value)};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(1)}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(0)})</script><br><div class="text-muted mt-5 pt-3 border-top">Last modified
March 7, 2025
: <a href=https://github.com/cloudwego/cloudwego.github.io/commit/590388601ba4c26232b5ba3dcdef1bb571867ba4>doc: update plugin install guide (#1272) (5903886)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Lark aria-label=Lark><a class=text-white target=_blank rel=noopener href="https://applink.feishu.cn/client/chat/chatter/add_by_link?link_token=693v2544-2664-4421-b50f-7f1912p745r6" aria-label=Lark><img src=/webfonts/lark.svg alt style=width:26px;line-height:32.5px;margin-bottom:6px;fill:#fff></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/CloudWeGo aria-label=Twitter><img src=/webfonts/x-twitter.svg alt style=width:26px;line-height:32.5px;margin-bottom:6px;fill:#fff></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/cloudwego aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Discord aria-label=Discord><a class=text-white target=_blank rel=noopener href=https://discord.gg/jceZSE7DsW aria-label=Discord><i class="fab fa-discord"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2025 The CloudWeGo Authors</small><p class="mt-2 text-white"><a class=cloudwego-link href=/about/ target=_blank rel=noopener>About</a>
|
<a class=cloudwego-link href=https://github.com/cloudwego/cloudwego.github.io/blob/main/LICENSE target=_blank rel=noopener>License</a></p></div></div></div></footer></div><script src=/js/popper.min.js></script><script src=/js/bootstrap.min.js></script><script src=/js/main.min.9a8648b987db06195f5768f0d7516e8df7c27669e91e383e25c5d07cd6325605.js integrity="sha256-moZIuYfbBhlfV2jw11FujffCdmnpHjg+JcXQfNYyVgU=" crossorigin=anonymous></script><script src=/js/prism.js></script><script src=/js/prism-custom.js></script><script src=/js/tabpane-persist.js></script><script src=/js/docsearch.js></script><script type=text/javascript>let siteLang=window.location.pathname.startsWith("/zh/")?"zh":"en";docsearch({appId:"V7I042F992",apiKey:"8380a7ac88106841cb43fb000fa2edb4",indexName:"cloudwego",container:"#docsearch",searchParameters:{hitsPerPage:5,facetFilters:[`lang:${siteLang}`]},transformItems(e){return e.map(e=>({...e,url:e.url.replace("www.cloudwego.io",location.host).replace("https:",location.protocol)}))}})</script><script src=/js/outbound-link.js></script><script src=/js/navScroll.js></script></body></html>