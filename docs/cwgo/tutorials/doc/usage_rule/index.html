<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.142.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>usage rule | CloudWeGo</title>
<meta name=description content="A leading practice for building enterprise cloud native middleware!"><meta property="og:url" content="https://www.cloudwego.io/docs/cwgo/tutorials/doc/usage_rule/"><meta property="og:site_name" content="CloudWeGo"><meta property="og:title" content="usage rule"><meta property="og:description" content="Thrift Supported data types The set in mongodb corresponds to the struct in thrift.
The struct field supports all basic data types, container types (list, map, set), binary, enumeration types (both in file and out of file references are supported), struct types (both in file and out of file references are supported), and legal combinations of the above types in thrift.
Supported naming conventions Struct and various fields can be named using either the Big Camel Naming Method or the Snake Naming Method."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2025-03-07T17:25:05+08:00"><meta itemprop=name content="usage rule"><meta itemprop=description content="Thrift Supported data types The set in mongodb corresponds to the struct in thrift.
The struct field supports all basic data types, container types (list, map, set), binary, enumeration types (both in file and out of file references are supported), struct types (both in file and out of file references are supported), and legal combinations of the above types in thrift.
Supported naming conventions Struct and various fields can be named using either the Big Camel Naming Method or the Snake Naming Method."><meta itemprop=dateModified content="2025-03-07T17:25:05+08:00"><meta itemprop=wordCount content="1565"><meta name=twitter:card content="summary"><meta name=twitter:title content="usage rule"><meta name=twitter:description content="Thrift Supported data types The set in mongodb corresponds to the struct in thrift.
The struct field supports all basic data types, container types (list, map, set), binary, enumeration types (both in file and out of file references are supported), struct types (both in file and out of file references are supported), and legal combinations of the above types in thrift.
Supported naming conventions Struct and various fields can be named using either the Big Camel Naming Method or the Snake Naming Method."><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYWRQRLPRM"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QYWRQRLPRM")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?f1808c42af827f368aa7eca3baae6d55",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=preload href=/scss/main.min.b3c21c777309e05201dd625b8a4ece4076249bfa52b71d58c6e352d84c6c0320.css as=style><link href=/scss/main.min.b3c21c777309e05201dd625b8a4ece4076249bfa52b71d58c6e352d84c6c0320.css rel=stylesheet integrity><script src=/js/jquery.min.js></script><link rel=stylesheet href=/css/prism.css><link rel=stylesheet href=/css/docsearch.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYWRQRLPRM"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QYWRQRLPRM")}</script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand-xl navbar-dark td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><img src=/img/logo.png></span>
</a><button class=navbar-toggler type=button data-toggle=collapse data-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0 ml-auto"><li class="dropdown sub-menu active"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Documentation</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/kitex/>Kitex</a>
<a class=dropdown-item href=/docs/hertz/>Hertz</a>
<a class=dropdown-item href=/docs/volo/>Volo</a>
<a class=dropdown-item href=/docs/netpoll/>Netpoll</a>
<a class=dropdown-item href=/docs/cwgo/>Cwgo</a>
<a class=dropdown-item href=/docs/eino/>Eino</a>
<a class=dropdown-item href=/docs/monolake/>Monolake</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/cooperation/><span>Cooperation</span></a></li><li class="dropdown sub-menu"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Security</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/security/safety-bulletin/>safety-bulletin</a>
<a class=dropdown-item href=/security/vulnerability-reporting/>vulnerability-reporting</a></div></li><li class="nav-item dropdown mr-4"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/cwgo/tutorials/doc/usage_rule/>中文</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><div id=docsearch></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><div id=docsearch></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/cwgo/tutorials/doc/usage_rule/>中文</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docscwgo-li><input type=checkbox id=m-docscwgo-check checked>
<label for=m-docscwgo-check><a href=/docs/cwgo/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscwgo><span>Cwgo</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgooverview-li><input type=checkbox id=m-docscwgooverview-check checked>
<label for=m-docscwgooverview-check><a href=/docs/cwgo/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscwgooverview><span>Overview</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgogetting-started-li><input type=checkbox id=m-docscwgogetting-started-check checked>
<label for=m-docscwgogetting-started-check><a href=/docs/cwgo/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscwgogetting-started><span>Getting Started</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docscwgotutorials-li><input type=checkbox id=m-docscwgotutorials-check checked>
<label for=m-docscwgotutorials-check><a href=/docs/cwgo/tutorials/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscwgotutorials><span>Tutorials</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialscli-li><input type=checkbox id=m-docscwgotutorialscli-check>
<label for=m-docscwgotutorialscli-check><a href=/docs/cwgo/tutorials/cli/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscwgotutorialscli><span>CLI</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialstemplete-extension-li><input type=checkbox id=m-docscwgotutorialstemplete-extension-check>
<label for=m-docscwgotutorialstemplete-extension-check><a href=/docs/cwgo/tutorials/templete-extension/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscwgotutorialstemplete-extension><span>Template Extension</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialslayout-li><input type=checkbox id=m-docscwgotutorialslayout-check>
<label for=m-docscwgotutorialslayout-check><a href=/docs/cwgo/tutorials/layout/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscwgotutorialslayout><span>Layout</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscwgotutorialsclient-li><input type=checkbox id=m-docscwgotutorialsclient-check>
<label for=m-docscwgotutorialsclient-check><a href=/docs/cwgo/tutorials/client/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscwgotutorialsclient><span>Client</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialsclientcommand-li><input type=checkbox id=m-docscwgotutorialsclientcommand-check>
<label for=m-docscwgotutorialsclientcommand-check><a href=/docs/cwgo/tutorials/client/command/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscwgotutorialsclientcommand><span>commands</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialsclientexample_thrift-li><input type=checkbox id=m-docscwgotutorialsclientexample_thrift-check>
<label for=m-docscwgotutorialsclientexample_thrift-check><a href=/docs/cwgo/tutorials/client/example_thrift/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscwgotutorialsclientexample_thrift><span>thrift usage</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialsclientexample_pb-li><input type=checkbox id=m-docscwgotutorialsclientexample_pb-check>
<label for=m-docscwgotutorialsclientexample_pb-check><a href=/docs/cwgo/tutorials/client/example_pb/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscwgotutorialsclientexample_pb><span>protobuf usage</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialsdb-li><input type=checkbox id=m-docscwgotutorialsdb-check>
<label for=m-docscwgotutorialsdb-check><a href=/docs/cwgo/tutorials/db/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscwgotutorialsdb><span>DB</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docscwgotutorialsdoc-li><input type=checkbox id=m-docscwgotutorialsdoc-check checked>
<label for=m-docscwgotutorialsdoc-check><a href=/docs/cwgo/tutorials/doc/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscwgotutorialsdoc><span>Doc</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialsdoccommands-li><input type=checkbox id=m-docscwgotutorialsdoccommands-check>
<label for=m-docscwgotutorialsdoccommands-check><a href=/docs/cwgo/tutorials/doc/commands/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscwgotutorialsdoccommands><span>commands</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docscwgotutorialsdocusage_rule-li><input type=checkbox id=m-docscwgotutorialsdocusage_rule-check checked>
<label for=m-docscwgotutorialsdocusage_rule-check><a href=/docs/cwgo/tutorials/doc/usage_rule/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docscwgotutorialsdocusage_rule><span class=td-sidebar-nav-active-item>usage rule</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialsdoclayout-li><input type=checkbox id=m-docscwgotutorialsdoclayout-check>
<label for=m-docscwgotutorialsdoclayout-check><a href=/docs/cwgo/tutorials/doc/layout/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscwgotutorialsdoclayout><span>layout</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialsdocexample_thrift-li><input type=checkbox id=m-docscwgotutorialsdocexample_thrift-check>
<label for=m-docscwgotutorialsdocexample_thrift-check><a href=/docs/cwgo/tutorials/doc/example_thrift/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscwgotutorialsdocexample_thrift><span>thrift usage</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialsdocexample_pb-li><input type=checkbox id=m-docscwgotutorialsdocexample_pb-check>
<label for=m-docscwgotutorialsdocexample_pb-check><a href=/docs/cwgo/tutorials/doc/example_pb/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscwgotutorialsdocexample_pb><span>protobuf usage</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscwgotutorialsserver-li><input type=checkbox id=m-docscwgotutorialsserver-check>
<label for=m-docscwgotutorialsserver-check><a href=/docs/cwgo/tutorials/server/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscwgotutorialsserver><span>Server</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialsservercommand-li><input type=checkbox id=m-docscwgotutorialsservercommand-check>
<label for=m-docscwgotutorialsservercommand-check><a href=/docs/cwgo/tutorials/server/command/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscwgotutorialsservercommand><span>commands</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialsserverexample_thrift-li><input type=checkbox id=m-docscwgotutorialsserverexample_thrift-check>
<label for=m-docscwgotutorialsserverexample_thrift-check><a href=/docs/cwgo/tutorials/server/example_thrift/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscwgotutorialsserverexample_thrift><span>thrift usage</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialsserverexample_pb-li><input type=checkbox id=m-docscwgotutorialsserverexample_pb-check>
<label for=m-docscwgotutorialsserverexample_pb-check><a href=/docs/cwgo/tutorials/server/example_pb/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscwgotutorialsserverexample_pb><span>protobuf usage</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscwgotutorialsapi-list-li><input type=checkbox id=m-docscwgotutorialsapi-list-check>
<label for=m-docscwgotutorialsapi-list-check><a href=/docs/cwgo/tutorials/api-list/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscwgotutorialsapi-list><span>api-list</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialsapi-listcommands-li><input type=checkbox id=m-docscwgotutorialsapi-listcommands-check>
<label for=m-docscwgotutorialsapi-listcommands-check><a href=/docs/cwgo/tutorials/api-list/commands/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscwgotutorialsapi-listcommands><span>commands</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialsapi-listexample-li><input type=checkbox id=m-docscwgotutorialsapi-listexample-check>
<label for=m-docscwgotutorialsapi-listexample-check><a href=/docs/cwgo/tutorials/api-list/example/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscwgotutorialsapi-listexample><span>usage</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialsapi-listcautions-li><input type=checkbox id=m-docscwgotutorialsapi-listcautions-check>
<label for=m-docscwgotutorialsapi-listcautions-check><a href=/docs/cwgo/tutorials/api-list/cautions/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscwgotutorialsapi-listcautions><span>cautions</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialsauto-completion-li><input type=checkbox id=m-docscwgotutorialsauto-completion-check>
<label for=m-docscwgotutorialsauto-completion-check><a href=/docs/cwgo/tutorials/auto-completion/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscwgotutorialsauto-completion><span>auto-completion</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscwgotutorialsfallback-li><input type=checkbox id=m-docscwgotutorialsfallback-check>
<label for=m-docscwgotutorialsfallback-check><a href=/docs/cwgo/tutorials/fallback/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscwgotutorialsfallback><span>Fallback</span></a></label></li></ul></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/cloudwego/cloudwego.github.io/edit/main/content/en//docs/cwgo/tutorials/doc/usage_rule target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/new/main/content/en//docs/cwgo/tutorials/doc/usage_rule?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/issues/new?labels=bug&amp;template=DOCS_UPDATE.md&amp;title=usage%20rule" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/cloudwego/cwgo/issues/new/choose target=_blank><i class="fas fa-tasks fa-fw"></i> Create project issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#thrift>Thrift</a><ul><li><a href=#supported-data-types>Supported data types</a></li><li><a href=#supported-naming-conventions>Supported naming conventions</a></li><li><a href=#add-mongodb-tag>Add Mongodb tag</a></li><li><a href=#add-mongodb-curd-function>Add Mongodb curd function</a></li></ul></li><li><a href=#protobuf>Protobuf</a><ul><li><a href=#supported-data-types-1>Supported data types</a></li><li><a href=#supported-naming-conventions-1>Supported naming conventions</a></li><li><a href=#add-mongodb-tag-1>Add Mongodb tag</a></li><li><a href=#add-mongodb-curd-function-1>Add Mongodb curd function</a></li></ul></li><li><a href=#usage-rule>Usage Rule</a><ul><li><a href=#insert>Insert</a></li><li><a href=#find>Find</a></li><li><a href=#update>Update</a></li><li><a href=#delete>Delete</a></li><li><a href=#count>Count</a></li><li><a href=#bulk>Bulk</a></li><li><a href=#transaction>Transaction</a></li></ul></li><li><a href=#keywords>Keywords</a></li><li><a href=#update-1>Update</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/>Documentation</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/cwgo/>Cwgo</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/cwgo/tutorials/>Tutorials</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/cwgo/tutorials/doc/>Doc</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://www.cloudwego.io/docs/cwgo/tutorials/doc/usage_rule/>usage rule</a></li></ol></nav><div class=td-content><h1>usage rule</h1><header class=article-meta></header><h2 id=thrift>Thrift</h2><h3 id=supported-data-types>Supported data types</h3><p>The set in mongodb corresponds to the struct in thrift.</p><p>The struct field supports all basic data types, container types (list, map, set), binary, enumeration types (both in file and out of file references are supported), struct types (both in file and out of file references are supported), and legal combinations of the above types in thrift.</p><h3 id=supported-naming-conventions>Supported naming conventions</h3><p>Struct and various fields can be named using either the <strong>Big Camel Naming Method</strong> or the <strong>Snake Naming Method</strong>.</p><h3 id=add-mongodb-tag>Add Mongodb tag</h3><p>Add tags using <strong>annotations</strong>.</p><p>format: <code>(go.tag="bson:\"{field_name}{,omitempty}(Choose whether to add as needed)\"")</code></p><p>example: <code>(go.tag="bson:\"id,omitempty\"")</code> or <code>(go.tag="bson:\"id\"")</code></p><h3 id=add-mongodb-curd-function>Add Mongodb curd function</h3><p>Add functions using <strong>annotations</strong>.</p><p>format: <code>mongo.{Parse the function name used} = "{The actual function name used}({input params...}) (returns...)"</code></p><p>example: <code>mongo.InsertOne = "InsertUser(ctx context.Context, user *user.User) (interface{}, error)"</code></p><p>For specific rules, please refer to <a href=/docs/cwgo/tutorials/doc/usage_rule/#usage-rule>usage rule</a>.</p><h2 id=protobuf>Protobuf</h2><h3 id=supported-data-types-1>Supported data types</h3><p>The set in mongodb corresponds to the message in protobuf.</p><p>The message field supports all basic data types in proto, keywords such as repeated, bytes, enumeration types (both in file and out of file references are supported), message types (both in file and out of file references are supported), and legal combinations of the above types.</p><h3 id=supported-naming-conventions-1>Supported naming conventions</h3><p>Message and various fields can be named using either the <strong>Big Camel Naming Method</strong> or the <strong>Snake Naming Method</strong>.</p><h3 id=add-mongodb-tag-1>Add Mongodb tag</h3><p>Add tags using <strong>comments</strong>.</p><p>format: <code>// go.tag=|bson:"{field_name}{,omitempty}(Choose whether to add as needed)"|</code></p><p>example: <code>// go.tag=|bson:"id,omitempty"|</code> or <code>// go.tag=|bson:"id"|</code></p><h3 id=add-mongodb-curd-function-1>Add Mongodb curd function</h3><p>Add functions using <strong>comments</strong>.</p><p>format: <code>// mongo.{Parse the function name used} = |{The actual function name used}({input params...}) (returns...)|</code></p><p>example: <code>// mongo.InsertOne = |InsertUser(ctx context.Context, user *user.User) (interface{}, error)|</code></p><p>For specific rules, please refer to <a href=/docs/cwgo/tutorials/doc/usage_rule/#usage-rule>usage rule</a>.</p><h2 id=usage-rule>Usage Rule</h2><p>The function name adopts a <strong>camel shaped naming</strong>, with the <strong>first letter capitalized</strong>, and the first word must be one of the following:</p><ul><li><strong>Insert</strong></li><li><strong>Find</strong></li><li><strong>Update</strong></li><li><strong>Delete</strong></li><li><strong>Count</strong></li><li><strong>Bulk</strong></li><li><strong>Transaction</strong></li></ul><p>Divide all operations into two categories: <strong>acting on a single document</strong> and <strong>acting on multiple documents</strong>. The specific judgment is determined by the combination of <strong>passed in parameters</strong> and <strong>return values</strong>.</p><h3 id=insert>Insert</h3><p>The <code>Insert</code> operation only has two options: <strong>insert a single document</strong> and <strong>insert multiple documents</strong>, which are determined by both the incoming parameters and the return value.</p><p><strong>Function Naming</strong>: The first word is <code>Insert</code>, and the rest can be defined arbitrarily.</p><p><strong>Input Params</strong>: Fix two,<code>(ctx(fix), structure pointer or structure pointer slice)</code></p><p><strong>Returns</strong>: Fix two, <code>(interface{} or []interface{}, error(fix))</code></p><h3 id=find>Find</h3><p>The <code>Find</code> operation includes two types: <strong>single entity</strong> and <strong>multiple entities</strong>, determined by the return value. The return value is a pointer slice, which is a single entity operation. Otherwise, it is a multiple entity operation.</p><p><strong>Function Naming</strong>: The first word is <code>Find</code>, followed by the following rules: <code>Find{The field names you want to obtain, if not, obtain all of them}{Sort and page operations, if not, do not add}By{Query condition}/All(No Query Condition)</code></p><p><strong>Input Params</strong>: The first parameter is fixed as <code>ctx</code>, and the following parameters are passed in order based on the comparison conditions.</p><p><strong>Returns</strong>: Fix two, <code>(structure pointer or structure pointer slice, error(fix))</code></p><p><strong>Example</strong>: <code>Find Name OrderbyNameSkipLimit By GenderEqualOrAgeGreaterThan</code></p><ul><li><p><strong>Field Name</strong>：Corresponding structural field names in go</p><p>If there is a nested structure, the field name format is: {Field name of the child structure in the parent structure}{Specific field name in the child structure}. For example, if User nested Video and wants to find the Id field of the Video, it is: VideoId</p></li><li><p><strong>Sorting and pagination operations</strong></p></li></ul><table><thead><tr><th>Format</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td><strong>Orderby</strong>{thrift field names 123&mldr;}</td><td>By default, it is for field ascending. If a field has a descending requirement, add Desc after the field (only applicable to a single field, if there is a requirement for multiple descending fields, Desc needs to be added after each field), for example, OrderbyName (ascending) AgeDesc (descending) <strong>Entering parameters without passing values</strong></td><td><code>FindUsernameOrderbyIdUsernameSkipLimitAll</code>(including two fields &ldquo;Id&rdquo; and &ldquo;Username&rdquo;)</td></tr><tr><td><strong>Skip</strong></td><td>Skip number of documents <strong>Enter an integer as an input parameter</strong></td><td><code>FindUsernameOrderbyIdUsernameSkipLimitAll</code>(Skip document)</td></tr><tr><td><strong>Limit</strong></td><td>Limit the number of documents to be queried <strong>Single entity operations are not supported, Enter an integer as an input parameter</strong></td><td><code>FindUsernameOrderbyIdUsernameSkipLimitAll</code>(Limit the number of queried documents)</td></tr></tbody></table><ul><li><p><strong>Query Condition</strong></p><p>Start with <code>By</code> or <code>All</code>, followed <code>By</code> specific query conditions, and <code>All</code> does not need to be followed by conditions</p><p><code>By</code> must be followed by specific fields and comparison conditions. If necessary, use <code>And</code> or <code>Or</code> to identify the And Or condition and connect each field and comparison condition. When using the <code>And</code> or <code>Or</code> connector, if it is necessary to indicate query priority, use <code>Lb</code> or <code>Rb</code> to identify sub connection conditions. For example: <code>ByLbLbUsernameEqualOrUsernameEqualRbAndAgeGreaterThanRb</code> == <code>By((UsernameEqualOrUsernameEqual)AndAgeGreaterThan)</code></p></li><li><p><strong>Grammar Format</strong>：<code>By{Field Name}{Query Condition}{And/Or}{Field Name}{Query Condition}</code></p></li><li><p><strong>Compare Condition</strong>：</p></li></ul><table><thead><tr><th style=text-align:left><strong>关键词</strong></th><th style=text-align:left><strong>Description</strong></th><th style=text-align:left><strong>Input param value</strong></th></tr></thead><tbody><tr><td style=text-align:left><strong>Equal</strong></td><td style=text-align:left>Equal</td><td style=text-align:left>The value of this field</td></tr><tr><td style=text-align:left><strong>NotEqual</strong></td><td style=text-align:left>NotEqual</td><td style=text-align:left>The value of this field</td></tr><tr><td style=text-align:left><strong>LessThan</strong></td><td style=text-align:left>LessThan</td><td style=text-align:left>The value of this field</td></tr><tr><td style=text-align:left><strong>LessThanEqual</strong></td><td style=text-align:left>LessThanEqual</td><td style=text-align:left>The value of this field</td></tr><tr><td style=text-align:left><strong>GreaterThan</strong></td><td style=text-align:left>GreaterThan</td><td style=text-align:left>The value of this field</td></tr><tr><td style=text-align:left><strong>GreaterThanEqual</strong></td><td style=text-align:left>GreaterThanEqual</td><td style=text-align:left>The value of this field</td></tr><tr><td style=text-align:left><strong>Between</strong></td><td style=text-align:left>[a,b]</td><td style=text-align:left>The value of this field</td></tr><tr><td style=text-align:left><strong>NotBetween</strong></td><td style=text-align:left>&lt;a && >b</td><td style=text-align:left>The value of this field</td></tr><tr><td style=text-align:left><strong>In</strong></td><td style=text-align:left>Field value within the slice range</td><td style=text-align:left>slice</td></tr><tr><td style=text-align:left><strong>NotIn</strong></td><td style=text-align:left>Field value is not within the slice range</td><td style=text-align:left>slice</td></tr><tr><td style=text-align:left><strong>True</strong></td><td style=text-align:left>Is the field value true</td><td style=text-align:left>-</td></tr><tr><td style=text-align:left><strong>False</strong></td><td style=text-align:left>Is the field value false</td><td style=text-align:left>-</td></tr><tr><td style=text-align:left><strong>Exists</strong></td><td style=text-align:left>Specify the document in which the field exists</td><td style=text-align:left>-</td></tr><tr><td style=text-align:left><strong>NotExists</strong></td><td style=text-align:left>Documents with specified fields that do not exist</td><td style=text-align:left>-</td></tr></tbody></table><h3 id=update>Update</h3><p>The <code>Update</code> operation includes two types: <strong>single entity</strong> and <strong>multiple entities</strong>, which are determined by the return value. The return value is bool, indicating whether the single entity operation is successful; The return value is int, which represents a multi entity operation and the number of successful updates.</p><p>The Update operation is divided into two types based on the perspective of updating objects:</p><ul><li><p><strong>Update the entire document</strong>(No field added after Update, structure pointer needs to be passed in);</p></li><li><p><strong>Update some fields</strong>(Add a field name after Update and pass in the updated field value).</p></li></ul><p><strong>Function Naming</strong>:
The first word is Update, followed by the following rules:</p><p><code>Update(Upsert){The name of the field to be updated, if not, it will be updated as the entire structure, and a structure pointer needs to be passed in}By{Query Condition}/All(No Query Condition)</code> The query conditions are the same as Find.</p><blockquote><p>The update operation currently only supports the use of $set.</p></blockquote><p><strong>Input Params</strong>: The first parameter is fixed as <code>ctx</code>, and the following parameters are passed in order based on the updated field name and comparison criteria.</p><p><strong>Returns</strong>: Fix two, <code>(bool or int, error(fix))</code></p><h3 id=delete>Delete</h3><p>The <code>Delete</code> operation includes two types: <strong>single entity</strong> and <strong>multiple entities</strong>, and the judgment method is the same as <code>Update</code>.</p><p><strong>Function Naming</strong>:</p><p><code>DeleteBy{Query Condition}/All(No Query Condition)</code> The query conditions are the same as Find</p><p><strong>Input Params</strong>: The first parameter is fixed as <code>ctx</code>, and the following parameters can be passed in order based on the comparison conditions.</p><p><strong>Returns</strong>: Fix two, <code>(bool or int, error(fix))</code></p><h3 id=count>Count</h3><p>Only multi entity operations.</p><p><strong>Function Naming</strong>:</p><p><code>CountBy{Query Condition}/All(No Query Condition)</code> The query conditions are the same as Find.</p><p><strong>Input Params</strong>: The first parameter is fixed as <code>ctx</code>, and the following parameters can be passed in order based on the comparison conditions.</p><p><strong>Returns</strong>: Fix <code>(int, error)</code></p><h3 id=bulk>Bulk</h3><p><code>Bulk</code> supports <code>Insert</code>, <code>Update</code>, <code>Delete</code> Operation</p><blockquote><p>Among them, Insert only supports InsertOne, while the other two operations, One and Many are all supported.</p></blockquote><blockquote><p>Insert fixed write InsertOne, Update, Delete needs to specify whether it is a single entity operation or a multi entity operation, with One or Many added after it,
Example: UpdateOne UpdateMany</p></blockquote><p><strong>Function Naming</strong>:</p><p><code>Bulk{Operation1, example InsertOne}{Operation2, example DeleteOneAll}</code></p><p><strong>Input Params</strong>: The first one is fixed as <code>ctx</code>, and the following parameters are passed in the order of the parameters passed in each operation.</p><p><strong>Returns</strong>: Fix <code>(*mongo.BulkWriteResult, error)</code></p><h3 id=transaction>Transaction</h3><p><code>Transaction</code> supports <code>Insert</code>, <code>Update</code>, <code>Delete</code>, <code>Bulk</code> operation, and support transaction operations for multiple collections.</p><blockquote><p>Insert, Update, and Delete all support One Many, and it is necessary to specify whether a single entity operation or a multi entity operation is required, such as InsertOne and InsertMany; The bulk operation needs to be marked with Lb and Rb to start and end, for example: <code>BulkLbInsertOneUpdateManyByIdEqualRb</code>.</p></blockquote><p>If using operations from other sets, you need to add the Collection keyword and the parameter&rsquo;s camel hump naming capitalization before the Insert, Update, Delete, and Bulk operations, and pass in the corresponding collection parameters after the client in sequence (parameter naming requirements: camel hump naming, lowercase first letter)</p><p>For example: <code>CollectionUserCollectionInsertMany</code>, input param: <code>userCollection *mongo.Collection</code>; If the operation of this collection is used, there is no need to add Collection and related parameters.</p><p><strong>Function Naming</strong>:</p><p><code>Transaction{Operation1, example CollectionUserCollectionInsertMany}{Operation2, example UpdateOneByAgeEqual}</code></p><p><strong>Input Params</strong>: The first block is fixed as <code>ctx</code>, the second block is fixed as <code>client</code>, and the third block is fixed as other sets used. The following parameters are passed in the order in which they are passed in for each operation.</p><p><strong>Returns</strong>: Fix <code>error</code></p><h2 id=keywords>Keywords</h2><blockquote><p>When naming structure fields, do not include the following keywords:</p></blockquote><ul><li><strong>Insert</strong></li><li><strong>Find</strong></li><li><strong>Update</strong></li><li><strong>Delete</strong></li><li><strong>Count</strong></li><li><strong>Bulk</strong></li><li><strong>Transaction</strong></li><li><strong>Collection</strong></li><li><strong>Lb</strong></li><li><strong>Rb</strong></li><li><strong>One</strong></li><li><strong>Many</strong></li><li><strong>By</strong></li><li><strong>All</strong></li><li><strong>Orderby</strong></li><li><strong>Skip</strong></li><li><strong>Limit</strong></li><li><strong>Equal</strong></li><li><strong>NotEqual</strong></li><li><strong>LessThan</strong></li><li><strong>LessThanEqual</strong></li><li><strong>GreaterThan</strong></li><li><strong>GreaterThanEqual</strong></li><li><strong>Between</strong></li><li><strong>NotBetween</strong></li><li><strong>In</strong></li><li><strong>NotIn</strong></li><li><strong>True</strong></li><li><strong>False</strong></li><li><strong>Exists</strong></li><li><strong>NotExists</strong></li></ul><h2 id=update-1>Update</h2><p>When there is an update to a field or function, the behavior of the tool is to compare the function name read in the annotation with the function name generated in the code file. If there is an annotation in the code file that is not present, append it after the file, and leave the rest unchanged.</p><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p></div><script>const yesButton=document.querySelector(".feedback--answer-yes"),noButton=document.querySelector(".feedback--answer-no"),yesResponse=document.querySelector(".feedback--response-yes"),noResponse=document.querySelector(".feedback--response-no"),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=e=>{if(typeof ga!="function")return;const t={command:"send",hitType:"event",category:"Helpful",action:"click",label:window.location.pathname,value:e};ga(t.command,t.hitType,t.category,t.action,t.label,t.value)};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(1)}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(0)})</script><br><div class="text-muted mt-5 pt-3 border-top">Last modified
March 7, 2025
: <a href=https://github.com/cloudwego/cloudwego.github.io/commit/590388601ba4c26232b5ba3dcdef1bb571867ba4>doc: update plugin install guide (#1272) (5903886)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Lark aria-label=Lark><a class=text-white target=_blank rel=noopener href="https://applink.feishu.cn/client/chat/chatter/add_by_link?link_token=693v2544-2664-4421-b50f-7f1912p745r6" aria-label=Lark><img src=/webfonts/lark.svg alt style=width:26px;line-height:32.5px;margin-bottom:6px;fill:#fff></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/CloudWeGo aria-label=Twitter><img src=/webfonts/x-twitter.svg alt style=width:26px;line-height:32.5px;margin-bottom:6px;fill:#fff></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/cloudwego aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Discord aria-label=Discord><a class=text-white target=_blank rel=noopener href=https://discord.gg/jceZSE7DsW aria-label=Discord><i class="fab fa-discord"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2025 The CloudWeGo Authors</small><p class="mt-2 text-white"><a class=cloudwego-link href=/about/ target=_blank rel=noopener>About</a>
|
<a class=cloudwego-link href=https://github.com/cloudwego/cloudwego.github.io/blob/main/LICENSE target=_blank rel=noopener>License</a></p></div></div></div></footer></div><script src=/js/popper.min.js></script><script src=/js/bootstrap.min.js></script><script src=/js/main.min.9a8648b987db06195f5768f0d7516e8df7c27669e91e383e25c5d07cd6325605.js integrity="sha256-moZIuYfbBhlfV2jw11FujffCdmnpHjg+JcXQfNYyVgU=" crossorigin=anonymous></script><script src=/js/prism.js></script><script src=/js/prism-custom.js></script><script src=/js/tabpane-persist.js></script><script src=/js/docsearch.js></script><script type=text/javascript>let siteLang=window.location.pathname.startsWith("/zh/")?"zh":"en";docsearch({appId:"V7I042F992",apiKey:"8380a7ac88106841cb43fb000fa2edb4",indexName:"cloudwego",container:"#docsearch",searchParameters:{hitsPerPage:5,facetFilters:[`lang:${siteLang}`]},transformItems(e){return e.map(e=>({...e,url:e.url.replace("www.cloudwego.io",location.host).replace("https:",location.protocol)}))}})</script><script src=/js/outbound-link.js></script><script src=/js/navScroll.js></script></body></html>