<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.142.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Eino: Workflow Orchestration Framework | CloudWeGo</title>
<meta name=description content="A leading practice for building enterprise cloud native middleware!"><meta property="og:url" content="https://www.cloudwego.io/docs/eino/core_modules/chain_and_graph_orchestration/workflow_orchestration_framework/"><meta property="og:site_name" content="CloudWeGo"><meta property="og:title" content="Eino: Workflow Orchestration Framework"><meta property="og:description" content="What is Eino Workflow? is a set of orchestrated APIs that are at the same architectural level as the Graph API:
The essential characteristics are:
has the same level of capabilities as Graph API, and both are suitable framework tools for orchestrating the “information flow around large models”. Remains consistent in aspects such as node type, stream processing, callback, option, state, interrupt & checkpoint. Implementing the AnyGraph interface allows it to be added as a subgraph to the parent Graph/Chain/Workflow when AddGraphNode is called. can also add other Graph/Chain/Workflow as its own subgraph. Field-level mapping capability: The input of a node can be composed of any combination of output fields from any predecessor nodes. Natively supports struct, map, and mutual mapping between structs and maps at any nested level. Separation of control flow and data flow: The Edge in a Graph determines both the execution order and data transfer. In a Workflow, they can be transferred together or separately. Loops (i.e., loops similar to react agent’s chatmodel->toolsNode->chatmodel) are not supported. NodeTriggerMode is fixed to AllPredecessor. Why use Workflow Flexible input and output types For example, if you need to arrange two lambda nodes, each containing two “existing business functions f1, f2”, the input and output types are specific Structs that conform to the business scenario and are different from each other:"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2025-08-07T00:00:00+00:00"><meta property="article:modified_time" content="2025-08-22T16:24:33+08:00"><meta itemprop=name content="Eino: Workflow Orchestration Framework"><meta itemprop=description content="What is Eino Workflow? is a set of orchestrated APIs that are at the same architectural level as the Graph API:
The essential characteristics are:
has the same level of capabilities as Graph API, and both are suitable framework tools for orchestrating the “information flow around large models”. Remains consistent in aspects such as node type, stream processing, callback, option, state, interrupt & checkpoint. Implementing the AnyGraph interface allows it to be added as a subgraph to the parent Graph/Chain/Workflow when AddGraphNode is called. can also add other Graph/Chain/Workflow as its own subgraph. Field-level mapping capability: The input of a node can be composed of any combination of output fields from any predecessor nodes. Natively supports struct, map, and mutual mapping between structs and maps at any nested level. Separation of control flow and data flow: The Edge in a Graph determines both the execution order and data transfer. In a Workflow, they can be transferred together or separately. Loops (i.e., loops similar to react agent’s chatmodel->toolsNode->chatmodel) are not supported. NodeTriggerMode is fixed to AllPredecessor. Why use Workflow Flexible input and output types For example, if you need to arrange two lambda nodes, each containing two “existing business functions f1, f2”, the input and output types are specific Structs that conform to the business scenario and are different from each other:"><meta itemprop=datePublished content="2025-08-07T00:00:00+00:00"><meta itemprop=dateModified content="2025-08-22T16:24:33+08:00"><meta itemprop=wordCount content="3989"><meta name=twitter:card content="summary"><meta name=twitter:title content="Eino: Workflow Orchestration Framework"><meta name=twitter:description content="What is Eino Workflow? is a set of orchestrated APIs that are at the same architectural level as the Graph API:
The essential characteristics are:
has the same level of capabilities as Graph API, and both are suitable framework tools for orchestrating the “information flow around large models”. Remains consistent in aspects such as node type, stream processing, callback, option, state, interrupt & checkpoint. Implementing the AnyGraph interface allows it to be added as a subgraph to the parent Graph/Chain/Workflow when AddGraphNode is called. can also add other Graph/Chain/Workflow as its own subgraph. Field-level mapping capability: The input of a node can be composed of any combination of output fields from any predecessor nodes. Natively supports struct, map, and mutual mapping between structs and maps at any nested level. Separation of control flow and data flow: The Edge in a Graph determines both the execution order and data transfer. In a Workflow, they can be transferred together or separately. Loops (i.e., loops similar to react agent’s chatmodel->toolsNode->chatmodel) are not supported. NodeTriggerMode is fixed to AllPredecessor. Why use Workflow Flexible input and output types For example, if you need to arrange two lambda nodes, each containing two “existing business functions f1, f2”, the input and output types are specific Structs that conform to the business scenario and are different from each other:"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYWRQRLPRM"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QYWRQRLPRM")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?f1808c42af827f368aa7eca3baae6d55",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=preload href=/scss/main.min.8dda0a7e68c787c1e8d950ad927bf6783703a0048d569c37d9e7d2726622eaff.css as=style><link href=/scss/main.min.8dda0a7e68c787c1e8d950ad927bf6783703a0048d569c37d9e7d2726622eaff.css rel=stylesheet integrity><script src=/js/jquery.min.js></script><link rel=stylesheet href=/css/prism.css><link rel=stylesheet href=/css/docsearch.css></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand-xl navbar-dark td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><img src=/img/logo.png></span>
</a><button class=navbar-toggler type=button data-toggle=collapse data-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0 ml-auto"><li class="dropdown sub-menu active"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Documentation</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/kitex/>Kitex</a>
<a class=dropdown-item href=/docs/hertz/>Hertz</a>
<a class=dropdown-item href=/docs/volo/>Volo</a>
<a class=dropdown-item href=/docs/netpoll/>Netpoll</a>
<a class=dropdown-item href=/docs/eino/>Eino</a>
<a class=dropdown-item href=/docs/monolake/>Monolake</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/cooperation/><span>Cooperation</span></a></li><li class="dropdown sub-menu"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Security</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/security/safety-bulletin/>safety-bulletin</a>
<a class=dropdown-item href=/security/vulnerability-reporting/>vulnerability-reporting</a></div></li><li class="nav-item dropdown mr-4"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/eino/core_modules/chain_and_graph_orchestration/workflow_orchestration_framework/>中文</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><div id=docsearch></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><div id=docsearch></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/eino/core_modules/chain_and_graph_orchestration/workflow_orchestration_framework/>中文</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docseino-li><input type=checkbox id=m-docseino-check checked>
<label for=m-docseino-check><a href=/docs/eino/ title="Eino: User Manual" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseino><span>Eino</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docseinooverview-li><input type=checkbox id=m-docseinooverview-check checked>
<label for=m-docseinooverview-check><a href=/docs/eino/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinooverview><span>Eino: Overview</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinooverviewbytedance_eino_practice-li><input type=checkbox id=m-docseinooverviewbytedance_eino_practice-check>
<label for=m-docseinooverviewbytedance_eino_practice-check><a href=/docs/eino/overview/bytedance_eino_practice/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinooverviewbytedance_eino_practice><span>Bytedance LLM Application Go Development Framework-Eino Practice</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoovervieweino_open_source-li><input type=checkbox id=m-docseinoovervieweino_open_source-check>
<label for=m-docseinoovervieweino_open_source-check><a href=/docs/eino/overview/eino_open_source/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoovervieweino_open_source><span>Large Language Model Application Development Framework — Eino is Now Open Source!</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoovervieweino_framework_structure-li><input type=checkbox id=m-docseinoovervieweino_framework_structure-check>
<label for=m-docseinoovervieweino_framework_structure-check><a href=/docs/eino/overview/eino_framework_structure/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoovervieweino_framework_structure><span>The structure of the Eino Framework</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docseinoquick_start-li><input type=checkbox id=m-docseinoquick_start-check checked>
<label for=m-docseinoquick_start-check><a href=/docs/eino/quick_start/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinoquick_start><span>Eino: Quick start</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoquick_startsimple_llm_application-li><input type=checkbox id=m-docseinoquick_startsimple_llm_application-check>
<label for=m-docseinoquick_startsimple_llm_application-check><a href=/docs/eino/quick_start/simple_llm_application/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoquick_startsimple_llm_application><span>Implement an easy LLM application</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoquick_startagent_llm_with_tools-li><input type=checkbox id=m-docseinoquick_startagent_llm_with_tools-check>
<label for=m-docseinoquick_startagent_llm_with_tools-check><a href=/docs/eino/quick_start/agent_llm_with_tools/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoquick_startagent_llm_with_tools><span>Agent-Enable LLM to have hands</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docseinocore_modules-li><input type=checkbox id=m-docseinocore_modules-check checked>
<label for=m-docseinocore_modules-check><a href=/docs/eino/core_modules/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinocore_modules><span>Eino: Core Modules</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docseinocore_modulesflow_integration_components-li><input type=checkbox id=m-docseinocore_modulesflow_integration_components-check>
<label for=m-docseinocore_modulesflow_integration_components-check><a href=/docs/eino/core_modules/flow_integration_components/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinocore_modulesflow_integration_components><span>Eino: Flow integration</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_modulesflow_integration_componentsreact_agent_manual-li><input type=checkbox id=m-docseinocore_modulesflow_integration_componentsreact_agent_manual-check>
<label for=m-docseinocore_modulesflow_integration_componentsreact_agent_manual-check><a href=/docs/eino/core_modules/flow_integration_components/react_agent_manual/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_modulesflow_integration_componentsreact_agent_manual><span>Eino: React Agent Manual</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_modulesflow_integration_componentsmulti_agent_hosting-li><input type=checkbox id=m-docseinocore_modulesflow_integration_componentsmulti_agent_hosting-check>
<label for=m-docseinocore_modulesflow_integration_componentsmulti_agent_hosting-check><a href=/docs/eino/core_modules/flow_integration_components/multi_agent_hosting/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_modulesflow_integration_componentsmulti_agent_hosting><span>Eino Tutorial: Host Multi-Agent</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docseinocore_moduleschain_and_graph_orchestration-li><input type=checkbox id=m-docseinocore_moduleschain_and_graph_orchestration-check checked>
<label for=m-docseinocore_moduleschain_and_graph_orchestration-check><a href=/docs/eino/core_modules/chain_and_graph_orchestration/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinocore_moduleschain_and_graph_orchestration><span>Eino: Chain & Graph & Workflow Orchestration</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_moduleschain_and_graph_orchestrationchain_graph_introduction-li><input type=checkbox id=m-docseinocore_moduleschain_and_graph_orchestrationchain_graph_introduction-check>
<label for=m-docseinocore_moduleschain_and_graph_orchestrationchain_graph_introduction-check><a href=/docs/eino/core_modules/chain_and_graph_orchestration/chain_graph_introduction/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_moduleschain_and_graph_orchestrationchain_graph_introduction><span>Eino: Chain/Graph Orchestration Introduction</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_moduleschain_and_graph_orchestrationorchestration_design_principles-li><input type=checkbox id=m-docseinocore_moduleschain_and_graph_orchestrationorchestration_design_principles-check>
<label for=m-docseinocore_moduleschain_and_graph_orchestrationorchestration_design_principles-check><a href=/docs/eino/core_modules/chain_and_graph_orchestration/orchestration_design_principles/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_moduleschain_and_graph_orchestrationorchestration_design_principles><span>Eino: The design concept of orchestration</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_moduleschain_and_graph_orchestrationstream_programming_essentials-li><input type=checkbox id=m-docseinocore_moduleschain_and_graph_orchestrationstream_programming_essentials-check>
<label for=m-docseinocore_moduleschain_and_graph_orchestrationstream_programming_essentials-check><a href=/docs/eino/core_modules/chain_and_graph_orchestration/stream_programming_essentials/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_moduleschain_and_graph_orchestrationstream_programming_essentials><span>Eino Points of Streaming Orchestration</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_moduleschain_and_graph_orchestrationcallback_manual-li><input type=checkbox id=m-docseinocore_moduleschain_and_graph_orchestrationcallback_manual-check>
<label for=m-docseinocore_moduleschain_and_graph_orchestrationcallback_manual-check><a href=/docs/eino/core_modules/chain_and_graph_orchestration/callback_manual/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_moduleschain_and_graph_orchestrationcallback_manual><span>Eino: Callback Manual</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_moduleschain_and_graph_orchestrationcall_option_capabilities-li><input type=checkbox id=m-docseinocore_moduleschain_and_graph_orchestrationcall_option_capabilities-check>
<label for=m-docseinocore_moduleschain_and_graph_orchestrationcall_option_capabilities-check><a href=/docs/eino/core_modules/chain_and_graph_orchestration/call_option_capabilities/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_moduleschain_and_graph_orchestrationcall_option_capabilities><span>Eino: CallOption capabilities and specification</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_moduleschain_and_graph_orchestrationinterrupt_checkpoint-li><input type=checkbox id=m-docseinocore_moduleschain_and_graph_orchestrationinterrupt_checkpoint-check>
<label for=m-docseinocore_moduleschain_and_graph_orchestrationinterrupt_checkpoint-check><a href=/docs/eino/core_modules/chain_and_graph_orchestration/interrupt_checkpoint/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_moduleschain_and_graph_orchestrationinterrupt_checkpoint><span>Eino: Interrupt & CheckPoint User Manual</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docseinocore_moduleschain_and_graph_orchestrationworkflow_orchestration_framework-li><input type=checkbox id=m-docseinocore_moduleschain_and_graph_orchestrationworkflow_orchestration_framework-check checked>
<label for=m-docseinocore_moduleschain_and_graph_orchestrationworkflow_orchestration_framework-check><a href=/docs/eino/core_modules/chain_and_graph_orchestration/workflow_orchestration_framework/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docseinocore_moduleschain_and_graph_orchestrationworkflow_orchestration_framework><span class=td-sidebar-nav-active-item>Eino: Workflow Orchestration Framework</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docseinocore_modulescomponents-li><input type=checkbox id=m-docseinocore_modulescomponents-check>
<label for=m-docseinocore_modulescomponents-check><a href=/docs/eino/core_modules/components/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinocore_modulescomponents><span>Eino: Components</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_modulescomponentschat_model_guide-li><input type=checkbox id=m-docseinocore_modulescomponentschat_model_guide-check>
<label for=m-docseinocore_modulescomponentschat_model_guide-check><a href=/docs/eino/core_modules/components/chat_model_guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_modulescomponentschat_model_guide><span>Eino: ChatModel guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_modulescomponentsdocument_transformer_guide-li><input type=checkbox id=m-docseinocore_modulescomponentsdocument_transformer_guide-check>
<label for=m-docseinocore_modulescomponentsdocument_transformer_guide-check><a href=/docs/eino/core_modules/components/document_transformer_guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_modulescomponentsdocument_transformer_guide><span>Eino: Document Transformer guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_modulescomponentschat_template_guide-li><input type=checkbox id=m-docseinocore_modulescomponentschat_template_guide-check>
<label for=m-docseinocore_modulescomponentschat_template_guide-check><a href=/docs/eino/core_modules/components/chat_template_guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_modulescomponentschat_template_guide><span>Eino: ChatTemplate guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_modulescomponentslambda_guide-li><input type=checkbox id=m-docseinocore_modulescomponentslambda_guide-check>
<label for=m-docseinocore_modulescomponentslambda_guide-check><a href=/docs/eino/core_modules/components/lambda_guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_modulescomponentslambda_guide><span>Eino: Lambda guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_modulescomponentsretriever_guide-li><input type=checkbox id=m-docseinocore_modulescomponentsretriever_guide-check>
<label for=m-docseinocore_modulescomponentsretriever_guide-check><a href=/docs/eino/core_modules/components/retriever_guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_modulescomponentsretriever_guide><span>Eino: Retriever guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docseinocore_modulescomponentstools_node_guide-li><input type=checkbox id=m-docseinocore_modulescomponentstools_node_guide-check>
<label for=m-docseinocore_modulescomponentstools_node_guide-check><a href=/docs/eino/core_modules/components/tools_node_guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinocore_modulescomponentstools_node_guide><span>Eino: ToolsNode guide</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_modulescomponentstools_node_guidehow_to_create_a_tool-li><input type=checkbox id=m-docseinocore_modulescomponentstools_node_guidehow_to_create_a_tool-check>
<label for=m-docseinocore_modulescomponentstools_node_guidehow_to_create_a_tool-check><a href=/docs/eino/core_modules/components/tools_node_guide/how_to_create_a_tool/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_modulescomponentstools_node_guidehow_to_create_a_tool><span>How to create a tool?</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docseinocore_modulescomponentsdocument_loader_guide-li><input type=checkbox id=m-docseinocore_modulescomponentsdocument_loader_guide-check>
<label for=m-docseinocore_modulescomponentsdocument_loader_guide-check><a href=/docs/eino/core_modules/components/document_loader_guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinocore_modulescomponentsdocument_loader_guide><span>Eino: Document Loader guide</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_modulescomponentsdocument_loader_guidedocument_parser_interface_guide-li><input type=checkbox id=m-docseinocore_modulescomponentsdocument_loader_guidedocument_parser_interface_guide-check>
<label for=m-docseinocore_modulescomponentsdocument_loader_guidedocument_parser_interface_guide-check><a href=/docs/eino/core_modules/components/document_loader_guide/document_parser_interface_guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_modulescomponentsdocument_loader_guidedocument_parser_interface_guide><span>Eino: Document Parser guide</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_modulescomponentsembedding_guide-li><input type=checkbox id=m-docseinocore_modulescomponentsembedding_guide-check>
<label for=m-docseinocore_modulescomponentsembedding_guide-check><a href=/docs/eino/core_modules/components/embedding_guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_modulescomponentsembedding_guide><span>Eino: Embedding guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_modulescomponentsindexer_guide-li><input type=checkbox id=m-docseinocore_modulescomponentsindexer_guide-check>
<label for=m-docseinocore_modulescomponentsindexer_guide-check><a href=/docs/eino/core_modules/components/indexer_guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_modulescomponentsindexer_guide><span>Eino: Indexer guide</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docseinocore_modulesdevops-li><input type=checkbox id=m-docseinocore_modulesdevops-check>
<label for=m-docseinocore_modulesdevops-check><a href=/docs/eino/core_modules/devops/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinocore_modulesdevops><span>EinoDev: Devops tools</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_modulesdevopside_plugin_guide-li><input type=checkbox id=m-docseinocore_modulesdevopside_plugin_guide-check>
<label for=m-docseinocore_modulesdevopside_plugin_guide-check><a href=/docs/eino/core_modules/devops/ide_plugin_guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_modulesdevopside_plugin_guide><span>EinoDev IDE Plugin Introduction</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_modulesdevopsvisual_orchestration_plugin_guide-li><input type=checkbox id=m-docseinocore_modulesdevopsvisual_orchestration_plugin_guide-check>
<label for=m-docseinocore_modulesdevopsvisual_orchestration_plugin_guide-check><a href=/docs/eino/core_modules/devops/visual_orchestration_plugin_guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_modulesdevopsvisual_orchestration_plugin_guide><span>EinoDev visual orchestration plugin guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinocore_modulesdevopsvisual_debug_plugin_guide-li><input type=checkbox id=m-docseinocore_modulesdevopsvisual_debug_plugin_guide-check>
<label for=m-docseinocore_modulesdevopsvisual_debug_plugin_guide-check><a href=/docs/eino/core_modules/devops/visual_debug_plugin_guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinocore_modulesdevopsvisual_debug_plugin_guide><span>EinoDev visual debug plugin guide</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docseinoecosystem_integration-li><input type=checkbox id=m-docseinoecosystem_integration-check checked>
<label for=m-docseinoecosystem_integration-check><a href=/docs/eino/ecosystem_integration/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinoecosystem_integration><span>Eino: Component Integration</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docseinoecosystem_integrationchat_template-li><input type=checkbox id=m-docseinoecosystem_integrationchat_template-check>
<label for=m-docseinoecosystem_integrationchat_template-check><a href=/docs/eino/ecosystem_integration/chat_template/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinoecosystem_integrationchat_template><span>ChatTemplate</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationchat_templatechat_template_mcp-li><input type=checkbox id=m-docseinoecosystem_integrationchat_templatechat_template_mcp-check>
<label for=m-docseinoecosystem_integrationchat_templatechat_template_mcp-check><a href=/docs/eino/ecosystem_integration/chat_template/chat_template_mcp/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationchat_templatechat_template_mcp><span>ChatTemplate - MCP</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docseinoecosystem_integrationcallbacks-li><input type=checkbox id=m-docseinoecosystem_integrationcallbacks-check>
<label for=m-docseinoecosystem_integrationcallbacks-check><a href=/docs/eino/ecosystem_integration/callbacks/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinoecosystem_integrationcallbacks><span>Callbacks</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationcallbackscallback_langfuse-li><input type=checkbox id=m-docseinoecosystem_integrationcallbackscallback_langfuse-check>
<label for=m-docseinoecosystem_integrationcallbackscallback_langfuse-check><a href=/docs/eino/ecosystem_integration/callbacks/callback_langfuse/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationcallbackscallback_langfuse><span>Callback - Langfuse</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationcallbackscallback_apmplus-li><input type=checkbox id=m-docseinoecosystem_integrationcallbackscallback_apmplus-check>
<label for=m-docseinoecosystem_integrationcallbackscallback_apmplus-check><a href=/docs/eino/ecosystem_integration/callbacks/callback_apmplus/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationcallbackscallback_apmplus><span>Callback - APMPlus</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationcallbackscallback_cozeloop-li><input type=checkbox id=m-docseinoecosystem_integrationcallbackscallback_cozeloop-check>
<label for=m-docseinoecosystem_integrationcallbackscallback_cozeloop-check><a href=/docs/eino/ecosystem_integration/callbacks/callback_cozeloop/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationcallbackscallback_cozeloop><span>Callback - cozeloop</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docseinoecosystem_integrationchat_model-li><input type=checkbox id=m-docseinoecosystem_integrationchat_model-check>
<label for=m-docseinoecosystem_integrationchat_model-check><a href=/docs/eino/ecosystem_integration/chat_model/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinoecosystem_integrationchat_model><span>ChatModel</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationchat_modelchat_model_ark-li><input type=checkbox id=m-docseinoecosystem_integrationchat_modelchat_model_ark-check>
<label for=m-docseinoecosystem_integrationchat_modelchat_model_ark-check><a href=/docs/eino/ecosystem_integration/chat_model/chat_model_ark/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationchat_modelchat_model_ark><span>ChatModel - ARK</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationchat_modelchat_model_claude-li><input type=checkbox id=m-docseinoecosystem_integrationchat_modelchat_model_claude-check>
<label for=m-docseinoecosystem_integrationchat_modelchat_model_claude-check><a href=/docs/eino/ecosystem_integration/chat_model/chat_model_claude/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationchat_modelchat_model_claude><span>ChatModel - claude</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationchat_modelchat_model_deepseek-li><input type=checkbox id=m-docseinoecosystem_integrationchat_modelchat_model_deepseek-check>
<label for=m-docseinoecosystem_integrationchat_modelchat_model_deepseek-check><a href=/docs/eino/ecosystem_integration/chat_model/chat_model_deepseek/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationchat_modelchat_model_deepseek><span>ChatModel - deepseek</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationchat_modelchat_model_gemini-li><input type=checkbox id=m-docseinoecosystem_integrationchat_modelchat_model_gemini-check>
<label for=m-docseinoecosystem_integrationchat_modelchat_model_gemini-check><a href=/docs/eino/ecosystem_integration/chat_model/chat_model_gemini/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationchat_modelchat_model_gemini><span>ChatModel - gemini</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationchat_modelchat_model_ollama-li><input type=checkbox id=m-docseinoecosystem_integrationchat_modelchat_model_ollama-check>
<label for=m-docseinoecosystem_integrationchat_modelchat_model_ollama-check><a href=/docs/eino/ecosystem_integration/chat_model/chat_model_ollama/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationchat_modelchat_model_ollama><span>ChatModel - Ollama</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationchat_modelchat_model_openai-li><input type=checkbox id=m-docseinoecosystem_integrationchat_modelchat_model_openai-check>
<label for=m-docseinoecosystem_integrationchat_modelchat_model_openai-check><a href=/docs/eino/ecosystem_integration/chat_model/chat_model_openai/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationchat_modelchat_model_openai><span>ChatModel - OpenAI</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationchat_modelchat_model_qianfan-li><input type=checkbox id=m-docseinoecosystem_integrationchat_modelchat_model_qianfan-check>
<label for=m-docseinoecosystem_integrationchat_modelchat_model_qianfan-check><a href=/docs/eino/ecosystem_integration/chat_model/chat_model_qianfan/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationchat_modelchat_model_qianfan><span>ChatModel - qianfan</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationchat_modelchat_model_qwen-li><input type=checkbox id=m-docseinoecosystem_integrationchat_modelchat_model_qwen-check>
<label for=m-docseinoecosystem_integrationchat_modelchat_model_qwen-check><a href=/docs/eino/ecosystem_integration/chat_model/chat_model_qwen/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationchat_modelchat_model_qwen><span>ChatModel - qwen</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docseinoecosystem_integrationdocument-li><input type=checkbox id=m-docseinoecosystem_integrationdocument-check>
<label for=m-docseinoecosystem_integrationdocument-check><a href=/docs/eino/ecosystem_integration/document/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinoecosystem_integrationdocument><span>Document</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationdocumentsplitter_markdown-li><input type=checkbox id=m-docseinoecosystem_integrationdocumentsplitter_markdown-check>
<label for=m-docseinoecosystem_integrationdocumentsplitter_markdown-check><a href=/docs/eino/ecosystem_integration/document/splitter_markdown/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationdocumentsplitter_markdown><span>Splitter - markdown</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationdocumentloader_amazon_s3-li><input type=checkbox id=m-docseinoecosystem_integrationdocumentloader_amazon_s3-check>
<label for=m-docseinoecosystem_integrationdocumentloader_amazon_s3-check><a href=/docs/eino/ecosystem_integration/document/loader_amazon_s3/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationdocumentloader_amazon_s3><span>Loader - amazon s3</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationdocumentloader_local_file-li><input type=checkbox id=m-docseinoecosystem_integrationdocumentloader_local_file-check>
<label for=m-docseinoecosystem_integrationdocumentloader_local_file-check><a href=/docs/eino/ecosystem_integration/document/loader_local_file/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationdocumentloader_local_file><span>Loader - local file</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationdocumentloader_web_url-li><input type=checkbox id=m-docseinoecosystem_integrationdocumentloader_web_url-check>
<label for=m-docseinoecosystem_integrationdocumentloader_web_url-check><a href=/docs/eino/ecosystem_integration/document/loader_web_url/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationdocumentloader_web_url><span>Loader - web url</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationdocumentparser_html-li><input type=checkbox id=m-docseinoecosystem_integrationdocumentparser_html-check>
<label for=m-docseinoecosystem_integrationdocumentparser_html-check><a href=/docs/eino/ecosystem_integration/document/parser_html/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationdocumentparser_html><span>Parser - html</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationdocumentparser_pdf-li><input type=checkbox id=m-docseinoecosystem_integrationdocumentparser_pdf-check>
<label for=m-docseinoecosystem_integrationdocumentparser_pdf-check><a href=/docs/eino/ecosystem_integration/document/parser_pdf/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationdocumentparser_pdf><span>Parser - pdf</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationdocumentsplitter_recursive-li><input type=checkbox id=m-docseinoecosystem_integrationdocumentsplitter_recursive-check>
<label for=m-docseinoecosystem_integrationdocumentsplitter_recursive-check><a href=/docs/eino/ecosystem_integration/document/splitter_recursive/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationdocumentsplitter_recursive><span>Splitter - recursive</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationdocumentsplitter_semantic-li><input type=checkbox id=m-docseinoecosystem_integrationdocumentsplitter_semantic-check>
<label for=m-docseinoecosystem_integrationdocumentsplitter_semantic-check><a href=/docs/eino/ecosystem_integration/document/splitter_semantic/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationdocumentsplitter_semantic><span>Splitter - semantic</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docseinoecosystem_integrationembedding-li><input type=checkbox id=m-docseinoecosystem_integrationembedding-check>
<label for=m-docseinoecosystem_integrationembedding-check><a href=/docs/eino/ecosystem_integration/embedding/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinoecosystem_integrationembedding><span>Embedding</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationembeddingembedding_ollama-li><input type=checkbox id=m-docseinoecosystem_integrationembeddingembedding_ollama-check>
<label for=m-docseinoecosystem_integrationembeddingembedding_ollama-check><a href=/docs/eino/ecosystem_integration/embedding/embedding_ollama/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationembeddingembedding_ollama><span>Embedding - Ollama</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationembeddingembedding_openai-li><input type=checkbox id=m-docseinoecosystem_integrationembeddingembedding_openai-check>
<label for=m-docseinoecosystem_integrationembeddingembedding_openai-check><a href=/docs/eino/ecosystem_integration/embedding/embedding_openai/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationembeddingembedding_openai><span>Embedding - OpenAI</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationembeddingembedding_ark-li><input type=checkbox id=m-docseinoecosystem_integrationembeddingembedding_ark-check>
<label for=m-docseinoecosystem_integrationembeddingembedding_ark-check><a href=/docs/eino/ecosystem_integration/embedding/embedding_ark/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationembeddingembedding_ark><span>Embedding - ARK</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationembeddingembedding_dashscope-li><input type=checkbox id=m-docseinoecosystem_integrationembeddingembedding_dashscope-check>
<label for=m-docseinoecosystem_integrationembeddingembedding_dashscope-check><a href=/docs/eino/ecosystem_integration/embedding/embedding_dashscope/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationembeddingembedding_dashscope><span>Embedding - dashscope</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationembeddingembedding_qianfan-li><input type=checkbox id=m-docseinoecosystem_integrationembeddingembedding_qianfan-check>
<label for=m-docseinoecosystem_integrationembeddingembedding_qianfan-check><a href=/docs/eino/ecosystem_integration/embedding/embedding_qianfan/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationembeddingembedding_qianfan><span>Embedding - qianfan</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationembeddingembedding_tencentcloud-li><input type=checkbox id=m-docseinoecosystem_integrationembeddingembedding_tencentcloud-check>
<label for=m-docseinoecosystem_integrationembeddingembedding_tencentcloud-check><a href=/docs/eino/ecosystem_integration/embedding/embedding_tencentcloud/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationembeddingembedding_tencentcloud><span>Embedding - tencentcloud</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docseinoecosystem_integrationindexer-li><input type=checkbox id=m-docseinoecosystem_integrationindexer-check>
<label for=m-docseinoecosystem_integrationindexer-check><a href=/docs/eino/ecosystem_integration/indexer/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinoecosystem_integrationindexer><span>Indexer</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationindexerindexer_es8-li><input type=checkbox id=m-docseinoecosystem_integrationindexerindexer_es8-check>
<label for=m-docseinoecosystem_integrationindexerindexer_es8-check><a href=/docs/eino/ecosystem_integration/indexer/indexer_es8/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationindexerindexer_es8><span>Indexer - es8</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationindexerindexer_milvus-li><input type=checkbox id=m-docseinoecosystem_integrationindexerindexer_milvus-check>
<label for=m-docseinoecosystem_integrationindexerindexer_milvus-check><a href=/docs/eino/ecosystem_integration/indexer/indexer_milvus/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationindexerindexer_milvus><span>Indexer - milvus</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationindexerindexer_redis-li><input type=checkbox id=m-docseinoecosystem_integrationindexerindexer_redis-check>
<label for=m-docseinoecosystem_integrationindexerindexer_redis-check><a href=/docs/eino/ecosystem_integration/indexer/indexer_redis/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationindexerindexer_redis><span>Indexer - redis</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationindexerindexer_volc_vikingdb-li><input type=checkbox id=m-docseinoecosystem_integrationindexerindexer_volc_vikingdb-check>
<label for=m-docseinoecosystem_integrationindexerindexer_volc_vikingdb-check><a href=/docs/eino/ecosystem_integration/indexer/indexer_volc_vikingdb/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationindexerindexer_volc_vikingdb><span>Indexer - volc VikingDB</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docseinoecosystem_integrationretriever-li><input type=checkbox id=m-docseinoecosystem_integrationretriever-check>
<label for=m-docseinoecosystem_integrationretriever-check><a href=/docs/eino/ecosystem_integration/retriever/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinoecosystem_integrationretriever><span>Retriever</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationretrieverretriever_es8-li><input type=checkbox id=m-docseinoecosystem_integrationretrieverretriever_es8-check>
<label for=m-docseinoecosystem_integrationretrieverretriever_es8-check><a href=/docs/eino/ecosystem_integration/retriever/retriever_es8/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationretrieverretriever_es8><span>Retriever - es8</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationretrieverretriever_redis-li><input type=checkbox id=m-docseinoecosystem_integrationretrieverretriever_redis-check>
<label for=m-docseinoecosystem_integrationretrieverretriever_redis-check><a href=/docs/eino/ecosystem_integration/retriever/retriever_redis/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationretrieverretriever_redis><span>Retriever - redis</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationretrieverretriever_volc_knowledge-li><input type=checkbox id=m-docseinoecosystem_integrationretrieverretriever_volc_knowledge-check>
<label for=m-docseinoecosystem_integrationretrieverretriever_volc_knowledge-check><a href=/docs/eino/ecosystem_integration/retriever/retriever_volc_knowledge/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationretrieverretriever_volc_knowledge><span>Retriever - volc knowledge</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationretrieverretriever_volc_vikingdb-li><input type=checkbox id=m-docseinoecosystem_integrationretrieverretriever_volc_vikingdb-check>
<label for=m-docseinoecosystem_integrationretrieverretriever_volc_vikingdb-check><a href=/docs/eino/ecosystem_integration/retriever/retriever_volc_vikingdb/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationretrieverretriever_volc_vikingdb><span>Retriever - volc VikingDB</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationretrieverretriever_dify-li><input type=checkbox id=m-docseinoecosystem_integrationretrieverretriever_dify-check>
<label for=m-docseinoecosystem_integrationretrieverretriever_dify-check><a href=/docs/eino/ecosystem_integration/retriever/retriever_dify/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationretrieverretriever_dify><span>Retriever - dify</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationretrieverretriever_milvus-li><input type=checkbox id=m-docseinoecosystem_integrationretrieverretriever_milvus-check>
<label for=m-docseinoecosystem_integrationretrieverretriever_milvus-check><a href=/docs/eino/ecosystem_integration/retriever/retriever_milvus/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationretrieverretriever_milvus><span>Retriever - milvus</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docseinoecosystem_integrationtool-li><input type=checkbox id=m-docseinoecosystem_integrationtool-check>
<label for=m-docseinoecosystem_integrationtool-check><a href=/docs/eino/ecosystem_integration/tool/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docseinoecosystem_integrationtool><span>Tool</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationtooltool_bingsearch-li><input type=checkbox id=m-docseinoecosystem_integrationtooltool_bingsearch-check>
<label for=m-docseinoecosystem_integrationtooltool_bingsearch-check><a href=/docs/eino/ecosystem_integration/tool/tool_bingsearch/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationtooltool_bingsearch><span>Tool - Bingsearch</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationtooltool_browseruse-li><input type=checkbox id=m-docseinoecosystem_integrationtooltool_browseruse-check>
<label for=m-docseinoecosystem_integrationtooltool_browseruse-check><a href=/docs/eino/ecosystem_integration/tool/tool_browseruse/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationtooltool_browseruse><span>Tool - Browseruse</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationtooltool_commandline-li><input type=checkbox id=m-docseinoecosystem_integrationtooltool_commandline-check>
<label for=m-docseinoecosystem_integrationtooltool_commandline-check><a href=/docs/eino/ecosystem_integration/tool/tool_commandline/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationtooltool_commandline><span>Tool - Commandline</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationtooltool_googlesearch-li><input type=checkbox id=m-docseinoecosystem_integrationtooltool_googlesearch-check>
<label for=m-docseinoecosystem_integrationtooltool_googlesearch-check><a href=/docs/eino/ecosystem_integration/tool/tool_googlesearch/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationtooltool_googlesearch><span>Tool - Googlesearch</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationtooltool_httprequest-li><input type=checkbox id=m-docseinoecosystem_integrationtooltool_httprequest-check>
<label for=m-docseinoecosystem_integrationtooltool_httprequest-check><a href=/docs/eino/ecosystem_integration/tool/tool_httprequest/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationtooltool_httprequest><span>Tool - httprequest</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationtooltool_sequentialthinking-li><input type=checkbox id=m-docseinoecosystem_integrationtooltool_sequentialthinking-check>
<label for=m-docseinoecosystem_integrationtooltool_sequentialthinking-check><a href=/docs/eino/ecosystem_integration/tool/tool_sequentialthinking/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationtooltool_sequentialthinking><span>Tool - sequentialthinking</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationtooltool_wikipedia-li><input type=checkbox id=m-docseinoecosystem_integrationtooltool_wikipedia-check>
<label for=m-docseinoecosystem_integrationtooltool_wikipedia-check><a href=/docs/eino/ecosystem_integration/tool/tool_wikipedia/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationtooltool_wikipedia><span>Tool - wikipedia</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationtooltool_duckduckgo_search-li><input type=checkbox id=m-docseinoecosystem_integrationtooltool_duckduckgo_search-check>
<label for=m-docseinoecosystem_integrationtooltool_duckduckgo_search-check><a href=/docs/eino/ecosystem_integration/tool/tool_duckduckgo_search/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationtooltool_duckduckgo_search><span>Tool - DuckDuckGoSearch</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docseinoecosystem_integrationtooltool_mcp-li><input type=checkbox id=m-docseinoecosystem_integrationtooltool_mcp-check>
<label for=m-docseinoecosystem_integrationtooltool_mcp-check><a href=/docs/eino/ecosystem_integration/tool/tool_mcp/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docseinoecosystem_integrationtooltool_mcp><span>Tool - MCP</span></a></label></li></ul></li></ul></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/cloudwego/cloudwego.github.io/edit/main/content/en/docs/eino/core_modules/chain_and_graph_orchestration/workflow_orchestration_framework.md class="td-page-meta--edit td-page-meta__edit" target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/new/main/content/en/docs/eino/core_modules/chain_and_graph_orchestration?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class="td-page-meta--child td-page-meta__child" target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/issues/new?title=Eino:%20Workflow%20Orchestration%20Framework" class="td-page-meta--issue td-page-meta__issue" target=_blank rel=noopener><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/cloudwego/eino/issues/new/choose class="td-page-meta--project td-page-meta__project-issue" target=_blank rel=noopener><i class="fas fa-tasks fa-fw"></i> Create project issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#what-is-eino-workflow>What is Eino Workflow?</a></li><li><a href=#why-use-workflow>Why use Workflow</a><ul><li><a href=#flexible-input-and-output-types>Flexible input and output types</a></li><li><a href=#separation-of-control-flow-and-data-flow>Separation of control flow and data flow</a></li></ul></li><li><a href=#how-to-use-workflow>How to Use Workflow</a><ul><li><a href=#the-simplest-workflow>The simplest workflow</a></li><li><a href=#data-field-mapping>Data Field Mapping</a></li></ul></li><li><a href=#advanced-features>Advanced Features</a><ul><li><a href=#only-data-flow-no-control-flow>Only data flow, no control flow</a></li><li><a href=#only-control-flow-no-data-flow>Only control flow, no data flow</a></li><li><a href=#branch>Branch</a></li><li><a href=#static-values>Static Values</a></li><li><a href=#streaming-effect>Streaming Effect</a></li><li><a href=#scenarios-of-data-field-mapping>Scenarios of data field mapping</a></li><li><a href=#some-constraints>Some constraints</a></li></ul></li><li><a href=#practical-application>Practical Application</a><ul><li><a href=#coze-studio-workflow>Coze-Studio Workflow</a></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/>Documentation</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/eino/>Eino</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/eino/core_modules/>Eino: Core Modules</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/eino/core_modules/chain_and_graph_orchestration/>Eino: Chain & Graph & Workflow Orchestration</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://www.cloudwego.io/docs/eino/core_modules/chain_and_graph_orchestration/workflow_orchestration_framework/>Eino: Workflow Orchestration Framework</a></li></ol></nav><div class=td-content><h1>Eino: Workflow Orchestration Framework</h1><header class=article-meta></header><h2 id=what-is-eino-workflow>What is Eino Workflow?</h2><p>is a set of orchestrated APIs that are at the same architectural level as the Graph API:</p><p><a href=/img/eino/workflow_api_layer_en.png target=_blank><img src=/img/eino/workflow_api_layer_en.png width=100%></a></p><p>The essential characteristics are:</p><ul><li>has the same level of capabilities as Graph API, and both are suitable framework tools for orchestrating the &ldquo;information flow around large models&rdquo;.<ul><li>Remains consistent in aspects such as node type, stream processing, callback, option, state, interrupt & checkpoint.</li><li>Implementing the AnyGraph interface allows it to be added as a subgraph to the parent Graph/Chain/Workflow when AddGraphNode is called.</li><li>can also add other Graph/Chain/Workflow as its own subgraph.</li></ul></li><li>Field-level mapping capability: The input of a node can be composed of any combination of output fields from any predecessor nodes.<ul><li>Natively supports struct, map, and mutual mapping between structs and maps at any nested level.</li></ul></li><li>Separation of control flow and data flow: The Edge in a Graph determines both the execution order and data transfer. In a Workflow, they can be transferred together or separately.</li><li>Loops (i.e., loops similar to react agent&rsquo;s chatmodel->toolsNode->chatmodel) are not supported. NodeTriggerMode is fixed to AllPredecessor.</li></ul><h2 id=why-use-workflow>Why use Workflow</h2><h3 id=flexible-input-and-output-types>Flexible input and output types</h3><p>For example, if you need to arrange two lambda nodes, each containing two &ldquo;existing business functions f1, f2&rdquo;, the input and output types are specific Structs that conform to the business scenario and are different from each other:</p><p><a href=/img/eino/workflow_existing_biz_func_en.png target=_blank><img src=/img/eino/workflow_existing_biz_func_en.png width=100%></a></p><p>When orchestrating the workflow, directly map the output field F1 of f1 to the input field F3 of f2, while retaining the original function signatures of f1 and f2. The achieved effect is:<strong>Each node is &ldquo;determined by business scenarios for input and output&rdquo;, without the need to consider &ldquo;who provides my input and who uses my output&rdquo;</strong>.</p><p>When graph is being orchestrated, due to the requirement of &ldquo;type alignment&rdquo;, if f1 -> f2, then the output type of f1 and the input type of f2 need to be aligned, and one of the following two options must be chosen:</p><ul><li>Define a new common struct, and change both the output type of f1 and the input type of f2 to this common struct. This has costs and may intrude into business logic.</li><li>Both the output type of f1 and the input type of f2 have been changed to map. The feature of strong type alignment has been lost.</li></ul><h3 id=separation-of-control-flow-and-data-flow>Separation of control flow and data flow</h3><p>Look at the following scenario:</p><p><a href=/img/eino/workflow_data_control_separate_en.png target=_blank><img src=/img/eino/workflow_data_control_separate_en.png width=100%></a></p><p>Node D simultaneously references certain output fields of A, B, and C. Among them, the dotted line from A to D is simply a &ldquo;data flow&rdquo; that does not transmit &ldquo;control&rdquo; information, i.e., whether A has completed execution or not does not determine whether D starts execution.</p><p>The thick arrow between nodes D and E represents that node E does not reference any output from node D and is simply a &ldquo;control flow&rdquo; that does not transfer &ldquo;data&rdquo;. That is, whether D has completed execution determines whether E starts execution, but the output of D does not affect the input of E.</p><p>The other lines in the figure represent the combination of control flow and data flow.</p><p>It should be noted that the prerequisite for data flow to be transferred is that there must be a control flow. For example, the data flow from A to D depends on the existence of the control flow A->branch->B->D or A->branch->C->D. That is, data flow can only reference the output of predecessor nodes.</p><p>For example, this scenario of &ldquo;cross-node&rdquo; passing specific data:</p><p><a href=/img/eino/workflow_cross_node_data_passing_en.png target=_blank><img src=/img/eino/workflow_cross_node_data_passing_en.png width=100%></a></p><p>In the above figure, the input of the chat template node can be very clear:</p><p><code>map[string]any{"prompt": "prompt from START", "context": "retrieved context"}</code></p><p>Conversely, if you use the Graph or Chain API, you need to choose one of the two:</p><ul><li>Use OutputKey to convert the output type of the node (the START node cannot be added, so an additional passthrough node must be added), and the input of the ChatTemplate node will include the full output of START and retriever (instead of just the few fields that are actually needed).</li><li>The prompt of the START node is placed inside the state, and ChatTemplate reads from the state. An additional state has been introduced.</li></ul><h2 id=how-to-use-workflow>How to Use Workflow</h2><h3 id=the-simplest-workflow>The simplest workflow</h3><p>START -> node -> END</p><p><a href=/img/eino/workflow_simple_en.png target=_blank><img src=/img/eino/workflow_simple_en.png width=100%></a></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// creates and invokes a simple workflow with only a Lambda node.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Since all field mappings are ALL to ALL mappings</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// (by using AddInput without field mappings),</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// this simple workflow is equivalent to a Graph: START -&gt; lambda -&gt; END.</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// create a Workflow, just like creating a Graph</span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewWorkflow</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// add a lambda node to the Workflow, just like adding the lambda to a Graph</span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddLambdaNode</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;lambda&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>InvokableLambda</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>in</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>strconv</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Itoa</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>in</span><span style=color:#000;font-weight:700>),</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>})).</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// add an input to this lambda node from START.</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// this means mapping all output of START to the input of the lambda.</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// the effect of AddInput is to set both a control dependency</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// and a data dependency.</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>START</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// obtain the compose.END of the workflow for method chaining</span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>End</span><span style=color:#000;font-weight:700>().</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// add an input to compose.END,</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// which means &#39;using ALL output of lambda node as output of END&#39;.</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;lambda&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// compile the Workflow, just like compiling a Graph</span>
</span></span><span style=display:flex><span>    <span style=color:#000>run</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Compile</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;workflow compile error: %v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// invoke the Workflow, just like invoking a Graph</span>
</span></span><span style=display:flex><span>    <span style=color:#000>result</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>run</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Invoke</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;workflow run err: %v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Infof</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;%v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>result</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><a href=https://github.com/cloudwego/eino-examples/blob/main/compose/workflow/1_simple/main.go>Eino example link</a></p><p>Several core APIs:</p><ul><li><code>func NewWorkflow[I, O any](opts ...NewGraphOption) *Workflow[I, O]</code><ul><li>Build a new Workflow.</li><li>is exactly the same as <code>NewGraph</code> signature.</li></ul></li><li><code>func (wf *Workflow[I, O]) AddChatModelNode(key string, chatModel model.BaseChatModel, opts ...GraphAddNodeOpt) *WorkflowNode</code><ul><li>Add a new node to the Workflow.</li><li>The types of nodes that can be added are exactly the same as those in Graph.</li><li>The difference from Graph&rsquo;s AddXXXNode is that Workflow does not immediately return an error, but instead processes and returns errors uniformly during the final Compile.</li><li>AddXXXNode retrieves a WorkflowNode, and subsequent operations such as adding data field mapping to the Node are directly performed using Method Chaining</li></ul></li><li><code>func (n *WorkflowNode) AddInput(fromNodeKey string, inputs ...*FieldMapping) *WorkflowNode</code><ul><li>Add input data field mapping to a WorkflowNode</li><li>Returns WorkflowNode, allowing for continued method chaining.</li></ul></li><li><code>(wf *Workflow[I, O]) Compile(ctx context.Context, opts ...GraphCompileOption) (Runnable[I, O], error)</code><ul><li>Compile a Workflow.</li><li>is completely consistent with the signature of Compile Graph.</li></ul></li></ul><h3 id=data-field-mapping>Data Field Mapping</h3><p>START (input struct) -> [parallel lambda1, lambda2] -> END (output map)</p><p>Let&rsquo;s take an example of &ldquo;counting the occurrences of characters in a string&rdquo;. The overall workflow takes an eino Message and a sub string as input, assigns Message.Content to a counter c1, assigns Message.ReasoningContent to another counter c2, calculates the occurrences of the sub string in parallel respectively, and then maps them to END:</p><p><a href=/img/eino/workflow_char_counter_en.png target=_blank><img src=/img/eino/workflow_char_counter_en.png width=100%></a></p><p>In the above figure, the overall input of the workflow is the message Struct, the inputs of both c1 and c2 lambdas are the counter Struct, the outputs are both int, and the overall output of the workflow is map[string]any. The code is as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// demonstrates the field mapping ability of eino workflow.</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>counter</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>FullStr</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#8f5902;font-style:italic>// exported because we will do field mapping for this field</span>
</span></span><span style=display:flex><span>       <span style=color:#000>SubStr</span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#8f5902;font-style:italic>// exported because we will do field mapping for this field</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// wordCounter is a lambda function that count occurrences of SubStr within FullStr</span>
</span></span><span style=display:flex><span>    <span style=color:#000>wordCounter</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>c</span> <span style=color:#000>counter</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>strings</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Count</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FullStr</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SubStr</span><span style=color:#000;font-weight:700>),</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>message</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>schema</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Message</span>        <span style=color:#8f5902;font-style:italic>// exported because we will do field mapping for this field</span>
</span></span><span style=display:flex><span>       <span style=color:#000>SubStr</span>          <span style=color:#204a87;font-weight:700>string</span> <span style=color:#8f5902;font-style:italic>// exported because we will do field mapping for this field</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// create a workflow just like a Graph</span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewWorkflow</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>any</span><span style=color:#000;font-weight:700>]()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// add lambda c1 just like in Graph</span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddLambdaNode</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;c1&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>InvokableLambda</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>wordCounter</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>START</span><span style=color:#000;font-weight:700>,</span> <span style=color:#8f5902;font-style:italic>// add an input from START, specifying 2 field mappings</span>
</span></span><span style=display:flex><span>          <span style=color:#8f5902;font-style:italic>// map START&#39;s SubStr field to lambda c1&#39;s SubStr field</span>
</span></span><span style=display:flex><span>          <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MapFields</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;SubStr&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;SubStr&#34;</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>          <span style=color:#8f5902;font-style:italic>// map START&#39;s Message&#39;s Content field to lambda c1&#39;s FullStr field</span>
</span></span><span style=display:flex><span>          <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MapFieldPaths</span><span style=color:#000;font-weight:700>([]</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;Message&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;Content&#34;</span><span style=color:#000;font-weight:700>},</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;FullStr&#34;</span><span style=color:#000;font-weight:700>}))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// add lambda c2 just like in Graph</span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddLambdaNode</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;c2&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>InvokableLambda</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>wordCounter</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>START</span><span style=color:#000;font-weight:700>,</span> <span style=color:#8f5902;font-style:italic>// add an input from START, specifying 2 field mappings</span>
</span></span><span style=display:flex><span>          <span style=color:#8f5902;font-style:italic>// map START&#39;s SubStr field to lambda c1&#39;s SubStr field</span>
</span></span><span style=display:flex><span>          <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MapFields</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;SubStr&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;SubStr&#34;</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>          <span style=color:#8f5902;font-style:italic>// map START&#39;s Message&#39;s ReasoningContent field to lambda c1&#39;s FullStr field</span>
</span></span><span style=display:flex><span>          <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MapFieldPaths</span><span style=color:#000;font-weight:700>([]</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;Message&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;ReasoningContent&#34;</span><span style=color:#000;font-weight:700>},</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;FullStr&#34;</span><span style=color:#000;font-weight:700>}))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>End</span><span style=color:#000;font-weight:700>().</span> <span style=color:#8f5902;font-style:italic>// Obtain the compose.END for method chaining</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// add an input from c1,</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// mapping full output of c1 to the map key &#39;content_count&#39;</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;c1&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;content_count&#34;</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// also add an input from c2,</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// mapping full output of c2 to the map key &#39;reasoning_content_count&#39;</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;c2&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;reasoning_content_count&#34;</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// compile the workflow just like compiling a Graph</span>
</span></span><span style=display:flex><span>    <span style=color:#000>run</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Compile</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;workflow compile error: %v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// invoke the workflow just like invoking a Graph</span>
</span></span><span style=display:flex><span>    <span style=color:#000>result</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>run</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Invoke</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>Message</span><span style=color:#000;font-weight:700>:</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>schema</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Message</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#000>Role</span><span style=color:#000;font-weight:700>:</span>             <span style=color:#000>schema</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Assistant</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>          <span style=color:#000>Content</span><span style=color:#000;font-weight:700>:</span>          <span style=color:#4e9a06>&#34;Hello world!&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>          <span style=color:#000>ReasoningContent</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;I need to say something meaningful&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>       <span style=color:#000>SubStr</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;o&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#8f5902;font-style:italic>// would like to count the occurrences of &#39;o&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;workflow run err: %v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Infof</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;%v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>result</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><a href=https://github.com/cloudwego/eino-examples/blob/main/compose/workflow/2_field_mapping/main.go>Eino example code link</a></p><p>The main message of this example is that <code>the AddInput</code> method can pass 0-n data field mapping rules, and can be called multiple times <code>AddInput</code>. This means:</p><ul><li>A node can reference any number of fields from the output of a predecessor node.</li><li>A node can reference fields from any number of predecessor nodes.</li><li>A mapping can be &ldquo;whole to field&rdquo;, &ldquo;field to whole&rdquo;, &ldquo;whole to whole&rdquo;, or a mapping between nested fields.</li><li>Different types above have different APIs to express this mapping:<ul><li>Top-level field to top-level field: <code>MapFields(string, string)</code></li><li>All outputs to top-level field: <code>ToField(string)</code></li><li>Top-level field to all inputs: <code>FromField(string)</code></li><li>Nested field to nested field: <code>MapFieldPaths(FieldPath, FieldPath)</code>, which is required when either the upstream or downstream is nested.</li><li>All outputs to nested field: <code>ToFieldPath(FieldPath)</code></li><li>Nested field to all inputs: <code>FromFieldPath(FieldPath)</code></li><li>All outputs to all inputs: Directly use <code>AddInput</code> without passing <code>FieldMapping</code>.</li></ul></li></ul><h2 id=advanced-features>Advanced Features</h2><h3 id=only-data-flow-no-control-flow>Only data flow, no control flow</h3><p>Imagine a simple scenario: START -> Addition Node -> Multiplication Node -> END. Here, the &ldquo;Multiplication Node&rdquo; multiplies a field from START by the result of the Addition Node:</p><p><a href=/img/eino/workflow_calculator_en.png target=_blank><img src=/img/eino/workflow_calculator_en.png width=100%></a></p><p>In the above figure, the multiplication node is executed after the addition node, i.e., the &ldquo;multiplication node&rdquo; is controlled by the &ldquo;addition node&rdquo;. However, the START node does not directly control the &ldquo;multiplication node&rdquo;, but merely passes the data. In the code, pure data flow is specified through <code>AddInputWithOptions(fromNode, fieldMappings, WithNoDirectDependency)</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>calculator</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>Add</span>      <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>int</span>
</span></span><span style=display:flex><span>       <span style=color:#000>Multiply</span> <span style=color:#204a87;font-weight:700>int</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>adder</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>in</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>out</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>_</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>range</span> <span style=color:#000>in</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#000>out</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#000>i</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>out</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>mul</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>A</span> <span style=color:#204a87;font-weight:700>int</span>
</span></span><span style=display:flex><span>       <span style=color:#000>B</span> <span style=color:#204a87;font-weight:700>int</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>multiplier</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>m</span> <span style=color:#000>mul</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>m</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>A</span> <span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>m</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>B</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewWorkflow</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>calculator</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>]()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddLambdaNode</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;adder&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>InvokableLambda</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>adder</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>START</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FromField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Add&#34;</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddLambdaNode</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;mul&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>InvokableLambda</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>multiplier</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;adder&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;A&#34;</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInputWithOptions</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>START</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FieldMapping</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MapFields</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Multiply&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;B&#34;</span><span style=color:#000;font-weight:700>)},</span>
</span></span><span style=display:flex><span>          <span style=color:#8f5902;font-style:italic>// use WithNoDirectDependency to declare a &#39;data-only&#39; dependency,</span>
</span></span><span style=display:flex><span>          <span style=color:#8f5902;font-style:italic>// in this case, START node&#39;s execution status will not determine whether &#39;mul&#39; node can execute.</span>
</span></span><span style=display:flex><span>          <span style=color:#8f5902;font-style:italic>// START node only passes one field of its output to &#39;mul&#39; node.</span>
</span></span><span style=display:flex><span>          <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithNoDirectDependency</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>End</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;mul&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>runner</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Compile</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;workflow compile error: %v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>result</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>runner</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Invoke</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#000>calculator</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>Add</span><span style=color:#000;font-weight:700>:</span>      <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>{</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>       <span style=color:#000>Multiply</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;workflow run err: %v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Infof</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;%d&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>result</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><a href=https://github.com/cloudwego/eino-examples/blob/main/compose/workflow/3_data_only/main.go>Eino examples Code Link</a></p><p>Newly introduced APIs in this example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>n</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>WorkflowNode</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>AddInputWithOptions</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>fromNodeKey</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>inputs</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>FieldMapping</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>opts</span> <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000>WorkflowAddInputOpt</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>WorkflowNode</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>n</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>addDependencyRelation</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>fromNodeKey</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>inputs</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>getAddInputOpts</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>and new Option:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithNoDirectDependency</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000>WorkflowAddInputOpt</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opt</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>workflowAddInputOpts</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>opt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>noDirectDependency</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Combined, it can add pure &ldquo;data dependencies&rdquo; to nodes.</p><h3 id=only-control-flow-no-data-flow>Only control flow, no data flow</h3><p>Imagine a scenario of &ldquo;sequential bidding with confidential quotes&rdquo;: START -> Bidder 1 -> Qualification Check -> Bidder 2 -> END:</p><p><a href=/img/eino/workflow_auction_en.png target=_blank><img src=/img/eino/workflow_auction_en.png width=100%></a></p><p>In the above figure, the normal connection is &ldquo;control + data&rdquo;, the dashed line is &ldquo;data only&rdquo;, and the bold line is &ldquo;control only&rdquo;. The logic is: input an initial price, bidder 1 gives bid 1, a branch determines whether it is high enough; if it is high enough, it ends directly; otherwise, the initial price is given to bidder 2, who gives bid 2, and finally bids 1 and 2 are aggregated and output.</p><p>The two bold lines branching out are both &ldquo;control only&rdquo; because neither bidder2 nor END depends on the data provided by the branch. In the code, the pure control flow is specified through <code>AddDependency(fromNode)</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>bidder1</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>in</span> <span style=color:#204a87;font-weight:700>float64</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>float64</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>in</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#0000cf;font-weight:700>1.0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>bidder2</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>in</span> <span style=color:#204a87;font-weight:700>float64</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>float64</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>in</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#0000cf;font-weight:700>2.0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewWorkflow</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>float64</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>float64</span><span style=color:#000;font-weight:700>]()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddLambdaNode</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;b1&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>InvokableLambda</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bidder1</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>START</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// add a branch just like adding branch in Graph.</span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddBranch</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;b1&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewGraphBranch</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>in</span> <span style=color:#204a87;font-weight:700>float64</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>in</span> <span style=color:#000;font-weight:700>&gt;</span> <span style=color:#0000cf;font-weight:700>5.0</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>END</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span> <span style=color:#4e9a06>&#34;b2&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>},</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>bool</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>END</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;b2&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>}))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddLambdaNode</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;b2&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>InvokableLambda</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bidder2</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// b2 executes strictly after b1, but does not rely on b1&#39;s output,</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// which means b2 depends on b1, but no data passing between them.</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddDependency</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;b1&#34;</span><span style=color:#000;font-weight:700>).</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInputWithOptions</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>START</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithNoDirectDependency</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>End</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;b1&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;bidder1&#34;</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;b2&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;bidder2&#34;</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>runner</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Compile</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;workflow compile error: %v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>result</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>runner</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Invoke</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#0000cf;font-weight:700>3.0</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;workflow run err: %v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Infof</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;%v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>result</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><a href=https://github.com/cloudwego/eino-examples/blob/main/compose/workflow/4_control_only_branch/main.go>Eino examples Code Link</a></p><p>New APIs introduced in this example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>n</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>WorkflowNode</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>AddDependency</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>fromNodeKey</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>WorkflowNode</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>n</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>addDependencyRelation</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>fromNodeKey</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span><span style=color:#000;font-weight:700>,</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>workflowAddInputOpts</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>dependencyWithoutInput</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>can specify a pure &ldquo;control dependency&rdquo; for a node via AddDependency.</p><h3 id=branch>Branch</h3><p>In the example above, we added a branch in almost exactly the same way as with the Graph API:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// add a branch just like adding branch in Graph.</span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddBranch</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;b1&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewGraphBranch</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>in</span> <span style=color:#204a87;font-weight:700>float64</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>in</span> <span style=color:#000;font-weight:700>&gt;</span> <span style=color:#0000cf;font-weight:700>5.0</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>END</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span> <span style=color:#4e9a06>&#34;b2&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>},</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>bool</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>END</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;b2&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>}))</span>
</span></span></code></pre></div><p>The semantics of branch are the same as those of branch in the AllPredecessor mode of Graph:</p><ul><li>There is one and only one &lsquo;fromNode&rsquo;, meaning that a branch can have only one pre-control node.</li><li>Single selection (NewGraphBranch) and multiple selection (NewGraphMultiBranch) are supported.</li><li>The selected branch is executable, while the unselected branch is marked as skip.</li><li>A node can only be executed when all incoming edges are completed (successfully or skipped) and at least one edge succeeds (e.g., END in the example above).</li><li>If all incoming edges of a node are skip, then all outgoing edges of this node are automatically marked as skip.</li></ul><p>Meanwhile, there is a core difference between the workflow branch and the graph branch:</p><ul><li>The graph branch is always &ldquo;control and data integrated&rdquo;, and the input of the downstream node of the branch must be the output of the branch fromNode.</li><li>The Workflow branch is always &ldquo;control-only&rdquo;, and the inputs of the downstream nodes of the branch are specified by themselves through the AddInputWithOptions method.</li></ul><p>New APIs involved:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>wf</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Workflow</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>I</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>O</span><span style=color:#000;font-weight:700>])</span> <span style=color:#000>AddBranch</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>fromNodeKey</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>branch</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>GraphBranch</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>WorkflowBranch</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>wb</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>WorkflowBranch</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>fromNodeKey</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>fromNodeKey</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>       <span style=color:#000>GraphBranch</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>branch</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>workflowBranches</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>workflowBranches</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>wb</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>wb</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>is almost identical to Graph.AddBranch in signature and can add a branch to the workflow.</p><h3 id=static-values>Static Values</h3><p>Let&rsquo;s modify the above &ldquo;auction&rdquo; example by assigning a static configuration of &ldquo;budget&rdquo; to bidder 1 and bidder 2 respectively:</p><p><a href=/img/eino/workflow_auction_static_values.png target=_blank><img src=/img/eino/workflow_auction_static_values.png width=100%></a></p><p>budget1 and budget2 will be injected into the inputs of bidder1 and bidder2 respectively in the form of &ldquo;static values&rdquo;. Use <code>SetStaticValue</code> method to configure static values for workflow nodes:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>bidInput</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>Price</span>  <span style=color:#204a87;font-weight:700>float64</span>
</span></span><span style=display:flex><span>       <span style=color:#000>Budget</span> <span style=color:#204a87;font-weight:700>float64</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>bidder</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>in</span> <span style=color:#000>bidInput</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>float64</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>in</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Price</span> <span style=color:#ce5c00;font-weight:700>&gt;=</span> <span style=color:#000>in</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Budget</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>in</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Budget</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>in</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Price</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>rand</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Float64</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>in</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Budget</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewWorkflow</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>float64</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>float64</span><span style=color:#000;font-weight:700>]()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddLambdaNode</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;b1&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>InvokableLambda</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bidder</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>START</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Price&#34;</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// set &#39;Budget&#39; field to 3.0 for b1</span>
</span></span><span style=display:flex><span>       <span style=color:#000>SetStaticValue</span><span style=color:#000;font-weight:700>([]</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;Budget&#34;</span><span style=color:#000;font-weight:700>},</span> <span style=color:#0000cf;font-weight:700>3.0</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// add a branch just like adding branch in Graph.</span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddBranch</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;b1&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewGraphBranch</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>in</span> <span style=color:#204a87;font-weight:700>float64</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>in</span> <span style=color:#000;font-weight:700>&gt;</span> <span style=color:#0000cf;font-weight:700>5.0</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>END</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span> <span style=color:#4e9a06>&#34;b2&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>},</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>bool</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>END</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;b2&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>}))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddLambdaNode</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;b2&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>InvokableLambda</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bidder</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// b2 executes strictly after b1, but does not rely on b1&#39;s output,</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// which means b2 depends on b1, but no data passing between them.</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddDependency</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;b1&#34;</span><span style=color:#000;font-weight:700>).</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInputWithOptions</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>START</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FieldMapping</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Price&#34;</span><span style=color:#000;font-weight:700>)},</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithNoDirectDependency</span><span style=color:#000;font-weight:700>()).</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// set &#39;Budget&#39; field to 4.0 for b2</span>
</span></span><span style=display:flex><span>       <span style=color:#000>SetStaticValue</span><span style=color:#000;font-weight:700>([]</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;Budget&#34;</span><span style=color:#000;font-weight:700>},</span> <span style=color:#0000cf;font-weight:700>4.0</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>End</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;b1&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;bidder1&#34;</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;b2&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;bidder2&#34;</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>runner</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Compile</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;workflow compile error: %v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>result</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>runner</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Invoke</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#0000cf;font-weight:700>3.0</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;workflow run err: %v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Infof</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;%v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>result</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><a href=https://github.com/cloudwego/eino-examples/blob/main/compose/workflow/5_static_values/main.go>Eino examples Code Link</a></p><p>New APIs involved here:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>n</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>WorkflowNode</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>SetStaticValue</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>path</span> <span style=color:#000>FieldPath</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>value</span> <span style=color:#204a87;font-weight:700>any</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>WorkflowNode</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>n</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>staticValues</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>path</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>join</span><span style=color:#000;font-weight:700>()]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>value</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>n</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Set a static value for the specified field of the Workflow node through this method.</p><h3 id=streaming-effect>Streaming Effect</h3><p>Returning to the previous &ldquo;character count&rdquo; example, if the input to our workflow is no longer a single message but a message stream, and our counting function can count each message chunk in the stream separately and return a &ldquo;count stream&rdquo;:</p><p><a href=/img/eino/workflow_stream_en.png target=_blank><img src=/img/eino/workflow_stream_en.png width=100%></a></p><p>We will make some modifications to the previous example:</p><ul><li>Change InvokableLambda to TransformableLambda so that it can consume streams and produce streams.</li><li>Change SubStr in the input to a static value and inject it into c1 and c2.</li><li>The overall input of the Workflow has been changed to *schema.Message.</li><li>Invoke the workflow in Transform mode and pass in a stream containing 2 *schema.Message.</li></ul><p>Completed code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// demonstrates the stream field mapping ability of eino workflow.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// It&#39;s modified from 2_field_mapping.</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>counter</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>FullStr</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#8f5902;font-style:italic>// exported because we will do field mapping for this field</span>
</span></span><span style=display:flex><span>       <span style=color:#000>SubStr</span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#8f5902;font-style:italic>// exported because we will do field mapping for this field</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// wordCounter is a transformable lambda function that</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// count occurrences of SubStr within FullStr, for each trunk.</span>
</span></span><span style=display:flex><span>    <span style=color:#000>wordCounter</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>c</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>schema</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StreamReader</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>counter</span><span style=color:#000;font-weight:700>])</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>       <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>schema</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StreamReader</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>],</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>subStr</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>cachedStr</span> <span style=color:#204a87;font-weight:700>string</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>schema</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StreamReaderWithConvert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>c</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>co</span> <span style=color:#000>counter</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>if</span> <span style=color:#204a87>len</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>co</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SubStr</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>&gt;</span> <span style=color:#0000cf;font-weight:700>0</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>             <span style=color:#8f5902;font-style:italic>// static values will not always come in the first chunk,</span>
</span></span><span style=display:flex><span>             <span style=color:#8f5902;font-style:italic>// so before the static value (SubStr) comes in,</span>
</span></span><span style=display:flex><span>             <span style=color:#8f5902;font-style:italic>// we need to cache the full string</span>
</span></span><span style=display:flex><span>             <span style=color:#000>subStr</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>co</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SubStr</span>
</span></span><span style=display:flex><span>             <span style=color:#000>fullStr</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>cachedStr</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>co</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FullStr</span>
</span></span><span style=display:flex><span>             <span style=color:#000>cachedStr</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>strings</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Count</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>fullStr</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>subStr</span><span style=color:#000;font-weight:700>),</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>          <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>if</span> <span style=color:#204a87>len</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>subStr</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>&gt;</span> <span style=color:#0000cf;font-weight:700>0</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>             <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>strings</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Count</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>co</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FullStr</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>subStr</span><span style=color:#000;font-weight:700>),</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>          <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>          <span style=color:#000>cachedStr</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#000>co</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FullStr</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>return</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>schema</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ErrNoValue</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>}),</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// create a workflow just like a Graph</span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewWorkflow</span><span style=color:#000;font-weight:700>[</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>schema</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Message</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>]()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// add lambda c1 just like in Graph</span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddLambdaNode</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;c1&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>TransformableLambda</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>wordCounter</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>START</span><span style=color:#000;font-weight:700>,</span> <span style=color:#8f5902;font-style:italic>// add an input from START, specifying 2 field mappings</span>
</span></span><span style=display:flex><span>          <span style=color:#8f5902;font-style:italic>// map START&#39;s Message&#39;s Content field to lambda c1&#39;s FullStr field</span>
</span></span><span style=display:flex><span>          <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MapFields</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Content&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;FullStr&#34;</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// we can set static values even if the input will be stream</span>
</span></span><span style=display:flex><span>       <span style=color:#000>SetStaticValue</span><span style=color:#000;font-weight:700>([]</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;SubStr&#34;</span><span style=color:#000;font-weight:700>},</span> <span style=color:#4e9a06>&#34;o&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// add lambda c2 just like in Graph</span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddLambdaNode</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;c2&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>TransformableLambda</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>wordCounter</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>START</span><span style=color:#000;font-weight:700>,</span> <span style=color:#8f5902;font-style:italic>// add an input from START, specifying 2 field mappings</span>
</span></span><span style=display:flex><span>          <span style=color:#8f5902;font-style:italic>// map START&#39;s Message&#39;s ReasoningContent field to lambda c1&#39;s FullStr field</span>
</span></span><span style=display:flex><span>          <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MapFields</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;ReasoningContent&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;FullStr&#34;</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#000>SetStaticValue</span><span style=color:#000;font-weight:700>([]</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;SubStr&#34;</span><span style=color:#000;font-weight:700>},</span> <span style=color:#4e9a06>&#34;o&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>End</span><span style=color:#000;font-weight:700>().</span> <span style=color:#8f5902;font-style:italic>// Obtain the compose.END for method chaining</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// add an input from c1,</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// mapping full output of c1 to the map key &#39;content_count&#39;</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;c1&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;content_count&#34;</span><span style=color:#000;font-weight:700>)).</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// also add an input from c2,</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic>// mapping full output of c2 to the map key &#39;reasoning_content_count&#39;</span>
</span></span><span style=display:flex><span>       <span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;c2&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>compose</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;reasoning_content_count&#34;</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// compile the workflow just like compiling a Graph</span>
</span></span><span style=display:flex><span>    <span style=color:#000>run</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Compile</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;workflow compile error: %v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// call the workflow using Transform just like calling a Graph with Transform</span>
</span></span><span style=display:flex><span>    <span style=color:#000>result</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>run</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Transform</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>(),</span>
</span></span><span style=display:flex><span>       <span style=color:#000>schema</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StreamReaderFromArray</span><span style=color:#000;font-weight:700>([]</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>schema</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Message</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>             <span style=color:#000>Role</span><span style=color:#000;font-weight:700>:</span>             <span style=color:#000>schema</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Assistant</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>             <span style=color:#000>ReasoningContent</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;I need to say something meaningful&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>          <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>          <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>             <span style=color:#000>Role</span><span style=color:#000;font-weight:700>:</span>    <span style=color:#000>schema</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Assistant</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>             <span style=color:#000>Content</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Hello world!&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>          <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>}))</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;workflow run err: %v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>contentCount</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>reasoningCount</span> <span style=color:#204a87;font-weight:700>int</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>chunk</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Recv</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>io</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>EOF</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>             <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Close</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>             <span style=color:#204a87;font-weight:700>break</span>
</span></span><span style=display:flex><span>          <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;workflow receive err: %v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>return</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Infof</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;%v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>chunk</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       <span style=color:#000>contentCount</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#000>chunk</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;content_count&#34;</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>       <span style=color:#000>reasoningCount</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#000>chunk</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;reasoning_content_count&#34;</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Infof</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;content count: %d&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>contentCount</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>logs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Infof</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;reasoning count: %d&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>reasoningCount</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><a href=https://github.com/cloudwego/eino-examples/blob/main/compose/workflow/6_stream_field_map/main.go>Eino examples Code Link</a></p><p>Based on the above example, we have summarized some characteristics of the workflow streaming:</p><ul><li>remains 100% Eino stream: four paradigms (invoke, stream, collect, transform), automatically converted, copied, spliced, and merged by the Eino framework.</li><li>The configuration of data field mapping does not require special handling of streams: regardless of whether the actual input and output are streams, the writing method of AddInput remains the same, and the Eino framework is responsible for handling stream-based mapping.</li><li>Static value, no special handling of the stream is required: Even if the actual input is a stream, SetStaticValue can be used in the same way. The Eino framework will place the static value in the input stream, but it is not necessarily the first chunk to be read.</li></ul><h3 id=scenarios-of-data-field-mapping>Scenarios of data field mapping</h3><h4 id=type-alignment>Type Alignment</h4><p>Workflow follows the same set of type alignment rules as Graph, except that the alignment granularity has changed from complete input-output alignment to type alignment between mapped paired fields. Specifically:</p><ul><li>The types are exactly the same, and they will pass the validation during Compile, ensuring alignment.</li><li>Although the types are different, the upstream can be assigned to the downstream (for example, the specific type of the upstream and Any type of the downstream), and the validation will pass during compilation, ensuring alignment.</li><li>Upstream cannot be assigned to downstream (e.g., upstream int, downstream string), and an error will occur during compilation.</li><li>The upstream may be assignable to the downstream (e.g., upstream Any, downstream int), which cannot be determined at compile time and will be postponed until execution, when the actual type of the upstream is retrieved and then judged. At this time, if it is judged that the upstream cannot be assigned to the downstream, an error will be thrown.</li></ul><h4 id=scenarios-of-merge>Scenarios of Merge</h4><p>Merge refers to the situation where the input of a node is mapped from multiple <code>data field mapping</code>.</p><ul><li>maps to multiple different fields: Supported</li><li>Mapping to the same field: Not supported</li><li>is mapped to the whole, and also mapped to the data field: conflict, not supported</li></ul><h4 id=nested-mapstringany>nested map[string]any</h4><p>For example, this data field mapping:<code>ToFieldPath([]string{"a","b"})</code>, the input type of the target node is <code>map[string]any</code>, and the order during mapping is:</p><ol><li>Level 1 &ldquo;a&rdquo;, the result at this time is <code>map[string]any{"a": nil}</code></li><li>Level 2 &ldquo;b&rdquo;, where the result is <code>map[string]any{"a": map[string]any{"b": x}}</code></li></ol><p>It can be seen that at the second level, the Eino framework automatically replaced any with the actual <code>map[string]any</code></p><h4 id=customextractor>CustomExtractor</h4><p>In some scenarios, the semantics of standard data field mapping cannot support, for example, when the upstream is []int and we want to extract the first element and map it to the downstream, in this case we use <code>WithCustomExtractor</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Run</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;custom extract from array element&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>NewWorkflow</span><span style=color:#000;font-weight:700>[[]</span><span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>]()</span>
</span></span><span style=display:flex><span>    <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>End</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>AddInput</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>START</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ToField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;a&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>WithCustomExtractor</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>input</span> <span style=color:#204a87;font-weight:700>any</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>any</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>input</span><span style=color:#000;font-weight:700>.([]</span><span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>)[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>],</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>})))</span>
</span></span><span style=display:flex><span>    <span style=color:#000>r</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>wf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Compile</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>    <span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NoError</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>result</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>r</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Invoke</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>{</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>    <span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NoError</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Equal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;a&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>},</span> <span style=color:#000>result</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>})</span>
</span></span></code></pre></div><p>When using WithCustomExtractor, all type alignment validations during Compile time cannot be performed and can only be postponed to runtime validation.</p><h3 id=some-constraints>Some constraints</h3><ul><li>Restrictions on Map Key: Only string or string alias (types that can be converted to string) are supported.</li><li>Unsupported CompileOption:<ul><li><code>WithNodeTriggerMode</code>, because it is fixed to <code>AllPredecessor</code>.</li><li><code>WithMaxRunSteps</code>, because there will be no loops.</li></ul></li><li>If the mapping source is Map Key, the Map must contain this key. However, if the mapping source is Stream, Einos cannot determine whether this key appears at least once in all frames of the stream, so verification cannot be performed for Stream.</li><li>If the source or target field of the mapping belongs to a struct, these fields must be exported because reflection is used internally.</li><li>Mapping source is nil: Generally supported, only reports an error when the mapping target cannot be nil, such as when the target is a basic type (int, etc.).</li></ul><h2 id=practical-application>Practical Application</h2><h3 id=coze-studio-workflow>Coze-Studio Workflow</h3><p><a href=https://github.com/coze-dev/coze-studio>Coze-Studio</a> The workflow engine of the open-source version is based on the Eino Workflow orchestration framework. See: <a href=https://github.com/coze-dev/coze-studio/wiki/11.-%E6%96%B0%E5%A2%9E%E5%B7%A5%E4%BD%9C%E6%B5%81%E8%8A%82%E7%82%B9%E7%B1%BB%E5%9E%8B%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89>11. New Workflow Node Type (Backend)</a></p><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p></div><script>const yesButton=document.querySelector(".feedback--answer-yes"),noButton=document.querySelector(".feedback--answer-no"),yesResponse=document.querySelector(".feedback--response-yes"),noResponse=document.querySelector(".feedback--response-no"),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=e=>{if(typeof ga!="function")return;const t={command:"send",hitType:"event",category:"Helpful",action:"click",label:window.location.pathname,value:e};ga(t.command,t.hitType,t.category,t.action,t.label,t.value)};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(1)}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(0)})</script><br><div class="text-muted mt-5 pt-3 border-top">Last modified
August 22, 2025
: <a href=https://github.com/cloudwego/cloudwego.github.io/commit/dd46ca4911c8d8590edfc39e9a7b2a8192a39297>Provided the missing Chinese versions of the eino-indexer-es8 and eino-retriever-es8 documentation, added error handling (#1342) (dd46ca4)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Lark aria-label=Lark><a class=text-white target=_blank rel=noopener href="https://applink.feishu.cn/client/chat/chatter/add_by_link?link_token=693v2544-2664-4421-b50f-7f1912p745r6" aria-label=Lark><img src=/webfonts/lark.svg alt style=width:26px;line-height:32.5px;margin-bottom:6px;fill:#fff></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/CloudWeGo aria-label=Twitter><img src=/webfonts/x-twitter.svg alt style=width:26px;line-height:32.5px;margin-bottom:6px;fill:#fff></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/cloudwego aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Discord aria-label=Discord><a class=text-white target=_blank rel=noopener href=https://discord.gg/jceZSE7DsW aria-label=Discord><i class="fab fa-discord"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2025 The CloudWeGo Authors</small><p class="mt-2 text-white"><a class=cloudwego-link href=/about/ target=_blank rel=noopener>About</a>
|
<a class=cloudwego-link href=https://github.com/cloudwego/cloudwego.github.io/blob/main/LICENSE target=_blank rel=noopener>License</a></p></div></div></div></footer></div><script src=/js/popper.min.js></script><script src=/js/bootstrap.min.js></script><script src=/js/main.min.9a8648b987db06195f5768f0d7516e8df7c27669e91e383e25c5d07cd6325605.js integrity="sha256-moZIuYfbBhlfV2jw11FujffCdmnpHjg+JcXQfNYyVgU=" crossorigin=anonymous></script><script src=/js/prism.js></script><script src=/js/prism-custom.js></script><script src=/js/tabpane-persist.js></script><script src=/js/docsearch.js></script><script type=text/javascript>let siteLang=window.location.pathname.startsWith("/zh/")?"zh":"en";docsearch({appId:"V7I042F992",apiKey:"8380a7ac88106841cb43fb000fa2edb4",indexName:"cloudwego",container:"#docsearch",searchParameters:{hitsPerPage:5,facetFilters:[`lang:${siteLang}`]},transformItems(e){return e.map(e=>({...e,url:e.url.replace("www.cloudwego.io",location.host).replace("https:",location.protocol)}))}})</script><script src=/js/outbound-link.js></script><script src=/js/navScroll.js></script></body></html>