<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.151.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Getting Started | CloudWeGo</title><meta name=description content="A leading practice for building enterprise cloud native middleware!"><meta property="og:url" content="https://www.cloudwego.io/docs/volo/volo-grpc/getting-started/"><meta property="og:site_name" content="CloudWeGo"><meta property="og:title" content="Getting Started"><meta property="og:description" content="This document covers the preparation of the development environment, quick start and basic tutorials of Volo-gRPC."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Getting Started"><meta itemprop=description content="This document covers the preparation of the development environment, quick start and basic tutorials of Volo-gRPC."><meta itemprop=dateModified content="2025-06-23T13:05:53+08:00"><meta itemprop=wordCount content="1066"><meta itemprop=keywords content="Volo,gRPC,Tutorial,Install"><meta name=twitter:card content="summary"><meta name=twitter:title content="Getting Started"><meta name=twitter:description content="This document covers the preparation of the development environment, quick start and basic tutorials of Volo-gRPC."><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYWRQRLPRM"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QYWRQRLPRM")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?f1808c42af827f368aa7eca3baae6d55",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=preload href=/scss/main.min.d82085885aff5076523f2bb4904f9e11bd16c28b46ecb5319ec0d01cb087e9de.css as=style><link href=/scss/main.min.d82085885aff5076523f2bb4904f9e11bd16c28b46ecb5319ec0d01cb087e9de.css rel=stylesheet integrity><script src=/js/jquery.min.js></script><link rel=stylesheet href=/css/prism.css><link rel=stylesheet href=/css/docsearch.css></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand-xl navbar-dark td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><img src=/img/logo.png></span>
</a><button class=navbar-toggler type=button data-toggle=collapse data-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0 ml-auto"><li class="dropdown sub-menu active"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Documentation</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/kitex/>Kitex</a>
<a class=dropdown-item href=/docs/hertz/>Hertz</a>
<a class=dropdown-item href=/docs/volo/>Volo</a>
<a class=dropdown-item href=/docs/netpoll/>Netpoll</a>
<a class=dropdown-item href=/docs/eino/>Eino</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/cooperation/><span>Cooperation</span></a></li><li class="dropdown sub-menu"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Security</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/security/safety-bulletin/>safety-bulletin</a>
<a class=dropdown-item href=/security/vulnerability-reporting/>vulnerability-reporting</a></div></li><li class="nav-item dropdown mr-4"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/volo/volo-grpc/getting-started/>中文</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><div id=docsearch></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><div id=docsearch></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/volo/volo-grpc/getting-started/>中文</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsvolo-li><input type=checkbox id=m-docsvolo-check checked>
<label for=m-docsvolo-check><a href=/docs/volo/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolo><span>Volo</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolooverview-li><input type=checkbox id=m-docsvolooverview-check checked>
<label for=m-docsvolooverview-check><a href=/docs/volo/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolooverview><span>Overview</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsvolocli-li><input type=checkbox id=m-docsvolocli-check checked>
<label for=m-docsvolocli-check><a href=/docs/volo/cli/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolocli><span>Cli</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolocligetting-started-li><input type=checkbox id=m-docsvolocligetting-started-check>
<label for=m-docsvolocligetting-started-check><a href=/docs/volo/cli/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolocligetting-started><span>Getting Started</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvoloclimigrate-li><input type=checkbox id=m-docsvoloclimigrate-check>
<label for=m-docsvoloclimigrate-check><a href=/docs/volo/cli/migrate/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvoloclimigrate><span>Migrate</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsvolovolo-http-li><input type=checkbox id=m-docsvolovolo-http-check checked>
<label for=m-docsvolovolo-http-check><a href=/docs/volo/volo-http/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolovolo-http><span>Volo-HTTP</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-httpoverview-li><input type=checkbox id=m-docsvolovolo-httpoverview-check>
<label for=m-docsvolovolo-httpoverview-check><a href=/docs/volo/volo-http/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolovolo-httpoverview><span>Overview</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-httpgetting-started-li><input type=checkbox id=m-docsvolovolo-httpgetting-started-check>
<label for=m-docsvolovolo-httpgetting-started-check><a href=/docs/volo/volo-http/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolovolo-httpgetting-started><span>Getting Started</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsvolovolo-httptutorials-li><input type=checkbox id=m-docsvolovolo-httptutorials-check>
<label for=m-docsvolovolo-httptutorials-check><a href=/docs/volo/volo-http/tutorials/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolovolo-httptutorials><span>Tutorials</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-httptutorialsroute-li><input type=checkbox id=m-docsvolovolo-httptutorialsroute-check>
<label for=m-docsvolovolo-httptutorialsroute-check><a href=/docs/volo/volo-http/tutorials/route/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvolovolo-httptutorialsroute><span>Route</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-httptutorialsrequest-li><input type=checkbox id=m-docsvolovolo-httptutorialsrequest-check>
<label for=m-docsvolovolo-httptutorialsrequest-check><a href=/docs/volo/volo-http/tutorials/request/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvolovolo-httptutorialsrequest><span>Request</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-httptutorialsresponse-li><input type=checkbox id=m-docsvolovolo-httptutorialsresponse-check>
<label for=m-docsvolovolo-httptutorialsresponse-check><a href=/docs/volo/volo-http/tutorials/response/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvolovolo-httptutorialsresponse><span>Response</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-httptutorialsmiddleware-li><input type=checkbox id=m-docsvolovolo-httptutorialsmiddleware-check>
<label for=m-docsvolovolo-httptutorialsmiddleware-check><a href=/docs/volo/volo-http/tutorials/middleware/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvolovolo-httptutorialsmiddleware><span>Middleware</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-httptutorialsstatic-fs-li><input type=checkbox id=m-docsvolovolo-httptutorialsstatic-fs-check>
<label for=m-docsvolovolo-httptutorialsstatic-fs-check><a href=/docs/volo/volo-http/tutorials/static-fs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvolovolo-httptutorialsstatic-fs><span>Static-FS</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-httptutorialswebsocket-li><input type=checkbox id=m-docsvolovolo-httptutorialswebsocket-check>
<label for=m-docsvolovolo-httptutorialswebsocket-check><a href=/docs/volo/volo-http/tutorials/websocket/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvolovolo-httptutorialswebsocket><span>WebSocket</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsvolovolo-thrift-li><input type=checkbox id=m-docsvolovolo-thrift-check checked>
<label for=m-docsvolovolo-thrift-check><a href=/docs/volo/volo-thrift/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolovolo-thrift><span>Volo-Thrift</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-thriftgetting-started-li><input type=checkbox id=m-docsvolovolo-thriftgetting-started-check>
<label for=m-docsvolovolo-thriftgetting-started-check><a href=/docs/volo/volo-thrift/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolovolo-thriftgetting-started><span>Getting Started</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsvolovolo-grpc-li><input type=checkbox id=m-docsvolovolo-grpc-check checked>
<label for=m-docsvolovolo-grpc-check><a href=/docs/volo/volo-grpc/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolovolo-grpc><span>Volo-gRPC</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsvolovolo-grpcgetting-started-li><input type=checkbox id=m-docsvolovolo-grpcgetting-started-check checked>
<label for=m-docsvolovolo-grpcgetting-started-check><a href=/docs/volo/volo-grpc/getting-started/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__section" id=m-docsvolovolo-grpcgetting-started><span class=td-sidebar-nav-active-item>Getting Started</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsvologuide-li><input type=checkbox id=m-docsvologuide-check checked>
<label for=m-docsvologuide-check><a href=/docs/volo/guide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvologuide><span>Guide</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvologuidewith_callopt-li><input type=checkbox id=m-docsvologuidewith_callopt-check>
<label for=m-docsvologuidewith_callopt-check><a href=/docs/volo/guide/with_callopt/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvologuidewith_callopt><span>Specifying CallOpt During Invocation</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvologuidediscovery_lb-li><input type=checkbox id=m-docsvologuidediscovery_lb-check>
<label for=m-docsvologuidediscovery_lb-check><a href=/docs/volo/guide/discovery_lb/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvologuidediscovery_lb><span>Custom Service Discovery and Load Balancing</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvologuideobservability-li><input type=checkbox id=m-docsvologuideobservability-check>
<label for=m-docsvologuideobservability-check><a href=/docs/volo/guide/observability/ title="Custom Logging / Monitoring / Tracing" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvologuideobservability><span>Logging / Monitoring / Tracing</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvologuidemetadata-li><input type=checkbox id=m-docsvologuidemetadata-check>
<label for=m-docsvologuidemetadata-check><a href=/docs/volo/guide/metadata/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvologuidemetadata><span>Metadata Propagation</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvologuideconfig-li><input type=checkbox id=m-docsvologuideconfig-check>
<label for=m-docsvologuideconfig-check><a href=/docs/volo/guide/config/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvologuideconfig><span>volo.yml Configuration File Format</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsvolomotore-li><input type=checkbox id=m-docsvolomotore-check checked>
<label for=m-docsvolomotore-check><a href=/docs/volo/motore/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolomotore><span>Motore</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolomotoregetting_started-li><input type=checkbox id=m-docsvolomotoregetting_started-check>
<label for=m-docsvolomotoregetting_started-check><a href=/docs/volo/motore/getting_started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvolomotoregetting_started><span>Getting Started</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolomotoremotore_volo_relationship-li><input type=checkbox id=m-docsvolomotoremotore_volo_relationship-check>
<label for=m-docsvolomotoremotore_volo_relationship-check><a href=/docs/volo/motore/motore_volo_relationship/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvolomotoremotore_volo_relationship><span>The Relationship Between Motore and Volo</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolopilota-li><input type=checkbox id=m-docsvolopilota-check checked>
<label for=m-docsvolopilota-check><a href=/docs/volo/pilota/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolopilota><span>Pilota</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolofaq-li><input type=checkbox id=m-docsvolofaq-check checked>
<label for=m-docsvolofaq-check><a href=/docs/volo/faq/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolofaq><span>FAQ</span></a></label></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/cloudwego/cloudwego.github.io/edit/main/content/en/docs/volo/volo-grpc/getting-started/_index.md class="td-page-meta--edit td-page-meta__edit" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/new/main/content/en/docs/volo/volo-grpc/getting-started?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class="td-page-meta--child td-page-meta__child" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/issues/new?title=Getting%20Started" class="td-page-meta--issue td-page-meta__issue" target=_blank rel=noopener><i class="fa-brands fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/cloudwego/volo/issues/new/choose class="td-page-meta--project td-page-meta__project-issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#part-1-create-a-grpc-server>Part 1. Create a gRPC Server</a><ul><li><a href=#11-why-idl>1.1 Why IDL</a></li><li><a href=#12-write-idl>1.2 Write IDL</a></li></ul></li><li><a href=#part-2-create-a-client>Part 2. Create a Client</a></li><li><a href=#part-3-add-a-middleware>Part 3. Add a Middleware</a></li><li><a href=#part-4-whats-next>Part 4. What&rsquo;s Next?</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/>Documentation</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/volo/>Volo</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/volo/volo-grpc/>Volo-gRPC</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://www.cloudwego.io/docs/volo/volo-grpc/getting-started/>Getting Started</a></li></ol></nav><div class=td-content><h1>Getting Started</h1><div class=lead>This document covers the preparation of the development environment, quick start and basic tutorials of Volo-gRPC.</div><header class=article-meta></header><h2 id=part-1-create-a-grpc-server>Part 1. Create a gRPC Server</h2><p>Volo-gRPC is an RPC framework so that the bottom layer requires two major functions: Serialization and Transport.</p><p>IDL is short for <code>Interface Definition Language</code>.</p><h3 id=11-why-idl>1.1 Why IDL</h3><p>If we want to do RPC, we need to know what interface is for the server, what parameters to pass, and what the return value is,
just like two people talking to each other, we need to make sure we are speaking the same language and doing the same thing.</p><p>At this time, we need to use IDL to specify the protocol for both sides, just like when writing code, we need to know the function signature while calling a function.</p><p>Protobuf IDL is a full-stack RPC solution for cross-language, the specific syntax can be seen in <a href=https://developers.google.com/protocol-buffers/docs/proto3>protocol-buffers/docs/proto3</a>.</p><h3 id=12-write-idl>1.2 Write IDL</h3><p>To create a gRPC project, we need to write a protobuf IDL first.</p><p>In your working directory, execute the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir volo-example <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#204a87>cd</span> volo-example
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir idl <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> touch idl/volo_example.proto
</span></span></code></pre></div><p>Subsequently, use your favorite text editor to enter the following content:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-protobuf data-lang=protobuf><span style=display:flex><span><span style=color:#000>syntax</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;proto3&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>volo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>example</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Item</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int64</span> <span style=color:#000>id</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>title</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>content</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>extra</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>GetItemRequest</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int64</span> <span style=color:#000>id</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>GetItemResponse</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>Item</span> <span style=color:#000>item</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>service</span> <span style=color:#000>ItemService</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>rpc</span> <span style=color:#000>GetItem</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GetItemRequest</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>returns</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>GetItemResponse</span><span style=color:#000;font-weight:700>);</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>After saving and exiting, we execute the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>volo init --includes<span style=color:#ce5c00;font-weight:700>=</span>idl volo-example idl/volo_example.proto
</span></span></code></pre></div><p><strong>Here we use the <code>init</code> command, followed by the name of our project, which means we need to generate template code. At the end, you need to specify an IDL used by the server.</strong></p><p>If you only need to add an IDL (such as the client IDL) without generating a template, do as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>volo idl add idl/volo_example.proto
</span></span></code></pre></div><p>| What&rsquo;s more, the volo tool also supports downloading IDL from git and then generating code, such as:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>volo idl add -g git@github.com:org/repo.git -r main /path/to/your/idl.proto
</span></span></code></pre></div><p>| You may directly enter volo to see the detailed usage ~ next back to the topic ~</p><p>At this point, our entire directory structure looks like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>.
</span></span><span style=display:flex><span>├── Cargo.toml
</span></span><span style=display:flex><span>├── idl
</span></span><span style=display:flex><span>│   └── volo_example.proto
</span></span><span style=display:flex><span>├── rust-toolchain.toml
</span></span><span style=display:flex><span>├── src
</span></span><span style=display:flex><span>│   ├── bin
</span></span><span style=display:flex><span>│   │   └── server.rs
</span></span><span style=display:flex><span>│   └── lib.rs
</span></span><span style=display:flex><span>└── volo-gen
</span></span><span style=display:flex><span>    ├── Cargo.toml
</span></span><span style=display:flex><span>    ├── build.rs
</span></span><span style=display:flex><span>    ├── src
</span></span><span style=display:flex><span>    │   └── lib.rs
</span></span><span style=display:flex><span>    └── volo.yml
</span></span></code></pre></div><p>Then we open <code>src/lib.rs</code> and add the method implementation to the <code>impl</code> block. The resulting code should look like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#204a87;font-weight:700>pub</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000>S</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>impl</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>volo_gen</span>::<span style=color:#000>volo</span>::<span style=color:#000>example</span>::<span style=color:#000>ItemService</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>for</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>S</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic>// This is the part of the code we need to add
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>async</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>fn</span> <span style=color:#000>get_item</span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#000>_req</span>: <span style=color:#000>volo_grpc</span>::<span style=color:#000>Request</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>volo_gen</span>::<span style=color:#000>volo</span>::<span style=color:#000>example</span>::<span style=color:#000>GetItemRequest</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline> </span>-&gt; <span style=color:#000>core</span>::<span style=color:#000>result</span>::<span style=color:#204a87>Result</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>volo_grpc</span>::<span style=color:#000>Response</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>volo_gen</span>::<span style=color:#000>volo</span>::<span style=color:#000>example</span>::<span style=color:#000>GetItemResponse</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>volo_grpc</span>::<span style=color:#000>Status</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87>Ok</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>volo_grpc</span>::<span style=color:#000>Response</span>::<span style=color:#000>new</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>Default</span>::<span style=color:#000>default</span><span style=color:#000;font-weight:700>()))</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Then execute:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cargo update <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> cargo build
</span></span></code></pre></div><p>At this point, you will find <code>volo_gen.rs</code> file under <a href=https://doc.rust-lang.org/cargo/reference/environment-variables.html#environment-variables-cargo-sets-for-build-scripts>OUT_DIR Directory</a>.</p><p>Then execute the following command to get our server running:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cargo run --bin server
</span></span></code></pre></div><p>At this point, we have our server running!</p><h2 id=part-2-create-a-client>Part 2. Create a Client</h2><p>In the previous section, we wrote a server, now let&rsquo;s write a client and call the server.</p><p>First, create a file called <code>src/bin/client.rs</code> and type the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#204a87;font-weight:700>use</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>lazy_static</span>::<span style=color:#000>lazy_static</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>use</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>std</span>::<span style=color:#000>net</span>::<span style=color:#000>SocketAddr</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>lazy_static!</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>static</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>ref</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>CLIENT</span>: <span style=color:#000>volo_gen</span>::<span style=color:#000>volo</span>::<span style=color:#000>example</span>::<span style=color:#000>ItemServiceClient</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>let</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>addr</span>: <span style=color:#000>SocketAddr</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;[::1]:8080&#34;</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>parse</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>unwrap</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#000>volo_gen</span>::<span style=color:#000>volo</span>::<span style=color:#000>example</span>::<span style=color:#000>ItemServiceClientBuilder</span>::<span style=color:#000>new</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;volo-example&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#000;font-weight:700>.</span><span style=color:#000>address</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>addr</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#000;font-weight:700>.</span><span style=color:#000>build</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>};</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic>#[volo::main]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>async</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>fn</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>tracing_subscriber</span>::<span style=color:#000>fmt</span>::<span style=color:#000>init</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>let</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>req</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>volo_gen</span>::<span style=color:#000>volo</span>::<span style=color:#000>example</span>::<span style=color:#000>GetItemRequest</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>id</span>: <span style=color:#0000cf;font-weight:700>1024</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>};</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>let</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>resp</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>CLIENT</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>get_item</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>req</span><span style=color:#000;font-weight:700>).</span><span style=color:#204a87;font-weight:700>await</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>match</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>resp</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87>Ok</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>info</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>tracing</span>::<span style=color:#000>info!</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;{:?}&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>info</span><span style=color:#000;font-weight:700>),</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87>Err</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>e</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>tracing</span>::<span style=color:#000>error!</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;{:?}&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>e</span><span style=color:#000;font-weight:700>),</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Then add the required dependencies to the <code>Cargo.toml</code> file, which looks like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>package</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>name</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;volo_example&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>version</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;0.1.0&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>edition</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>workspace</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>dependencies</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>volo-gen</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>path</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;./volo-gen&#34;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>volo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>workspace</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span><span style=color:#000>volo-grpc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>workspace</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span><span style=color:#000>pilota</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>workspace</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>anyhow</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>workspace</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span><span style=color:#000>tokio</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>workspace</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>features</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;full&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex;background-color:#dfdfdf><span><span style=color:#000>tracing</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;0.1.41&#34;</span>
</span></span><span style=display:flex;background-color:#dfdfdf><span><span style=color:#000>lazy_static</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;1.5.0&#34;</span>
</span></span><span style=display:flex;background-color:#dfdfdf><span><span style=color:#000>tracing-subscriber</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;0.3.19&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>profile</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>release</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>opt-level</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span>
</span></span><span style=display:flex><span><span style=color:#000>debug</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span><span style=color:#000>debug-assertions</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span>
</span></span><span style=display:flex><span><span style=color:#000>overflow-checks</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span>
</span></span><span style=display:flex><span><span style=color:#000>lto</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span><span style=color:#000>panic</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#39;unwind&#39;</span>
</span></span><span style=display:flex><span><span style=color:#000>incremental</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span>
</span></span><span style=display:flex><span><span style=color:#000>codegen-units</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span>
</span></span><span style=display:flex><span><span style=color:#000>rpath</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>workspace</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>members</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;volo-gen&#34;</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>resolver</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;2&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>workspace</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>package</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>edition</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;2021&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>workspace</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>dependencies</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># we recommend to use the latest framework version for new features and bug fixes</span>
</span></span><span style=display:flex><span><span style=color:#000>volo</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;*&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>volo-build</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;*&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>volo-grpc</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;*&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>pilota</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;*&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>anyhow</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;1&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>futures</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;0.3&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>tokio</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;1&#34;</span>
</span></span></code></pre></div><p>Then, <strong>create a new terminal</strong> and run the following command to start our server:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cargo run --bin server
</span></span></code></pre></div><p>Finally, we go back to the current directory and execute the following command, and we can see that the execution is successful:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cargo run --bin client
</span></span></code></pre></div><h2 id=part-3-add-a-middleware>Part 3. Add a Middleware</h2><p>Next, let&rsquo;s look at how to add middleware to Volo.</p><p>For example, if we need a middleware that prints out the received requests, the returned responses and the elapsed time, we could write a Service in <code>lib.rs</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#[derive(Clone)]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>pub</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000>LogService</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>S</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>S</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic>#[volo::service]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>impl</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Cx</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Req</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>S</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>volo</span>::<span style=color:#000>Service</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Cx</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Req</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>for</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>LogService</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>S</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>where</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>Req</span>: <span style=color:#204a87>Send</span> <span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87>&#39;static</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>S</span>: <span style=color:#204a87>Send</span> <span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87>&#39;static</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>volo</span>::<span style=color:#000>Service</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Cx</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Req</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87>Sync</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>Cx</span>: <span style=color:#204a87>Send</span> <span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87>&#39;static</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>async</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>fn</span> <span style=color:#000>call</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>cx</span>: <span style=color:#204a87;font-weight:700>&amp;</span><span style=color:#000>mut</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Cx</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>req</span>: <span style=color:#000>Req</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline> </span>-&gt; <span style=color:#204a87>Result</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>S</span>::<span style=color:#000>Response</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>S</span>::<span style=color:#000>Error</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>let</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>now</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>std</span>::<span style=color:#000>time</span>::<span style=color:#000>Instant</span>::<span style=color:#000>now</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>let</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>resp</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>.</span><span style=color:#0000cf;font-weight:700>0.</span><span style=color:#000>call</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cx</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>req</span><span style=color:#000;font-weight:700>).</span><span style=color:#204a87;font-weight:700>await</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#000>tracing</span>::<span style=color:#000>info!</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Request took {}ms&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>now</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>elapsed</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>as_millis</span><span style=color:#000;font-weight:700>());</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#000>resp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Then we wrap a Layer around the Service:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#204a87;font-weight:700>pub</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000>LogLayer</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>impl</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>S</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>volo</span>::<span style=color:#000>Layer</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>S</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>for</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>LogLayer</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Service</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>LogService</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>S</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>fn</span> <span style=color:#000>layer</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>inner</span>: <span style=color:#000>S</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline> </span>-&gt; <span style=color:#000>Self</span>::<span style=color:#000>Service</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#000>LogService</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>inner</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Finally, we add this Layer to client and server:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#204a87;font-weight:700>use</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>volo_example</span>::<span style=color:#000>LogLayer</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic>// client.rs
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>static</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>ref</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>CLIENT</span>: <span style=color:#000>volo_gen</span>::<span style=color:#000>volo</span>::<span style=color:#000>example</span>::<span style=color:#000>ItemServiceClient</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>let</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>addr</span>: <span style=color:#000>SocketAddr</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;[::1]:8080&#34;</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>parse</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>unwrap</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>volo_gen</span>::<span style=color:#000>volo</span>::<span style=color:#000>example</span>::<span style=color:#000>ItemServiceClientBuilder</span>::<span style=color:#000>new</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;volo-example&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#000;font-weight:700>.</span><span style=color:#000>layer_outer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>LogLayer</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#000;font-weight:700>.</span><span style=color:#000>address</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>addr</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#000;font-weight:700>.</span><span style=color:#000>build</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>};</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic>// server.rs
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>Server</span>::<span style=color:#000>new</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>.</span><span style=color:#000>add_service</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ServiceBuilder</span>::<span style=color:#000>new</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>volo_gen</span>::<span style=color:#000>volo</span>::<span style=color:#000>example</span>::<span style=color:#000>ItemServiceServer</span>::<span style=color:#000>new</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>S</span><span style=color:#000;font-weight:700>)).</span><span style=color:#000>build</span><span style=color:#000;font-weight:700>())</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>.</span><span style=color:#000>layer_front</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>LogLayer</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>.</span><span style=color:#000>run</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>addr</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>.</span><span style=color:#204a87;font-weight:700>await</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>.</span><span style=color:#000>unwrap</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>At this point, it prints out how long the request took at the INFO log level.</p><h2 id=part-4-whats-next>Part 4. What&rsquo;s Next?</h2><p>Congratulations, you&rsquo;ve read this far! At this point, we&rsquo;ve basically learned how to use Volo, and we&rsquo;re ready to use Volo to kick off our Rust journey</p><p>Next, you may need to select the right components, put them together, and interface with your system.</p><p>The related ecosystem maintained by Volo will be located in: <a href=https://github.com/volo-rs>https://github.com/volo-rs</a>, we are working to build our ecosystem, and welcome everyone to join us ~</p><p>If there is a dire lack of components, you are welcomed to raise an issue in: <a href=https://github.com/cloudwego/volo>https://github.com/cloudwego/volo</a>, we will support it as soon as possible.</p><p>In the meantime, welcome to join our Lark user group and share your experience with us about Volo.</p><div align=center><img src=/img/docs/feishu_group_volo.png width=400 alt=Volo_feishu></div><br><br><p>Looking forward to your unique work created with Volo.</p><div class=section-index></div><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p></div><script>const yesButton=document.querySelector(".feedback--answer-yes"),noButton=document.querySelector(".feedback--answer-no"),yesResponse=document.querySelector(".feedback--response-yes"),noResponse=document.querySelector(".feedback--response-no"),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=e=>{if(typeof ga!="function")return;const t={command:"send",hitType:"event",category:"Helpful",action:"click",label:window.location.pathname,value:e};ga(t.command,t.hitType,t.category,t.action,t.label,t.value)};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(1)}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(0)})</script><br><div class=td-page-meta__lastmod>Last modified June 23, 2025: <a data-proofer-ignore href=https://github.com/cloudwego/cloudwego.github.io/commit/9c7fb3a7cdc7674fcb44dccf3d556b366c8ab310>fix: 同步 Volo-gRPC Volo-Thrift 教程的 Cargo.toml 示例到官方volo init命令生成的 Cargo.toml (#1359) (9c7fb3a7)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Lark aria-label=Lark><a class=text-white target=_blank rel=noopener href="https://applink.feishu.cn/client/chat/chatter/add_by_link?link_token=693v2544-2664-4421-b50f-7f1912p745r6" aria-label=Lark><img src=/webfonts/lark.svg alt style=width:26px;line-height:32.5px;margin-bottom:6px;fill:#fff></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/CloudWeGo aria-label=Twitter><img src=/webfonts/x-twitter.svg alt style=width:26px;line-height:32.5px;margin-bottom:6px;fill:#fff></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/cloudwego aria-label=GitHub><i class="fa-brands fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Discord aria-label=Discord><a class=text-white target=_blank rel=noopener href=https://discord.gg/jceZSE7DsW aria-label=Discord><i class="fa-brands fa-discord"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2026 The CloudWeGo Authors</small><p class="mt-2 text-white"><a class=cloudwego-link href=/about/ target=_blank rel=noopener>About</a>
|
<a class=cloudwego-link href=https://github.com/cloudwego/cloudwego.github.io/blob/main/LICENSE target=_blank rel=noopener>License</a></p></div></div></div></footer></div><script src=/js/popper.min.js></script><script src=/js/bootstrap.min.js></script><script src=https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js></script><script src=https://cdn.jsdelivr.net/npm/mermaid@10.9.1/dist/mermaid.min.js></script><script src=/js/main.min.84ba9af565392cd38463af5d663ae483367bd953c1d38a4273aa09e0bfd62d65.js integrity="sha256-hLqa9WU5LNOEY69dZjrkgzZ72VPB04pCc6oJ4L/WLWU=" crossorigin=anonymous></script><script src=/js/prism.js></script><script src=/js/prism-custom.js></script><script src=/js/tabpane-persist.js></script><script src=/js/docsearch.js></script><script type=text/javascript>let siteLang=window.location.pathname.startsWith("/zh/")?"zh":"en";docsearch({appId:"V7I042F992",apiKey:"8380a7ac88106841cb43fb000fa2edb4",indexName:"cloudwego",container:"#docsearch",searchParameters:{hitsPerPage:5,facetFilters:[`lang:${siteLang}`]},transformItems(e){return e.map(e=>({...e,url:e.url.replace("www.cloudwego.io",location.host).replace("https:",location.protocol)}))}})</script><script src=/js/outbound-link.js></script><script src=/js/navScroll.js></script></body></html>